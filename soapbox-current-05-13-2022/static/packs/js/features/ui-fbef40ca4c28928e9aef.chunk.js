(self.webpackChunksoapbox_fe=self.webpackChunksoapbox_fe||[]).push([[71],{1345:function(e,t,o){o(1);var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){if("undefined"!=typeof window){var e=Array.prototype.slice,t=Element.prototype.matches||Element.prototype.msMatchesSelector,o=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","details","summary","iframe","object","embed","[contenteditable]"].join(","),r=function(){function r(e,t){i(this,r),this._inertManager=t,this._rootElement=e,this._managedNodes=new Set,this._rootElement.hasAttribute("aria-hidden")?this._savedAriaHidden=this._rootElement.getAttribute("aria-hidden"):this._savedAriaHidden=null,this._rootElement.setAttribute("aria-hidden","true"),this._makeSubtreeUnfocusable(this._rootElement),this._observer=new MutationObserver(this._onMutation.bind(this)),this._observer.observe(this._rootElement,{attributes:!0,childList:!0,subtree:!0})}return n(r,[{key:"destructor",value:function(){this._observer.disconnect(),this._rootElement&&(null!==this._savedAriaHidden?this._rootElement.setAttribute("aria-hidden",this._savedAriaHidden):this._rootElement.removeAttribute("aria-hidden")),this._managedNodes.forEach((function(e){this._unmanageNode(e.node)}),this),this._observer=null,this._rootElement=null,this._managedNodes=null,this._inertManager=null}},{key:"_makeSubtreeUnfocusable",value:function(e){var t=this;d(e,(function(e){return t._visitNode(e)}));var o=document.activeElement;if(!document.body.contains(e)){for(var n=e,i=void 0;n;){if(n.nodeType===Node.DOCUMENT_FRAGMENT_NODE){i=n;break}n=n.parentNode}i&&(o=i.activeElement)}e.contains(o)&&(o.blur(),o===document.activeElement&&document.body.focus())}},{key:"_visitNode",value:function(e){if(e.nodeType===Node.ELEMENT_NODE){var n=e;n!==this._rootElement&&n.hasAttribute("inert")&&this._adoptInertRoot(n),(t.call(n,o)||n.hasAttribute("tabindex"))&&this._manageNode(n)}}},{key:"_manageNode",value:function(e){var t=this._inertManager.register(e,this);this._managedNodes.add(t)}},{key:"_unmanageNode",value:function(e){var t=this._inertManager.deregister(e,this);t&&this._managedNodes.delete(t)}},{key:"_unmanageSubtree",value:function(e){var t=this;d(e,(function(e){return t._unmanageNode(e)}))}},{key:"_adoptInertRoot",value:function(e){var t=this._inertManager.getInertRoot(e);t||(this._inertManager.setInert(e,!0),t=this._inertManager.getInertRoot(e)),t.managedNodes.forEach((function(e){this._manageNode(e.node)}),this)}},{key:"_onMutation",value:function(t,o){t.forEach((function(t){var o=t.target;if("childList"===t.type)e.call(t.addedNodes).forEach((function(e){this._makeSubtreeUnfocusable(e)}),this),e.call(t.removedNodes).forEach((function(e){this._unmanageSubtree(e)}),this);else if("attributes"===t.type)if("tabindex"===t.attributeName)this._manageNode(o);else if(o!==this._rootElement&&"inert"===t.attributeName&&o.hasAttribute("inert")){this._adoptInertRoot(o);var n=this._inertManager.getInertRoot(o);this._managedNodes.forEach((function(e){o.contains(e.node)&&n._manageNode(e.node)}))}}),this)}},{key:"managedNodes",get:function(){return new Set(this._managedNodes)}},{key:"hasSavedAriaHidden",get:function(){return null!==this._savedAriaHidden}},{key:"savedAriaHidden",set:function(e){this._savedAriaHidden=e},get:function(){return this._savedAriaHidden}}]),r}(),a=function(){function e(t,o){i(this,e),this._node=t,this._overrodeFocusMethod=!1,this._inertRoots=new Set([o]),this._savedTabIndex=null,this._destroyed=!1,this.ensureUntabbable()}return n(e,[{key:"destructor",value:function(){if(this._throwIfDestroyed(),this._node&&this._node.nodeType===Node.ELEMENT_NODE){var e=this._node;null!==this._savedTabIndex?e.setAttribute("tabindex",this._savedTabIndex):e.removeAttribute("tabindex"),this._overrodeFocusMethod&&delete e.focus}this._node=null,this._inertRoots=null,this._destroyed=!0}},{key:"_throwIfDestroyed",value:function(){if(this.destroyed)throw new Error("Trying to access destroyed InertNode")}},{key:"ensureUntabbable",value:function(){if(this.node.nodeType===Node.ELEMENT_NODE){var e=this.node;if(t.call(e,o)){if(-1===e.tabIndex&&this.hasSavedTabIndex)return;e.hasAttribute("tabindex")&&(this._savedTabIndex=e.tabIndex),e.setAttribute("tabindex","-1"),e.nodeType===Node.ELEMENT_NODE&&(e.focus=function(){},this._overrodeFocusMethod=!0)}else e.hasAttribute("tabindex")&&(this._savedTabIndex=e.tabIndex,e.removeAttribute("tabindex"))}}},{key:"addInertRoot",value:function(e){this._throwIfDestroyed(),this._inertRoots.add(e)}},{key:"removeInertRoot",value:function(e){this._throwIfDestroyed(),this._inertRoots.delete(e),0===this._inertRoots.size&&this.destructor()}},{key:"destroyed",get:function(){return this._destroyed}},{key:"hasSavedTabIndex",get:function(){return null!==this._savedTabIndex}},{key:"node",get:function(){return this._throwIfDestroyed(),this._node}},{key:"savedTabIndex",set:function(e){this._throwIfDestroyed(),this._savedTabIndex=e},get:function(){return this._throwIfDestroyed(),this._savedTabIndex}}]),e}(),s=function(){function o(e){if(i(this,o),!e)throw new Error("Missing required argument; InertManager needs to wrap a document.");this._document=e,this._managedNodes=new Map,this._inertRoots=new Map,this._observer=new MutationObserver(this._watchForInert.bind(this)),l(e.head||e.body||e.documentElement),"loading"===e.readyState?e.addEventListener("DOMContentLoaded",this._onDocumentLoaded.bind(this)):this._onDocumentLoaded()}return n(o,[{key:"setInert",value:function(e,t){if(t){if(this._inertRoots.has(e))return;var o=new r(e,this);if(e.setAttribute("inert",""),this._inertRoots.set(e,o),!this._document.body.contains(e))for(var n=e.parentNode;n;)11===n.nodeType&&l(n),n=n.parentNode}else{if(!this._inertRoots.has(e))return;this._inertRoots.get(e).destructor(),this._inertRoots.delete(e),e.removeAttribute("inert")}}},{key:"getInertRoot",value:function(e){return this._inertRoots.get(e)}},{key:"register",value:function(e,t){var o=this._managedNodes.get(e);return void 0!==o?o.addInertRoot(t):o=new a(e,t),this._managedNodes.set(e,o),o}},{key:"deregister",value:function(e,t){var o=this._managedNodes.get(e);return o?(o.removeInertRoot(t),o.destroyed&&this._managedNodes.delete(e),o):null}},{key:"_onDocumentLoaded",value:function(){e.call(this._document.querySelectorAll("[inert]")).forEach((function(e){this.setInert(e,!0)}),this),this._observer.observe(this._document.body||this._document.documentElement,{attributes:!0,subtree:!0,childList:!0})}},{key:"_watchForInert",value:function(o,n){var i=this;o.forEach((function(o){switch(o.type){case"childList":e.call(o.addedNodes).forEach((function(o){if(o.nodeType===Node.ELEMENT_NODE){var n=e.call(o.querySelectorAll("[inert]"));t.call(o,"[inert]")&&n.unshift(o),n.forEach((function(e){this.setInert(e,!0)}),i)}}),i);break;case"attributes":if("inert"!==o.attributeName)return;var n=o.target,r=n.hasAttribute("inert");i.setInert(n,r)}}),this)}}]),o}();if(!Element.prototype.hasOwnProperty("inert")){var c=new s(document);Object.defineProperty(Element.prototype,"inert",{enumerable:!0,get:function(){return this.hasAttribute("inert")},set:function(e){c.setInert(this,e)}})}}function d(e,t,o){if(e.nodeType==Node.ELEMENT_NODE){var n=e;t&&t(n);var i=n.shadowRoot;if(i)return void d(i,t,i);if("content"==n.localName){for(var r=n,a=r.getDistributedNodes?r.getDistributedNodes():[],s=0;s<a.length;s++)d(a[s],t,o);return}if("slot"==n.localName){for(var c=n,l=c.assignedNodes?c.assignedNodes({flatten:!0}):[],u=0;u<l.length;u++)d(l[u],t,o);return}}for(var f=e.firstChild;null!=f;)d(f,t,o),f=f.nextSibling}function l(e){if(!e.querySelector("style#inert-style, link#inert-style")){var t=document.createElement("style");t.setAttribute("id","inert-style"),t.textContent="\n[inert] {\n  pointer-events: none;\n  cursor: default;\n}\n\n[inert], [inert] * {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n",e.appendChild(t)}}}()},1074:function(e,t,o){"use strict";o.r(t);var n=o(1821),i=o(602),r=o(0),a=o(1827),s=o(3),c=o(16),d=o(2),l=o(23),u=o(4);t.default=function(e){var t=e.limit,o=(0,s.I0)(),f=(0,u.CG)((function(e){return e.user_lists.getIn(["birthday_reminders",e.me],(0,i.OrderedSet)())})).slice(0,t);return r.useEffect((function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1;o((0,c.xo)(n,t))}),[]),f.isEmpty()?null:(0,n.Z)(d.$L,{title:(0,n.Z)(a.Z,{id:"birthday_panel.title",defaultMessage:"Birthdays"})},void 0,f.map((function(e){return(0,n.Z)(l.Z,{id:e},e)})))}},1109:function(e,t,o){"use strict";o.r(t),o.d(t,{ProfileHoverCard:function(){return M}});var n=o(1810),i=o(1821),r=(o(1),o(6)),a=o.n(r),s=o(0),c=o(583),d=o(1317),l=o(1811),u=o(16),f=o(1843),p=o(404),v=o(215),m=o(36),h=o(30),g=o(4),Z=o(11),y=o(193),_=o(2),b=(0,Z.Tm)(),w=function(e){return function(){e((0,f.P_)())}},C=function(e){return function(){e((0,f.Ex)(!0))}},M=function(e){var t=e.visible,o=void 0===t||t,r=(0,g.TL)(),Z=(0,l.k6)(),M=(0,c.Z)(),k=(0,s.useState)(null),x=k[0],N=k[1],E=(0,g.CG)((function(e){return e.me})),O=(0,g.CG)((function(e){return e.profile_hover_card.get("accountId",void 0)})),I=(0,g.CG)((function(e){return O&&b(e,O)})),S=(0,g.CG)((function(e){return e.profile_hover_card.getIn(["ref","current"])})),P=I?function(e){var t=[];return e.admin?t.push((0,i.Z)(p.Z,{slug:"admin",title:"Admin"},"admin")):e.moderator&&t.push((0,i.Z)(p.Z,{slug:"moderator",title:"Moderator"},"moderator")),e.getIn(["patron","is_patron"])&&t.push((0,i.Z)(p.Z,{slug:"patron",title:"Patron"},"patron")),e.donor&&t.push((0,i.Z)(p.Z,{slug:"donor",title:"Donor"},"donor")),t}(I):[];(0,s.useEffect)((function(){O&&r((0,u.dm)([O]))}),[r,O]),(0,s.useEffect)((function(){var e=Z.listen((function(){y.Uv.cancel(),r((0,f.Ex)())}));return function(){e()}}),[]);var T=(0,d.D)(S,x),A=T.styles,R=T.attributes;if(!I)return null;var D={__html:I.note_emojified},j=E!==I.id&&!0===I.relationship.get("followed_by");return s.createElement("div",(0,n.Z)({className:a()({"absolute transition-opacity w-[320px] z-50 top-0 left-0":!0,"opacity-100":o,"opacity-0 pointer-events-none":!o}),ref:N,style:A.popper},R.popper,{onMouseEnter:w(r),onMouseLeave:C(r)}),(0,i.Z)(_.Zb,{variant:"rounded",className:"relative"},void 0,(0,i.Z)(_.eW,{},void 0,(0,i.Z)(_.Kq,{space:2},void 0,(0,i.Z)(m.Z,{fetchComponent:h.i1},void 0,(function(e){return(0,i.Z)(e,{accountId:I.get("id"),action:(0,i.Z)(v.Z,{account:I,small:!0}),badges:P})})),I.source.get("note","").length>0&&(0,i.Z)(_.xv,{size:"sm",dangerouslySetInnerHTML:D})),j&&(0,i.Z)("div",{className:"absolute top-2 left-2"},void 0,(0,i.Z)(p.Z,{slug:"opaque",title:M.formatMessage({id:"account.follows_you",defaultMessage:"Follows you"})})))))};t.default=M},1107:function(e,t,o){"use strict";o.r(t);var n=o(1821),i=(o(1),o(6)),r=o.n(i),a=o(0),s=o(1815),c=o(583),d=o(1827),l=o(3),u=o(970),f=o(29),p=o(12),v=o(1846),m=o(245),h=o(277),g=o(2),Z=o(500),y=o(4),_=o(11),b=o(38),w=(0,s.vU)({followers:{id:"account.followers",defaultMessage:"Followers"},follows:{id:"account.follows",defaultMessage:"Follows"},profile:{id:"account.profile",defaultMessage:"Profile"},preferences:{id:"navigation_bar.preferences",defaultMessage:"Preferences"},blocks:{id:"navigation_bar.blocks",defaultMessage:"Blocked users"},domainBlocks:{id:"navigation_bar.domain_blocks",defaultMessage:"Hidden domains"},mutes:{id:"navigation_bar.mutes",defaultMessage:"Muted users"},filters:{id:"navigation_bar.filters",defaultMessage:"Muted words"},soapboxConfig:{id:"navigation_bar.soapbox_config",defaultMessage:"Soapbox config"},importData:{id:"navigation_bar.import_data",defaultMessage:"Import data"},accountMigration:{id:"navigation_bar.account_migration",defaultMessage:"Move account"},accountAliases:{id:"navigation_bar.account_aliases",defaultMessage:"Account aliases"},logout:{id:"navigation_bar.logout",defaultMessage:"Logout"},bookmarks:{id:"column.bookmarks",defaultMessage:"Bookmarks"},lists:{id:"column.lists",defaultMessage:"Lists"},invites:{id:"navigation_bar.invites",defaultMessage:"Invites"},developers:{id:"navigation.developers",defaultMessage:"Developers"},addAccount:{id:"profile_dropdown.add_account",defaultMessage:"Add an existing account"}}),C=function(e){var t=e.to,o=e.icon,i=e.text,r=e.onClick;return(0,n.Z)(u.OL,{className:"group py-1 rounded-md",to:t,onClick:r},void 0,(0,n.Z)(g.Ug,{space:2,alignItems:"center"},void 0,(0,n.Z)("div",{className:"bg-primary-50 dark:bg-slate-700 relative rounded inline-flex p-2"},void 0,(0,n.Z)(g.JO,{src:o,className:"text-primary-600 h-5 w-5"})),(0,n.Z)(g.xv,{tag:"span",weight:"medium",theme:"muted",className:"group-hover:text-gray-800 dark:group-hover:text-gray-200"},void 0,i)))},M=(0,_._H)();t.default=function(){var e=(0,c.Z)(),t=(0,l.I0)(),i=(0,y.hz)(),s=(0,_.Tm)(),k=(0,y.CG)((function(e){return e.instance})),x=(0,y.CG)((function(e){return e.me})),N=(0,y.CG)((function(e){return x?s(e,x):null})),E=(0,y.CG)((function(e){return M(e)})),O=(0,y.CG)((function(e){return e.sidebar.sidebarOpen})),I=(0,y.CG)((function(e){return(0,p.Gw)(e)})),S=N?(0,b.BS)(N):"",P=a.useRef(null),T=a.useState(!1),A=T[0],R=T[1],D=function(){return t((0,v.Xp)())},j=function(){R(!1),D()},L=function(e){return function(o){o.preventDefault(),t((0,f.yD)(e.id))}};return a.useEffect((function(){t((0,f.Y)())}),[]),N?(0,n.Z)("div",{className:r()("sidebar-menu__root",{"sidebar-menu__root--visible":O})},void 0,(0,n.Z)("div",{className:r()({"fixed inset-0 bg-gray-600 bg-opacity-90 z-1000":!0,hidden:!O}),role:"button",onClick:j}),(0,n.Z)("div",{className:"sidebar-menu"},void 0,(0,n.Z)("div",{className:"relative overflow-y-scroll overflow-auto h-full w-full"},void 0,(0,n.Z)("div",{className:"p-4"},void 0,(0,n.Z)(g.Kq,{space:4},void 0,(0,n.Z)(g.Ug,{alignItems:"center",justifyContent:"between"},void 0,(0,n.Z)(u.rU,{to:"/",onClick:D},void 0,(0,n.Z)(h.Z,{alt:"Logo",className:"h-5 w-auto cursor-pointer"})),a.createElement(g.hU,{title:"close",onClick:j,src:o(26),ref:P,className:"text-gray-400 hover:text-gray-600"})),(0,n.Z)(g.Kq,{space:1},void 0,(0,n.Z)(u.rU,{to:"/@".concat(N.acct),onClick:D},void 0,(0,n.Z)(m.Z,{account:N,showProfileHoverCard:!1})),(0,n.Z)(g.Kq,{},void 0,(0,n.Z)("button",{type:"button",onClick:function(e){e.preventDefault(),R((function(e){return!e}))},className:"py-1"},void 0,(0,n.Z)(g.Ug,{alignItems:"center",justifyContent:"between"},void 0,(0,n.Z)(g.xv,{tag:"span",size:"sm",weight:"medium"},void 0,"Switch accounts"),(0,n.Z)(g.JO,{src:o(459),className:r()("text-black dark:text-white transition-transform",{"rotate-180":A})}))),A&&(0,n.Z)("div",{className:"border-t border-solid border-gray-200"},void 0,E.map((function(e){return function(e){return(0,n.Z)("a",{href:"#",className:"block py-2",onClick:L(e)},e.id,(0,n.Z)("div",{className:"pointer-events-none"},void 0,(0,n.Z)(m.Z,{account:e,showProfileHoverCard:!1,withRelationship:!1})))}(e)})),(0,n.Z)(u.OL,{className:"flex py-2 space-x-1",to:"/login",onClick:j},void 0,(0,n.Z)(g.JO,{className:"dark:text-white",src:o(48)}),(0,n.Z)(g.xv,{},void 0,e.formatMessage(w.addAccount)))))),(0,n.Z)(Z.Z,{account:N,onClickHandler:j}),(0,n.Z)(g.Kq,{space:2},void 0,(0,n.Z)("hr",{}),(0,n.Z)(C,{to:"/@".concat(N.acct),icon:o(462),text:e.formatMessage(w.profile),onClick:D}),i.bookmarks&&(0,n.Z)(C,{to:"/bookmarks",icon:o(504),text:e.formatMessage(w.bookmarks),onClick:D}),i.lists&&(0,n.Z)(C,{to:"/lists",icon:o(221),text:e.formatMessage(w.lists),onClick:D}),k.invites_enabled&&(0,n.Z)(C,{to:"".concat(S,"/invites"),icon:o(531),text:e.formatMessage(w.invites),onClick:D}),I.get("isDeveloper")&&(0,n.Z)(C,{to:"/developers",icon:o(532),text:e.formatMessage(w.developers),onClick:D}),i.publicTimeline&&a.createElement(a.Fragment,null,(0,n.Z)("hr",{className:"dark:border-slate-700"}),(0,n.Z)(C,{to:"/timeline/local",icon:i.federating?o(513):o(514),text:i.federating?k.title:(0,n.Z)(d.Z,{id:"tabs_bar.all",defaultMessage:"All"}),onClick:D}),i.federating&&(0,n.Z)(C,{to:"/timeline/fediverse",icon:o(534),text:(0,n.Z)(d.Z,{id:"tabs_bar.fediverse",defaultMessage:"Fediverse"}),onClick:D})),(0,n.Z)("hr",{}),(0,n.Z)(C,{to:"/blocks",icon:o(49),text:e.formatMessage(w.blocks),onClick:D}),(0,n.Z)(C,{to:"/mutes",icon:o(157),text:e.formatMessage(w.mutes),onClick:D}),(0,n.Z)(C,{to:"/settings/preferences",icon:o(505),text:e.formatMessage(w.preferences),onClick:D}),i.federating&&(0,n.Z)(C,{to:"/domain_blocks",icon:o(49),text:e.formatMessage(w.domainBlocks),onClick:D}),i.filters&&(0,n.Z)(C,{to:"/filters",icon:o(572),text:e.formatMessage(w.filters),onClick:D}),N.admin&&(0,n.Z)(C,{to:"/soapbox/config",icon:o(505),text:e.formatMessage(w.soapboxConfig),onClick:D}),i.importAPI&&(0,n.Z)(C,{to:"/settings/import",icon:o(403),text:e.formatMessage(w.importData),onClick:D}),i.federating&&(i.accountMoving?(0,n.Z)(C,{to:"/settings/migration",icon:o(416),text:e.formatMessage(w.accountMigration),onClick:D}):i.accountAliasesAPI&&(0,n.Z)(C,{to:"/settings/aliases",icon:o(416),text:e.formatMessage(w.accountAliases),onClick:D})),(0,n.Z)("hr",{}),(0,n.Z)(C,{to:"/logout",icon:o(407),text:e.formatMessage(w.logout),onClick:function(o){o.preventDefault(),t((0,f.ni)(e))}}))))))):null}},1075:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return Z}});var n,i,r=o(1821),a=o(1814),s=(o(1),o(0)),c=o(1815),d=o(584),l=o(1827),u=o(3),f=o(251),p=o(1828),v=o(2),m=o(11),h=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),g=(0,c.vU)({placeholder:{id:"account_note.placeholder",defaultMessage:"No comment provided"},save:{id:"account_note.save",defaultMessage:"Save"}}),Z=(0,u.$j)((function(){var e=(0,m.Tm)();return function(t){return{isSubmitting:t.getIn(["account_notes","edit","isSubmitting"]),account:e(t,t.getIn(["account_notes","edit","account_id"])),comment:t.getIn(["account_notes","edit","comment"])}}}),(function(e){return{onConfirm:function(){e((0,f.Td)())},onClose:function(){e((0,p.Mr)())},onCommentChange:function(t){e((0,f.zh)(t))}}}))(i=(0,d.ZP)(i=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,a.Z)(t,"handleCommentChange",(function(e){t.props.onCommentChange(e.target.value)})),(0,a.Z)(t,"handleSubmit",(function(){t.props.onConfirm()})),(0,a.Z)(t,"handleKeyDown",(function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey)&&t.handleSubmit()})),t}return h(t,e),t.prototype.render=function(){var e=this.props,t=e.account,o=e.isSubmitting,n=e.comment,i=e.onClose,a=e.intl;return(0,r.Z)(v.u_,{title:(0,r.Z)(l.Z,{id:"account_note.target",defaultMessage:"Note for @{target}",values:{target:t.get("acct")}}),onClose:i,confirmationAction:this.handleSubmit,confirmationText:a.formatMessage(g.save),confirmationDisabled:o},void 0,(0,r.Z)(v.xv,{theme:"muted"},void 0,(0,r.Z)(l.Z,{id:"account_note.hint",defaultMessage:"You can keep notes about this user for yourself (this will not be shared with them):"})),(0,r.Z)("textarea",{className:"setting-text light",placeholder:a.formatMessage(g.placeholder),value:n,onChange:this.handleCommentChange,onKeyDown:this.handleKeyDown,disabled:o,autoFocus:!0}))},t}(s.PureComponent))||i)||i},1059:function(e,t,o){"use strict";o.r(t);var n=o(1810),i=o(1821),r=o(6),a=o.n(r),s=o(0),c=o(1827),d=o(171),l=o.n(d),u=o(15),f=o(274),p=o(2),v=o(23),m=o(156);t.default=function(e){var t=e.status,o=e.actions,r=e.onClick,d=e.onClose,h=function(e,t){if(null===e)return(0,i.Z)("li",{className:"dropdown-menu__separator"},"sep-".concat(t));var o=e.icon,c=void 0===o?null:o,d=e.text,l=e.meta,f=void 0===l?null:l,p=e.active,v=void 0!==p&&p,m=e.href,h=void 0===m?"#":m,g=e.isLogout,Z=e.destructive,y="#"===h?"button":"a",_="#"===h?{onClick:r}:{href:h};return(0,i.Z)("li",{},"".concat(d,"-").concat(t),s.createElement(y,(0,n.Z)({},_,{rel:"noopener","data-index":t,className:a()({active:v,destructive:Z}),"data-method":g?"delete":null}),c&&(0,i.Z)(u.Z,{title:d,src:c,role:"presentation",tabIndex:"-1",inverted:!0}),(0,i.Z)("div",{},void 0,(0,i.Z)("div",{className:a()({"actions-modal__item-label":!!f})},void 0,d),(0,i.Z)("div",{},void 0,f))))};return(0,i.Z)(m.Z,{defaultStyle:{top:100},style:{top:l()(0)}},void 0,(function(e){var n=e.top;return(0,i.Z)("div",{className:"modal-root__modal actions-modal",style:{top:"".concat(n,"%")}},void 0,t&&(0,i.Z)(p.Kq,{space:2,className:"p-4 bg-gray-50 dark:bg-slate-800 border-b border-solid border-gray-200 dark:border-gray-700"},void 0,(0,i.Z)(v.Z,{account:t.get("account"),showProfileHoverCard:!1,timestamp:t.get("created_at")}),(0,i.Z)(f.Z,{status:t})),(0,i.Z)("ul",{className:a()({"with-status":!!t})},void 0,o&&o.map(h),(0,i.Z)("li",{className:"dropdown-menu__separator"}),(0,i.Z)("li",{},void 0,(0,i.Z)("button",{type:"button",onClick:d},void 0,(0,i.Z)(c.Z,{id:"lightbox.close",defaultMessage:"Cancel"})))))}))}},1073:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return Z}});var n=o(1821),i=o(1827),r=o(21),a=o(2),s=o(1815),c=o(583),d=o(40),l=o(66),u=o(15),f=o(281),p=o(4),v=o(11),m=(0,s.vU)({birthday:{id:"account.birthday",defaultMessage:"Born {date}"}}),h=(0,v.Tm)(),g=function(e){var t=e.accountId,i=(0,c.Z)(),r=(0,p.CG)((function(e){return h(e,t)}));if(!r)return null;var a=r.get("birthday");if(!a)return null;var s=i.formatDate(a,{day:"numeric",month:"short",year:"numeric"});return(0,n.Z)("div",{className:"account"},void 0,(0,n.Z)("div",{className:"account__wrapper"},void 0,(0,n.Z)(f.Z,{className:"account__display-name",title:r.get("acct"),href:"/@".concat(r.get("acct")),to:"/@".concat(r.get("acct"))},void 0,(0,n.Z)("div",{className:"account__display-name"},void 0,(0,n.Z)("div",{className:"account__avatar-wrapper"},void 0,(0,n.Z)(d.Z,{account:r,size:36})),(0,n.Z)(l.Z,{account:r}))),(0,n.Z)("div",{className:"flex items-center gap-0.5",title:i.formatMessage(m.birthday,{date:s})},void 0,(0,n.Z)(u.Z,{src:o(547)}),s)))},Z=function(e){var t,o=e.onClose,s=(0,p.CG)((function(e){return e.user_lists.getIn(["birthday_reminders",e.me])}));if(s){var c=(0,n.Z)(i.Z,{id:"status.reblogs.empty",defaultMessage:"No one has reposted this post yet. When someone does, they will show up here."});t=(0,n.Z)(r.Z,{scrollKey:"reblogs",emptyMessage:c,itemClassName:"pb-3"},void 0,s.map((function(e){return(0,n.Z)(g,{accountId:e},e)})))}else t=(0,n.Z)(a.$j,{});return(0,n.Z)(a.u_,{title:(0,n.Z)(i.Z,{id:"column.birthdays",defaultMessage:"Birthdays"}),onClose:function(){o("BIRTHDAYS")}},void 0,t)}},1056:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return w}});var n,i,r,a=o(1821),s=o(1814),c=(o(1),o(5)),d=o.n(c),l=o(10),u=o.n(l),f=o(8),p=o(1815),v=o(584),m=o(1827),h=o(1811),g=o(15),Z=o(2),y=o(461),_=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),b=(0,p.vU)({cancel_reblog:{id:"status.cancel_reblog_private",defaultMessage:"Un-repost"},reblog:{id:"status.reblog",defaultMessage:"Repost"}}),w=(0,v.ZP)(i=(0,h.EN)((r=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,s.Z)(t,"handleReblog",(function(){t.props.onReblog(t.props.status),t.props.onClose()})),(0,s.Z)(t,"handleAccountClick",(function(e){0!==e.button||e.ctrlKey||e.metaKey||(e.preventDefault(),t.props.onClose(),t.props.history.push("/@".concat(t.props.status.getIn(["account","acct"]))))})),(0,s.Z)(t,"handleStatusClick",(function(e){0!==e.button||e.ctrlKey||e.metaKey||(e.preventDefault(),t.props.onClose(),t.props.history.push("/@".concat(t.props.status.getIn(["account","acct"]),"/posts/").concat(t.props.status.get("url"))))})),t}return _(t,e),t.prototype.render=function(){var e=this.props,t=e.status,o=e.intl,n=t.get("reblogged")?b.cancel_reblog:b.reblog;return(0,a.Z)(Z.u_,{title:"Repost?",confirmationAction:this.handleReblog,confirmationText:o.formatMessage(n)},void 0,(0,a.Z)(Z.Kq,{space:4},void 0,(0,a.Z)(y.Z,{status:t,hideActions:!0}),(0,a.Z)(Z.xv,{},void 0,(0,a.Z)(m.Z,{id:"boost_modal.combo",defaultMessage:"You can press {combo} to skip this next time",values:{combo:(0,a.Z)("span",{},void 0,"Shift + ",(0,a.Z)(g.Z,{id:"retweet"}))}}))))},t}(f.ZP),(0,s.Z)(r,"propTypes",{status:u().record.isRequired,onReblog:d().func.isRequired,onClose:d().func.isRequired,intl:d().object.isRequired,history:d().object}),i=r))||i)||i},1067:function(e,t,o){"use strict";o.r(t);var n,i=o(1821),r=o(1810),a=o(1814),s=o(0),c=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.render=function(){var e=this.props,t=e.onClose,o=e.component,n=e.componentProps;return(0,i.Z)("div",{className:"modal-root__modal component-modal"},void 0,s.createElement(o,(0,r.Z)({onClose:t},n)))},t}(s.PureComponent);t.default=d,(0,a.Z)(d,"defaultProps",{componentProps:{}})},1062:function(e,t,o){"use strict";o.r(t);var n,i=o(1821),r=o(1814),a=(o(1),o(5)),s=o.n(a),c=o(10),d=o.n(c),l=o(8),u=o(1815),f=o(1827),p=o(584),v=o(3),m=o(20),h=o(1828),g=o(2),Z=o(807),y=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),_=(0,u.vU)({close:{id:"lightbox.close",defaultMessage:"Close"},confirm:{id:"confirmations.delete.confirm",defaultMessage:"Delete"}}),b=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,r.Z)(t,"onClickClose",(function(){var e=t.props,n=e.composeText,r=e.dispatch,a=e.onClose,s=e.intl;n?r((0,h.h7)("CONFIRM",{icon:o(58),heading:(0,i.Z)(f.Z,{id:"confirmations.delete.heading",defaultMessage:"Delete post"}),message:(0,i.Z)(f.Z,{id:"confirmations.delete.message",defaultMessage:"Are you sure you want to delete this post?"}),confirm:s.formatMessage(_.confirm),onConfirm:function(){r((0,h.Mr)("COMPOSE")),r((0,m.qY)())}})):a("COMPOSE")})),(0,r.Z)(t,"renderTitle",(function(){var e=t.props,o=e.statusId,n=e.privacy,r=e.inReplyTo,a=e.quote;return o?(0,i.Z)(f.Z,{id:"navigation_bar.compose_edit",defaultMessage:"Edit post"}):"direct"===n?(0,i.Z)(f.Z,{id:"navigation_bar.compose_direct",defaultMessage:"Direct message"}):r?(0,i.Z)(f.Z,{id:"navigation_bar.compose_reply",defaultMessage:"Reply to post"}):a?(0,i.Z)(f.Z,{id:"navigation_bar.compose_quote",defaultMessage:"Quote post"}):(0,i.Z)(f.Z,{id:"navigation_bar.compose",defaultMessage:"Compose new post"})})),t}return y(t,e),t.prototype.render=function(){return(0,i.Z)(g.u_,{title:this.renderTitle(),onClose:this.onClickClose},void 0,(0,i.Z)(Z.Z,{}))},t}(l.ZP);(0,r.Z)(b,"propTypes",{account:d().record,intl:s().object.isRequired,onClose:s().func.isRequired,composeText:s().string,privacy:s().string,inReplyTo:s().string,quote:s().string,dispatch:s().func.isRequired}),t.default=(0,p.ZP)((0,v.$j)((function(e){var t=e.get("me");return{statusId:e.getIn(["compose","id"]),account:e.getIn(["accounts",t]),composeText:e.getIn(["compose","text"]),privacy:e.getIn(["compose","privacy"]),inReplyTo:e.getIn(["compose","in_reply_to"]),quote:e.getIn(["compose","quote"])}}))(b))},1057:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return p}});var n,i,r=o(1821),a=o(1814),s=(o(1),o(0)),c=o(584),d=o(1827),l=o(158),u=o(2),f=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),p=(0,c.ZP)(i=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,a.Z)(t,"state",{checked:!1}),(0,a.Z)(t,"handleClick",(function(){t.props.onClose("CONFIRM"),t.props.onConfirm()})),(0,a.Z)(t,"handleSecondary",(function(){t.props.onClose("CONFIRM"),t.props.onSecondary()})),(0,a.Z)(t,"handleCancel",(function(){var e=t.props,o=e.onClose,n=e.onCancel;o("CONFIRM"),n&&n()})),(0,a.Z)(t,"handleCheckboxChange",(function(e){t.setState({checked:e.target.checked})})),t}return f(t,e),t.prototype.render=function(){var e=this.props,t=e.heading,o=e.message,n=e.confirm,i=e.secondary,a=e.checkbox,s=this.state.checked;return(0,r.Z)(u.u_,{title:t,confirmationAction:this.handleClick,confirmationText:n,confirmationDisabled:a&&!s,confirmationTheme:"danger",cancelText:(0,r.Z)(d.Z,{id:"confirmation_modal.cancel",defaultMessage:"Cancel"}),cancelAction:this.handleCancel,secondaryText:i,secondaryAction:this.props.onSecondary&&this.handleSecondary},void 0,(0,r.Z)("p",{className:"text-gray-600 dark:text-gray-300"},void 0,o),(0,r.Z)("div",{className:"mt-2"},void 0,a&&(0,r.Z)("div",{className:"confirmation-modal__checkbox"},void 0,(0,r.Z)(l.NA,{},void 0,(0,r.Z)(l.H_,{},void 0,(0,r.Z)(l.XZ,{onChange:this.handleCheckboxChange,label:a,checked:s}))))))},t}(s.PureComponent))||i},1097:function(e,t,o){"use strict";o.r(t);var n=o(1821),i=o(1827),r=o(2),a=o(4);t.default=function(){var e=(0,a.Dn)().singleUserMode,t=(0,a.CG)((function(e){return e.instance.title}));return(0,a.CG)((function(e){return e.me}))||e?null:(0,n.Z)("div",{"data-testid":"cta-banner",className:"hidden lg:block fixed bottom-0 left-0 right-0 py-4 backdrop-blur bg-primary-900/80 z-50"},void 0,(0,n.Z)("div",{className:"max-w-3xl md:max-w-7xl mx-auto lg:grid lg:grid-cols-12"},void 0,(0,n.Z)("div",{className:"col-span-9 col-start-4 xl:col-start-4 xl:col-span-6 md:px-8"},void 0,(0,n.Z)(r.Ug,{alignItems:"center",justifyContent:"between"},void 0,(0,n.Z)(r.Kq,{},void 0,(0,n.Z)(r.xv,{theme:"white",size:"xl",weight:"bold"},void 0,(0,n.Z)(i.Z,{id:"signup_panel.title",defaultMessage:"New to {site_title}?",values:{site_title:t}})),(0,n.Z)(r.xv,{theme:"white",weight:"medium",className:"opacity-90"},void 0,(0,n.Z)(i.Z,{id:"signup_panel.subtitle",defaultMessage:"Sign up now to discuss."}))),(0,n.Z)(r.Ug,{space:2,alignItems:"center"},void 0,(0,n.Z)(r.zx,{theme:"secondary",to:"/login"},void 0,(0,n.Z)(i.Z,{id:"account.login",defaultMessage:"Log in"})),(0,n.Z)(r.zx,{theme:"accent",to:"/signup"},void 0,(0,n.Z)(i.Z,{id:"account.register",defaultMessage:"Sign up"})))))))}},1065:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return m}});var n=o(1821),i=(o(1),o(602)),r=o(0),a=o(1815),s=o(583),c=o(241),d=o(37);var l=o(17),u=o(158),f=o(4),p=(0,o(11).Go)(),v=(0,a.vU)({reject:{id:"edit_federation.reject",defaultMessage:"Reject all activities"},mediaRemoval:{id:"edit_federation.media_removal",defaultMessage:"Strip media"},forceNsfw:{id:"edit_federation.force_nsfw",defaultMessage:"Force attachments to be marked sensitive"},unlisted:{id:"edit_federation.unlisted",defaultMessage:"Force posts unlisted"},followersOnly:{id:"edit_federation.followers_only",defaultMessage:"Hide posts except to followers"},save:{id:"edit_federation.save",defaultMessage:"Save"},success:{id:"edit_federation.success",defaultMessage:"{host} federation was updated"}}),m=function(e){var t=e.host,o=e.onClose,a=(0,s.Z)(),m=(0,f.TL)(),h=(0,f.CG)((function(e){return p(e,t)})),g=(0,r.useState)((0,i.Map)()),Z=g[0],y=g[1];(0,r.useEffect)((function(){y(h.get("federation"))}),[h]);var _=function(e){return function(t){var o=t.target;y(Z.set(e,o.checked))}},b=Z.toJS(),w=b.avatar_removal,C=b.banner_removal,M=b.federated_timeline_removal,k=b.followers_only,x=b.media_nsfw,N=b.media_removal,E=b.reject,O=w&&C&&N;return(0,n.Z)("div",{className:"modal-root__modal edit-federation-modal"},void 0,(0,n.Z)("div",{},void 0,(0,n.Z)("div",{className:"edit-federation-modal__title"},void 0,t),(0,n.Z)(u.NA,{onSubmit:function(){m(function(e,t){return function(o,n){return o((0,d.Q2)()).then((function(){var r=n().getIn(["admin","configs"]),a=function(e,t,o){return e.map((function(e,n){return o.get(n)?(0,i.Set)(e).add(t):(0,i.Set)(e).delete(t)}))}(c.Z.toSimplePolicy(r),e,t),s=c.Z.fromSimplePolicy(a);o((0,d.rF)(s))}))}}(t,Z)).then((function(){return m(l.ZP.success(a.formatMessage(v.success,{host:t})))})).catch((function(){})),o()}},void 0,(0,n.Z)(u.XZ,{label:a.formatMessage(v.reject),checked:E,onChange:_("reject")}),(0,n.Z)(u.XZ,{label:a.formatMessage(v.mediaRemoval),disabled:E,checked:O,onChange:function(e){var t=e.target.checked,o=Z.merge({avatar_removal:t,banner_removal:t,media_removal:t});y(o)}}),(0,n.Z)(u.XZ,{label:a.formatMessage(v.forceNsfw),disabled:E||N,checked:x,onChange:_("media_nsfw")}),(0,n.Z)(u.XZ,{label:a.formatMessage(v.followersOnly),disabled:E,checked:k,onChange:_("followers_only")}),(0,n.Z)(u.XZ,{label:a.formatMessage(v.unlisted),disabled:E||k,checked:M,onChange:_("federated_timeline_removal")}),(0,n.Z)("button",{type:"submit",className:"edit-federation-modal__submit"},void 0,a.formatMessage(v.save)))))}},1069:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return m}});var n,i,r=o(1821),a=o(1814),s=(o(1),o(0)),c=o(1827),d=o(3),l=o(67),u=o(21),f=o(2),p=o(23),v=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),m=(0,d.$j)((function(e,t){return{accountIds:e.getIn(["user_lists","favourited_by",t.statusId])}}))(i=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,a.Z)(t,"fetchData",(function(){var e=t.props,o=e.dispatch,n=e.statusId;o((0,l.eA)(n))})),(0,a.Z)(t,"onClickClose",(function(){t.props.onClose("FAVOURITES")})),t}return v(t,e),t.prototype.componentDidMount=function(){this.fetchData()},t.prototype.render=function(){var e,t=this.props.accountIds;if(t){var o=(0,r.Z)(c.Z,{id:"empty_column.favourites",defaultMessage:"No one has liked this post yet. When someone does, they will show up here."});e=(0,r.Z)(u.Z,{scrollKey:"favourites",emptyMessage:o,itemClassName:"pb-3"},void 0,t.map((function(e){return(0,r.Z)(p.Z,{id:e},e)})))}else e=(0,r.Z)(f.$j,{});return(0,r.Z)(f.u_,{title:(0,r.Z)(c.Z,{id:"column.favourites",defaultMessage:"likes"}),onClose:this.onClickClose},void 0,e)},t}(s.PureComponent))||i},1060:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return y}});var n,i,r,a=o(1821),s=o(1814),c=(o(1),o(6)),d=o.n(c),l=o(0),u=o(10),f=o.n(u),p=o(8),v=o(3),m=o(20),h=o(179),g=o(1283),Z=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),y=(0,v.$j)((function(e,t){var o=t.id;return{media:e.getIn(["compose","media_attachments"]).find((function(e){return e.get("id")===o}))}}),(function(e,t){var o=t.id;return{onSave:function(t,n){e((0,m.b2)(o,{focus:"".concat(t.toFixed(2),",").concat(n.toFixed(2))}))}}}))((r=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,s.Z)(t,"state",{x:0,y:0,focusX:0,focusY:0,dragging:!1}),(0,s.Z)(t,"handleMouseDown",(function(e){document.addEventListener("mousemove",t.handleMouseMove),document.addEventListener("mouseup",t.handleMouseUp),t.updatePosition(e),t.setState({dragging:!0})})),(0,s.Z)(t,"handleMouseMove",(function(e){t.updatePosition(e)})),(0,s.Z)(t,"handleMouseUp",(function(){document.removeEventListener("mousemove",t.handleMouseMove),document.removeEventListener("mouseup",t.handleMouseUp),t.setState({dragging:!1}),t.props.onSave(t.state.focusX,t.state.focusY)})),(0,s.Z)(t,"updatePosition",(function(e){var o=(0,h.getPointerPosition)(t.node,e),n=o.x,i=o.y,r=2*(n-.5),a=-2*(i-.5);t.setState({x:n,y:i,focusX:r,focusY:a})})),(0,s.Z)(t,"updatePositionFromMedia",(function(e){var o=e.getIn(["meta","focus","x"]),n=e.getIn(["meta","focus","y"]);if(o&&n){var i=o/2+.5,r=n/-2+.5;t.setState({x:i,y:r,focusX:o,focusY:n})}else t.setState({x:.5,y:.5,focusX:0,focusY:0})})),(0,s.Z)(t,"setRef",(function(e){t.node=e})),t}return Z(t,e),t.prototype.componentDidMount=function(){this.updatePositionFromMedia(this.props.media)},t.prototype.componentDidUpdate=function(e){var t=this.props.media;e.media.get("id")!==t.get("id")&&this.updatePositionFromMedia(t)},t.prototype.componentWillUnmount=function(){document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp)},t.prototype.render=function(){var e=this.props.media,t=this.state,o=t.x,n=t.y,i=t.dragging,r=e.getIn(["meta","original","width"])||null,s=e.getIn(["meta","original","height"])||null;return(0,a.Z)("div",{className:"modal-root__modal video-modal focal-point-modal"},void 0,l.createElement("div",{className:d()("focal-point",{dragging:i}),ref:this.setRef},(0,a.Z)(g.Z,{previewSrc:e.get("preview_url"),src:e.get("url"),width:r,height:s}),(0,a.Z)("div",{className:"focal-point__reticle",style:{top:"".concat(100*n,"%"),left:"".concat(100*o,"%")}}),(0,a.Z)("div",{className:"focal-point__overlay",onMouseDown:this.handleMouseDown})))},t}(p.ZP),(0,s.Z)(r,"propTypes",{media:f().map.isRequired}),i=r))||i},1098:function(e,t,o){"use strict";o.r(t);var n=o(1821),i=o(0),r=o(1827),a=o(413),s=o(2),c=o(4),d=function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"usd",notation:"compact"}).format(e/100)};t.default=function(){var e=(0,c.TL)(),t=(0,c.CG)((function(e){return e.patron.instance}));if((0,i.useEffect)((function(){e((0,a.vT)())}),[]),t.funding.isEmpty()||t.goals.isEmpty())return null;var o,l=t.getIn(["funding","amount"]),u=t.getIn(["goals","0","amount"]),f=t.getIn(["goals","0","text"]);o=l>=u?i.createElement(i.Fragment,null,(0,n.Z)("strong",{},void 0,d(u))," per month",(0,n.Z)("span",{className:"funding-panel__reached"},void 0,"— reached!")):i.createElement(i.Fragment,null,(0,n.Z)("strong",{},void 0,d(l)," out of ",d(u))," per month");var p=function(){var e;e=t.url,Object.assign(document.createElement("a"),{target:"_blank",href:e}).click()};return(0,n.Z)(s.$L,{title:(0,n.Z)(r.Z,{id:"patron.title",defaultMessage:"Funding Goal"}),onActionClick:p},void 0,(0,n.Z)("div",{className:"funding-panel__ratio"},void 0,(0,n.Z)(s.xv,{},void 0,o)),(0,n.Z)(s.ko,{progress:l/u}),(0,n.Z)("div",{className:"funding-panel__description"},void 0,(0,n.Z)(s.xv,{},void 0,f)),(0,n.Z)("div",{},void 0,(0,n.Z)(s.zx,{theme:"ghost",onClick:p},void 0,(0,n.Z)(r.Z,{id:"patron.donate",defaultMessage:"Donate"}))))}},1061:function(e,t,o){"use strict";o.r(t);var n=o(1821),i=o(1827),r=o(2),a=o(4),s=o(14);t.default=function(e){var t=e.onClose,o=(0,a.CG)((function(e){return(0,s.N$)(e.instance)}));return(0,n.Z)(r.u_,{title:(0,n.Z)(i.Z,{id:"keyboard_shortcuts.heading",defaultMessage:"Keyboard shortcuts"}),onClose:t},void 0,(0,n.Z)("div",{className:"compose-modal__content"},void 0,(0,n.Z)("table",{},void 0,(0,n.Z)("thead",{},void 0,(0,n.Z)("tr",{},void 0,(0,n.Z)("th",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.hotkey",defaultMessage:"Hotkey"})))),(0,n.Z)("tbody",{},void 0,(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"r")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.reply",defaultMessage:"to reply"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"m")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.mention",defaultMessage:"to mention author"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"p")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.profile",defaultMessage:"to open author's profile"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"f")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.favourite",defaultMessage:"to like"}))),o.emojiReacts&&(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"e")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.react",defaultMessage:"to react"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"b")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.boost",defaultMessage:"to repost"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"enter"),", ",(0,n.Z)("kbd",{},void 0,"o")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.enter",defaultMessage:"to open post"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"a")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.open_media",defaultMessage:"to open media"}))))),(0,n.Z)("table",{},void 0,(0,n.Z)("thead",{},void 0,(0,n.Z)("tr",{},void 0,(0,n.Z)("th",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.hotkey",defaultMessage:"Hotkey"})))),(0,n.Z)("tbody",{},void 0,o.spoilers&&(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"x")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.toggle_hidden",defaultMessage:"to show/hide text behind CW"}))),o.spoilers&&(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"h")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.toggle_sensitivity",defaultMessage:"to show/hide media"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"up"),", ",(0,n.Z)("kbd",{},void 0,"k")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.up",defaultMessage:"to move up in the list"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"down"),", ",(0,n.Z)("kbd",{},void 0,"j")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.down",defaultMessage:"to move down in the list"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"n")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.compose",defaultMessage:"to focus the compose textarea"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"alt")," + ",(0,n.Z)("kbd",{},void 0,"n")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.toot",defaultMessage:"to start a new post"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"backspace")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.back",defaultMessage:"to navigate back"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"s")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.search",defaultMessage:"to focus search"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"esc")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.unfocus",defaultMessage:"to un-focus compose textarea/search"}))))),(0,n.Z)("table",{},void 0,(0,n.Z)("thead",{},void 0,(0,n.Z)("tr",{},void 0,(0,n.Z)("th",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.hotkey",defaultMessage:"Hotkey"})))),(0,n.Z)("tbody",{},void 0,(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"g")," + ",(0,n.Z)("kbd",{},void 0,"h")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.home",defaultMessage:"to open home timeline"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"g")," + ",(0,n.Z)("kbd",{},void 0,"n")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.notifications",defaultMessage:"to open notifications column"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"g")," + ",(0,n.Z)("kbd",{},void 0,"f")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.favourites",defaultMessage:"to open likes list"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"g")," + ",(0,n.Z)("kbd",{},void 0,"p")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.pinned",defaultMessage:"to open pinned posts list"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"g")," + ",(0,n.Z)("kbd",{},void 0,"u")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.my_profile",defaultMessage:"to open your profile"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"g")," + ",(0,n.Z)("kbd",{},void 0,"b")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.blocked",defaultMessage:"to open blocked users list"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"g")," + ",(0,n.Z)("kbd",{},void 0,"m")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.muted",defaultMessage:"to open muted users list"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"g")," + ",(0,n.Z)("kbd",{},void 0,"r")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.requests",defaultMessage:"to open follow requests list"}))),(0,n.Z)("tr",{},void 0,(0,n.Z)("td",{},void 0,(0,n.Z)("kbd",{},void 0,"?")),(0,n.Z)("td",{},void 0,(0,n.Z)(i.Z,{id:"keyboard_shortcuts.legend",defaultMessage:"to display this legend"})))))))}},1283:function(e,t,o){"use strict";o.d(t,{Z:function(){return g}});var n,i=o(1821),r=o(1814),a=(o(1),o(6)),s=o.n(a),c=o(0),d=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),l=function(e,t){return{x:(e.clientX+t.clientX)/2,y:(e.clientY+t.clientY)/2}},u=function(e,t){return Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2))},f=function(e,t,o){return Math.min(t,Math.max(e,o))},p=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,r.Z)(t,"state",{scale:1}),(0,r.Z)(t,"removers",[]),(0,r.Z)(t,"container",null),(0,r.Z)(t,"image",null),(0,r.Z)(t,"lastTouchEndTime",0),(0,r.Z)(t,"lastDistance",0),(0,r.Z)(t,"handleTouchStart",(function(e){2===e.touches.length&&(t.lastDistance=u.apply(void 0,e.touches))})),(0,r.Z)(t,"handleTouchMove",(function(e){var o=t.container,n=o.scrollTop,i=o.scrollHeight,r=o.clientHeight;if(1!==e.touches.length||n===i-r){if(2===e.touches.length){e.preventDefault(),e.stopPropagation();var a=u.apply(void 0,e.touches),s=l.apply(void 0,e.touches),c=f(1,4,t.state.scale*a/t.lastDistance);t.zoom(c,s),t.lastMidpoint=s,t.lastDistance=a}}else e.stopPropagation()})),(0,r.Z)(t,"handleClick",(function(e){e.stopPropagation();var o=t.props.onClick;o&&o()})),(0,r.Z)(t,"setContainerRef",(function(e){t.container=e})),(0,r.Z)(t,"setImageRef",(function(e){t.image=e})),t}return d(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.handleTouchStart;this.container.addEventListener("touchstart",t),this.removers.push((function(){return e.container.removeEventListener("touchstart",t)})),t=this.handleTouchMove,this.container.addEventListener("touchmove",t,{passive:!1}),this.removers.push((function(){return e.container.removeEventListener("touchend",t)}))},t.prototype.componentWillUnmount=function(){this.removeEventListeners()},t.prototype.removeEventListeners=function(){this.removers.forEach((function(e){return e()})),this.removers=[]},t.prototype.zoom=function(e,t){var o=this,n=this.state.scale,i=this.container,r=i.scrollLeft,a=i.scrollTop,s=(r+t.x)*e/n-t.x,c=(a+t.y)*e/n-t.y;this.setState({scale:e},(function(){o.container.scrollLeft=s,o.container.scrollTop=c}))},t.prototype.render=function(){var e=this.props,t=e.alt,o=e.src,n=this.state.scale,i=1===n?"hidden":"scroll";return c.createElement("div",{className:"zoomable-image",ref:this.setContainerRef,style:{overflow:i}},c.createElement("img",{role:"presentation",ref:this.setImageRef,alt:t,title:t,src:o,style:{transform:"scale(".concat(n,")"),transformOrigin:"0 0"},onClick:this.handleClick}))},t}(c.PureComponent),v=p;(0,r.Z)(p,"defaultProps",{alt:"",width:null,height:null});var m=function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},e(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),h=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,r.Z)(t,"state",{loading:!0,error:!1,width:null}),(0,r.Z)(t,"removers",[]),(0,r.Z)(t,"canvas",null),(0,r.Z)(t,"loadPreviewCanvas",(function(e){var o=e.previewSrc,n=e.width,i=e.height;return new Promise((function(e,r){var a=new Image,s=function(){a.removeEventListener("error",c),a.removeEventListener("load",d)},c=function(){s(),r()},d=function(){s(),t.canvasContext.drawImage(a,0,0,n,i),e()};a.addEventListener("error",c),a.addEventListener("load",d),a.src=o,t.removers.push(s)}))})),(0,r.Z)(t,"loadOriginalImage",(function(e){var o=e.src;return new Promise((function(e,n){var i=new Image,r=function(){i.removeEventListener("error",a),i.removeEventListener("load",s)},a=function(){r(),n()},s=function(){r(),e()};i.addEventListener("error",a),i.addEventListener("load",s),i.src=o,t.removers.push(r)}))})),(0,r.Z)(t,"setCanvasRef",(function(e){t.canvas=e,e&&t.setState({width:e.offsetWidth})})),t}return m(t,e),Object.defineProperty(t.prototype,"canvasContext",{get:function(){return this.canvas?(this._canvasContext=this._canvasContext||this.canvas.getContext("2d"),this._canvasContext):null},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.loadImage(this.props)},t.prototype.componentDidUpdate=function(e){e.src!==this.props.src&&this.loadImage(this.props)},t.prototype.componentWillUnmount=function(){this.removeEventListeners()},t.prototype.loadImage=function(e){var t=this;this.removeEventListeners(),this.setState({loading:!0,error:!1}),Promise.all([e.previewSrc&&this.loadPreviewCanvas(e),this.hasSize()&&this.loadOriginalImage(e)].filter(Boolean)).then((function(){t.setState({loading:!1,error:!1}),t.clearPreviewCanvas()})).catch((function(){return t.setState({loading:!1,error:!0})}))},t.prototype.clearPreviewCanvas=function(){var e=this.canvas,t=e.width,o=e.height;this.canvasContext.clearRect(0,0,t,o)},t.prototype.removeEventListeners=function(){this.removers.forEach((function(e){return e()})),this.removers=[]},t.prototype.hasSize=function(){var e=this.props,t=e.width,o=e.height;return"number"==typeof t&&"number"==typeof o},t.prototype.render=function(){var e=this.props,t=e.alt,o=e.src,n=e.width,r=e.height,a=e.onClick,d=this.state.loading,l=s()("image-loader",{"image-loader--loading":d,"image-loader--amorphous":!this.hasSize()});return(0,i.Z)("div",{className:l},void 0,d?c.createElement("canvas",{className:"image-loader__preview-canvas",ref:this.setCanvasRef,width:n,height:r}):(0,i.Z)(v,{alt:t,src:o,onClick:a}))},t}(c.PureComponent),g=h;(0,r.Z)(h,"defaultProps",{alt:"",width:null,height:null})},1054:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return T}});var n,i,r,a=o(1821),s=o(1814),c=(o(1),o(6)),d=o.n(c),l=o(5),u=o.n(l),f=o(10),p=o.n(f),v=o(8),m=o(1815),h=o(584),g=o(1827),Z=o(1811),y=o(712),_=o(1810),b=o(0),w=o(57),C=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),M=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,s.Z)(t,"handleLoadedData",(function(){t.props.time&&(t.video.currentTime=t.props.time)})),(0,s.Z)(t,"setRef",(function(e){t.video=e})),(0,s.Z)(t,"handleClick",(function(e){e.stopPropagation();var o=t.props.onClick;o&&o()})),t}return C(t,e),t.prototype.componentDidMount=function(){this.video.addEventListener("loadeddata",this.handleLoadedData)},t.prototype.componentWillUnmount=function(){this.video.removeEventListener("loadeddata",this.handleLoadedData)},t.prototype.render=function(){var e=this.props,t=e.src,o=e.muted,n=e.controls,i=e.alt,r={};return(0,w.gn)()&&(r.playsInline="1"),(0,a.Z)("div",{className:"extended-video-player"},void 0,b.createElement("video",(0,_.Z)({ref:this.setRef,src:t,autoPlay:!0,role:"button",tabIndex:"0","aria-label":i,title:i,muted:o,controls:n,loop:!n,onClick:this.handleClick},r)))},t}(b.PureComponent),k=M,x=o(15),N=o(34),E=o(750),O=o(179),I=o(1283),S=function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},e(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),P=(0,m.vU)({close:{id:"lightbox.close",defaultMessage:"Close"},previous:{id:"lightbox.previous",defaultMessage:"Previous"},next:{id:"lightbox.next",defaultMessage:"Next"}}),T=(0,h.ZP)(i=(0,Z.EN)((r=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,s.Z)(t,"state",{index:null,navigationHidden:!1}),(0,s.Z)(t,"handleSwipe",(function(e){t.setState({index:e%t.props.media.size})})),(0,s.Z)(t,"handleNextClick",(function(){t.setState({index:(t.getIndex()+1)%t.props.media.size})})),(0,s.Z)(t,"handlePrevClick",(function(){t.setState({index:(t.props.media.size+t.getIndex()-1)%t.props.media.size})})),(0,s.Z)(t,"handleChangeIndex",(function(e){var o=Number(e.currentTarget.getAttribute("data-index"));t.setState({index:o%t.props.media.size})})),(0,s.Z)(t,"handleKeyDown",(function(e){switch(e.key){case"ArrowLeft":t.handlePrevClick(),e.preventDefault(),e.stopPropagation();break;case"ArrowRight":t.handleNextClick(),e.preventDefault(),e.stopPropagation()}})),(0,s.Z)(t,"toggleNavigation",(function(){t.setState((function(e){return{navigationHidden:!e.navigationHidden}}))})),(0,s.Z)(t,"handleStatusClick",(function(e){if(0===e.button&&!e.ctrlKey&&!e.metaKey){e.preventDefault();var o=t.props,n=o.status,i=o.account.get("acct"),r=n.get("id");t.props.history.push("/@".concat(i,"/posts/").concat(r)),t.props.onClose(null,!0)}})),(0,s.Z)(t,"handleCloserClick",(function(e){var o=e.target,n=document.querySelector('.media-modal .react-swipeable-view-container > div[aria-hidden="false"]'),i=o===n||!n.contains(o),r=["zoomable-image"].some((function(e){return o.classList.contains(e)}));(i||r)&&t.props.onClose()})),t}return S(t,e),t.prototype.componentDidMount=function(){window.addEventListener("keydown",this.handleKeyDown,!1)},t.prototype.componentWillUnmount=function(){window.removeEventListener("keydown",this.handleKeyDown)},t.prototype.getIndex=function(){return null!==this.state.index?this.state.index:this.props.index},t.prototype.render=function(){var e=this,t=this.props,n=t.media,i=t.status,r=t.account,s=t.intl,c=t.onClose,l=this.state.navigationHidden,u=this.getIndex(),f=[],p=n.size>1&&(0,a.Z)("button",{tabIndex:"0",className:"media-modal__nav media-modal__nav--left",onClick:this.handlePrevClick,"aria-label":s.formatMessage(P.previous)},void 0,(0,a.Z)(x.Z,{src:o(455)})),v=n.size>1&&(0,a.Z)("button",{tabIndex:"0",className:"media-modal__nav  media-modal__nav--right",onClick:this.handleNextClick,"aria-label":s.formatMessage(P.next)},void 0,(0,a.Z)(x.Z,{src:o(456)}));n.size>1&&(f=n.map((function(t,o){var n=["media-modal__button"];return o===u&&n.push("media-modal__button--active"),(0,a.Z)("li",{className:"media-modal__page-dot"},o,(0,a.Z)("button",{tabIndex:"0",className:n.join(" "),onClick:e.handleChangeIndex,"data-index":o},void 0,o+1))})));var m=n.map((function(e){return"image"!==e.get("type")})).toArray(),h=n.map((function(t){var o=t.getIn(["meta","original","width"])||null,n=t.getIn(["meta","original","height"])||null,s=i&&r&&(0,a.Z)("a",{href:i.get("url"),onClick:e.handleStatusClick},void 0,(0,a.Z)(g.Z,{id:"lightbox.view_context",defaultMessage:"View context"}));if("image"===t.get("type"))return(0,a.Z)(I.Z,{previewSrc:t.get("preview_url"),src:t.get("url"),width:o,height:n,alt:t.get("description"),onClick:e.toggleNavigation},t.get("url"));if("video"===t.get("type")){var d=e.props.time;return(0,a.Z)(O.default,{preview:t.get("preview_url"),blurhash:t.get("blurhash"),src:t.get("url"),width:t.get("width"),height:t.get("height"),startTime:d||0,onCloseVideo:c,detailed:!0,link:s,alt:t.get("description")},t.get("url"))}return"audio"===t.get("type")?(0,a.Z)(E.default,{src:t.get("url"),alt:t.get("description"),poster:t.get("preview_url")!==t.get("url")?t.get("preview_url"):i&&i.getIn(["account","avatar_static"]),backgroundColor:t.getIn(["meta","colors","background"]),foregroundColor:t.getIn(["meta","colors","foreground"]),accentColor:t.getIn(["meta","colors","accent"]),duration:t.getIn(["meta","original","duration"],0)},t.get("url")):"gifv"===t.get("type")?(0,a.Z)(k,{src:t.get("url"),muted:!0,controls:!1,width:o,link:s,height:n,alt:t.get("description"),onClick:e.toggleNavigation},t.get("preview_url")):null})).toArray(),Z=d()("media-modal__navigation",{"media-modal__navigation--hidden":l});return(0,a.Z)("div",{className:"modal-root__modal media-modal"},void 0,(0,a.Z)("div",{className:"media-modal__closer",role:"presentation",onClick:this.handleCloserClick},void 0,(0,a.Z)(y.ZP,{style:{width:"100%",height:"100%"},containerStyle:{alignItems:"center"},onChangeIndex:this.handleSwipe,onSwitching:this.handleSwitching,index:u},void 0,h)),(0,a.Z)("div",{className:Z},void 0,(0,a.Z)(N.Z,{className:"media-modal__close",title:s.formatMessage(P.close),src:o(26),onClick:c}),p,v,i&&!m[u]&&(0,a.Z)("div",{className:d()("media-modal__meta",{"media-modal__meta--shifted":n.size>1})},void 0,(0,a.Z)("a",{href:i.get("url"),onClick:this.handleStatusClick},void 0,(0,a.Z)(g.Z,{id:"lightbox.view_context",defaultMessage:"View context"}))),(0,a.Z)("ul",{className:"media-modal__pagination"},void 0,f)))},t}(v.ZP),(0,s.Z)(r,"propTypes",{media:p().list.isRequired,status:p().record,account:p().record,index:u().number.isRequired,onClose:u().func.isRequired,intl:u().object.isRequired,history:u().object}),i=r))||i)||i},1071:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return Z}});var n,i,r=o(1821),a=o(1814),s=(o(1),o(602)),c=o(0),d=o(584),l=o(1827),u=o(3),f=o(50),p=o(21),v=o(2),m=o(23),h=o(11),g=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),Z=(0,u.$j)((function(e,t){var o=(0,h.TE)()(e,{id:t.statusId,username:t.username});return{accountIds:o?(0,s.OrderedSet)(o.get("mentions").map((function(e){return e.get("id")}))):null}}))(i=(0,d.ZP)(i=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,a.Z)(t,"fetchData",(function(){var e=t.props,o=e.dispatch,n=e.statusId;o((0,f.wE)(n))})),(0,a.Z)(t,"onClickClose",(function(){t.props.onClose("MENTIONS")})),t}return g(t,e),t.prototype.componentDidMount=function(){this.fetchData()},t.prototype.render=function(){var e,t=this.props.accountIds;return e=t?(0,r.Z)(p.Z,{scrollKey:"mentions",itemClassName:"pb-3"},void 0,t.map((function(e){return(0,r.Z)(m.Z,{id:e,withNote:!1},e)}))):(0,r.Z)(v.$j,{}),(0,r.Z)(v.u_,{title:(0,r.Z)(l.Z,{id:"column.mentions",defaultMessage:"Mentions"}),onClose:this.onClickClose},void 0,e)},t}(c.PureComponent))||i)||i},1058:function(e,t,o){"use strict";o.r(t);var n=o(1821),i=o(1815),r=o(1827),a=o(584),s=o(2),c=(0,i.vU)({modalTitle:{id:"missing_description_modal.text",defaultMessage:"You have not entered a description for all attachments."},post:{id:"missing_description_modal.continue",defaultMessage:"Post"},cancel:{id:"missing_description_modal.cancel",defaultMessage:"Cancel"}});t.default=(0,a.ZP)((function(e){var t=e.onClose,o=e.onContinue,i=e.intl;return(0,n.Z)(s.u_,{title:i.formatMessage(c.modalTitle),confirmationAction:o,confirmationText:i.formatMessage(c.post),confirmationTheme:"danger",cancelText:i.formatMessage(c.cancel),cancelAction:t},void 0,(0,n.Z)("p",{className:"text-gray-600 dark:text-gray-300"},void 0,(0,n.Z)(r.Z,{id:"missing_description_modal.description",defaultMessage:"Continue anyway?"})))}))},1096:function(e,t,o){"use strict";o.r(t);var n=o(1821),i=o(1827),r=o(2),a=o(4);t.default=function(){var e=(0,a.Dn)().singleUserMode,t=(0,a.CG)((function(e){return e.instance.title}));return(0,a.CG)((function(e){return e.me}))||e?null:(0,n.Z)(r.Kq,{space:2},void 0,(0,n.Z)(r.Kq,{},void 0,(0,n.Z)(r.xv,{size:"lg",weight:"bold"},void 0,(0,n.Z)(i.Z,{id:"signup_panel.title",defaultMessage:"New to {site_title}?",values:{site_title:t}})),(0,n.Z)(r.xv,{theme:"muted",size:"sm"},void 0,(0,n.Z)(i.Z,{id:"signup_panel.subtitle",defaultMessage:"Sign up now to discuss."}))),(0,n.Z)(r.zx,{theme:"primary",block:!0,to:"/signup"},void 0,(0,n.Z)(i.Z,{id:"account.register",defaultMessage:"Sign up"})))}},1070:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return E}});var n,i,r=o(1821),a=o(1823),s=(o(1),o(602)),c=o(0),d=o(1815),l=o(583),u=o(1827),f=o(3),p=o(67),v=o(1814),m=o(22),h=o.n(m),g=o(6),Z=o.n(g),y=o(1811),_=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),b=(0,y.EN)(i=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,v.Z)(t,"state",{mounted:!1}),(0,v.Z)(t,"handleResize",h()((function(){t.setState(t.getActiveTabIndicationSize())}),300,{trailing:!0})),(0,v.Z)(t,"setRef",(function(e){t.node=e})),(0,v.Z)(t,"setFocusRef",(function(e){t.focusedItem=e})),(0,v.Z)(t,"handleKeyDown",(function(e){var o=Array.from(t.node.getElementsByTagName("a")),n=o.indexOf(document.activeElement),i=null;switch(e.key){case"ArrowRight":i=o[n+1]||o[0];break;case"ArrowLeft":i=o[n-1]||o[o.length-1]}i&&(i.focus(),e.preventDefault(),e.stopPropagation())})),(0,v.Z)(t,"handleItemKeyPress",(function(e){"Enter"!==e.key&&" "!==e.key||t.handleClick(e)})),(0,v.Z)(t,"handleClick",(function(e){var o=Number(e.currentTarget.getAttribute("data-index")),n=t.props.items[o],i=n.action,r=n.to;"function"==typeof i?(e.preventDefault(),i(e)):r&&(e.preventDefault(),t.props.history.push(r))})),t}return _(t,e),t.prototype.componentDidMount=function(){this.node.addEventListener("keydown",this.handleKeyDown,!1),window.addEventListener("resize",this.handleResize,{passive:!0});var e=this.getActiveTabIndicationSize(),t=e.left,o=e.width;this.setState({mounted:!0,left:t,width:o})},t.prototype.componentWillUnmount=function(){this.node.removeEventListener("keydown",this.handleKeyDown,!1),document.removeEventListener("resize",this.handleResize,!1)},t.prototype.componentDidUpdate=function(e){this.props.active!==e.active&&this.setState(this.getActiveTabIndicationSize())},t.prototype.getActiveTabIndicationSize=function(){var e=this.props,t=e.active,o=e.items;if(!t||!this.node)return{width:null};var n=o.findIndex((function(e){return e.name===t})),i=Array.from(this.node.getElementsByTagName("a"))[n];return i?{left:i.offsetLeft,width:i.getBoundingClientRect().width}:{width:null}},t.prototype.renderActiveTabIndicator=function(){var e=this.state,t=e.left,o=e.width;return(0,r.Z)("div",{className:"filter-bar__active",style:{left:t,width:o}})},t.prototype.renderItem=function(e,t){if(null===e)return(0,r.Z)("li",{className:"dropdown-menu__separator"},"sep-".concat(t));var o=e.name,n=e.text,i=e.href,a=e.to,s=e.title;return c.createElement("a",{key:o,href:i||a||"#",role:"button",tabIndex:"0",ref:0===t?this.setFocusRef:null,onClick:this.handleClick,onKeyPress:this.handleItemKeyPress,"data-index":t,title:s},n)},t.prototype.render=function(){var e=this,t=this.props,o=t.className,n=t.items,i=this.state.mounted;return c.createElement("div",{className:Z()("filter-bar",o),ref:this.setRef},i&&this.renderActiveTabIndicator(),n.map((function(t,o){return e.renderItem(t,o)})))},t}(c.PureComponent))||i,w=o(21),C=o(2),M=o(23),k=o(4),x=["onClose","statusId"],N=(0,d.vU)({close:{id:"lightbox.close",defaultMessage:"Close"},all:{id:"reactions.all",defaultMessage:"All"}}),E=function(e){var t,o=e.onClose,n=e.statusId,i=(0,a.Z)(e,x),d=(0,f.I0)(),v=(0,l.Z)(),m=(0,c.useState)(i.reaction),h=m[0],g=m[1],Z=(0,k.CG)((function(e){var t=e.user_lists.getIn(["favourited_by",n]),o=e.user_lists.getIn(["reactions",n]);return t&&o&&(0,s.List)(t?[{accounts:t,count:t.size,name:"👍"}]:[]).concat(o||[])}));(0,c.useEffect)((function(){d((0,p.eA)(n)),d((0,p._P)(n))}),[]);var y,_,E=Z&&(h?null===(t=Z.find((function(e){return e.name===h})))||void 0===t?void 0:t.accounts.map((function(e){return{id:e,reaction:h}})):Z.map((function(e){var t=e.accounts,o=e.name;return t.map((function(e){return{id:e,reaction:o}}))})).flat());if(E){var O=(0,r.Z)(u.Z,{id:"status.reactions.empty",defaultMessage:"No one has reacted to this post yet. When someone does, they will show up here."});y=c.createElement(c.Fragment,null,Z.length>0&&(_=[{text:v.formatMessage(N.all),action:function(){return g("")},name:"all"}],Z.forEach((function(e){return _.push({text:"".concat(e.name," ").concat(e.count),action:function(){return g(e.name)},name:e.name})})),(0,r.Z)(b,{className:"reaction__filter-bar",items:_,active:h||"all"})),(0,r.Z)(w.Z,{scrollKey:"reactions",emptyMessage:O,itemClassName:"pb-3"},void 0,E.map((function(e){return(0,r.Z)(M.Z,{id:e.id},"".concat(e.id,"-").concat(e.reaction))}))))}else y=(0,r.Z)(C.$j,{});return(0,r.Z)(C.u_,{title:(0,r.Z)(u.Z,{id:"column.reactions",defaultMessage:"Reactions"}),onClose:function(){o("REACTIONS")}},void 0,y)}},1068:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return Z}});var n,i,r=o(1821),a=o(1814),s=(o(1),o(0)),c=o(584),d=o(1827),l=o(3),u=o(1811),f=o(67),p=o(50),v=o(21),m=o(2),h=o(23),g=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),Z=(0,l.$j)((function(e,t){return{accountIds:e.getIn(["user_lists","reblogged_by",t.statusId])}}))(i=(0,c.ZP)(i=(0,u.EN)(i=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,a.Z)(t,"fetchData",(function(){var e=t.props,o=e.dispatch,n=e.statusId;o((0,f.rQ)(n)),o((0,p.UK)(n))})),(0,a.Z)(t,"onClickClose",(function(){t.props.onClose("REBLOGS")})),t}return g(t,e),t.prototype.componentDidMount=function(){var e=this;this.fetchData(),this.unlistenHistory=this.props.history.listen((function(t,o){"PUSH"===o&&e.onClickClose(null,!0)}))},t.prototype.componentWillUnmount=function(){this.unlistenHistory&&this.unlistenHistory()},t.prototype.render=function(){var e,t=this.props.accountIds;if(t){var o=(0,r.Z)(d.Z,{id:"status.reblogs.empty",defaultMessage:"No one has reposted this post yet. When someone does, they will show up here."});e=(0,r.Z)(v.Z,{scrollKey:"reblogs",emptyMessage:o,itemClassName:"pb-3"},void 0,t.map((function(e){return(0,r.Z)(h.Z,{id:e},e)})))}else e=(0,r.Z)(m.$j,{});return(0,r.Z)(m.u_,{title:(0,r.Z)(d.Z,{id:"column.reblogs",defaultMessage:"Reposts"}),onClose:this.onClickClose},void 0,e)},t}(s.PureComponent))||i)||i)||i},1063:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return N}});var n,i,r,a=o(1821),s=o(1827),c=o(2),d=o(4),l=o(400),u=o(11),f=o(1814),p=o(5),v=o.n(p),m=o(8),h=o(1815),g=o(584),Z=o(3),y=o(16),_=o(20),b=o(40),w=o(66),C=o(34),M=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),k=(0,h.vU)({remove:{id:"reply_mentions.account.remove",defaultMessage:"Remove from mentions"},add:{id:"reply_mentions.account.add",defaultMessage:"Add to mentions"}}),x=(0,Z.$j)((function(){var e=(0,u.Tm)();return function(t,o){var n=o.accountId,i=e(t,n);return{added:!!i&&t.getIn(["compose","to"]).includes(i.get("acct")),account:i}}}),(function(e,t){var o=t.accountId;return{onRemove:function(){return e((0,_.rw)(o))},onAdd:function(){return e((0,_.kR)(o))},fetchAccount:function(){return e((0,y.$G)(o))}}}))(i=(0,g.ZP)((r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.account,o=e.accountId;o&&!t&&this.props.fetchAccount(o)},t.prototype.render=function(){var e,t=this.props,n=t.account,i=t.intl,r=t.onRemove,s=t.onAdd,c=t.added,d=t.author;return n?(e=c?(0,a.Z)(C.Z,{src:o(26),title:i.formatMessage(k.remove),onClick:r}):(0,a.Z)(C.Z,{src:o(48),title:i.formatMessage(k.add),onClick:s}),(0,a.Z)("div",{className:"account"},void 0,(0,a.Z)("div",{className:"account__wrapper"},void 0,(0,a.Z)("div",{className:"account__display-name"},void 0,(0,a.Z)("div",{className:"account__avatar-wrapper"},void 0,(0,a.Z)(b.Z,{account:n,size:36})),(0,a.Z)(w.Z,{account:n})),(0,a.Z)("div",{className:"account__relationship"},void 0,!d&&e)))):null},t}(m.ZP),(0,f.Z)(r,"propTypes",{accountId:v().string.isRequired,intl:v().object.isRequired,onRemove:v().func.isRequired,onAdd:v().func.isRequired,added:v().bool,author:v().bool}),(0,f.Z)(r,"defaultProps",{added:!1}),i=r))||i)||i,N=function(e){var t=e.onClose,o=(0,d.CG)((function(e){return(0,u.TE)()(e,{id:e.compose.get("in_reply_to")})})),n=(0,d.CG)((function(e){return e.accounts.get(e.me)})),i=(0,l.Db)(o,n),r=(null==o?void 0:o.account).id;return(0,a.Z)(c.u_,{title:(0,a.Z)(s.Z,{id:"navigation_bar.in_reply_to",defaultMessage:"In reply to"}),onClose:function(){t("REPLY_MENTIONS")}},void 0,(0,a.Z)("div",{className:"reply-mentions-modal__accounts"},void 0,i.map((function(e){return(0,a.Z)(x,{accountId:e,added:!0,author:r===e},e)}))))}},1064:function(e,t,o){"use strict";o.r(t);var n=o(1821),i=(o(1),o(0)),r=o(1815),a=o(583),s=o(1827),c=o(1811),d=o(67),l=o(17),u=o(2),f=o(4),p=(0,r.vU)({close:{id:"lightbox.close",defaultMessage:"Close"},accountPlaceholder:{id:"remote_interaction.account_placeholder",defaultMessage:"Enter your username@domain you want to act from"},userNotFoundError:{id:"remote_interaction.user_not_found_error",defaultMessage:"Couldn't find given user"}});t.default=function(e){var t,o,r=e.action,v=e.onClose,m=e.account,h=e.ap_id,g=(0,a.Z)(),Z=(0,c.k6)(),y=(0,f.TL)(),_=(0,f.Dn)().singleUserMode,b=(0,f.CG)((function(e){return e.instance.title})),w=(0,f.CG)((function(e){var t;return null===(t=e.accounts.get(m))||void 0===t?void 0:t.display_name})),C=(0,f.hz)(),M=(0,i.useState)(""),k=M[0],x=M[1],N=function(){v("UNAUTHORIZED")},E=function(){Z.push("/login"),N()},O=function(){Z.push("/signup"),N()};return r&&C.remoteInteractionsAPI&&C.federating?("FOLLOW"===r?(t=(0,n.Z)(s.Z,{id:"remote_interaction.follow_title",defaultMessage:"Follow {user} remotely",values:{user:w}}),o=(0,n.Z)(s.Z,{id:"remote_interaction.follow",defaultMessage:"Proceed to follow"})):"REPLY"===r?(t=(0,n.Z)(s.Z,{id:"remote_interaction.reply_title",defaultMessage:"Reply to a post remotely"}),o=(0,n.Z)(s.Z,{id:"remote_interaction.reply",defaultMessage:"Proceed to reply"})):"REBLOG"===r?(t=(0,n.Z)(s.Z,{id:"remote_interaction.reblog_title",defaultMessage:"Reblog a post remotely"}),o=(0,n.Z)(s.Z,{id:"remote_interaction.reblog",defaultMessage:"Proceed to repost"})):"FAVOURITE"===r?(t=(0,n.Z)(s.Z,{id:"remote_interaction.favourite_title",defaultMessage:"Like a post remotely"}),o=(0,n.Z)(s.Z,{id:"remote_interaction.favourite",defaultMessage:"Proceed to like"})):"POLL_VOTE"===r&&(t=(0,n.Z)(s.Z,{id:"remote_interaction.poll_vote_title",defaultMessage:"Vote in a poll remotely"}),o=(0,n.Z)(s.Z,{id:"remote_interaction.poll_vote",defaultMessage:"Proceed to vote"})),(0,n.Z)(u.u_,{title:t,onClose:N,confirmationAction:_?void 0:E,confirmationText:(0,n.Z)(s.Z,{id:"account.login",defaultMessage:"Log in"}),secondaryAction:O,secondaryText:(0,n.Z)(s.Z,{id:"account.register",defaultMessage:"Sign up"})},void 0,(0,n.Z)("div",{className:"remote-interaction-modal__content"},void 0,(0,n.Z)("form",{className:"simple_form remote-interaction-modal__fields",onSubmit:function(e){e.preventDefault(),y((0,d.OF)(h,k)).then((function(e){window.open(e,"_new","noopener,noreferrer"),v("UNAUTHORIZED")})).catch((function(e){"Couldn't find user"===e.message&&y(l.ZP.error(g.formatMessage(p.userNotFoundError)))}))}},void 0,(0,n.Z)("input",{type:"text",placeholder:g.formatMessage(p.accountPlaceholder),name:"remote_follow[acct]",value:k,autoCorrect:"off",autoCapitalize:"off",onChange:function(e){x(e.target.value)},required:!0}),(0,n.Z)(u.zx,{type:"submit",theme:"primary"},void 0,o)),(0,n.Z)("div",{className:"remote-interaction-modal__divider"},void 0,(0,n.Z)(u.xv,{align:"center"},void 0,(0,n.Z)(s.Z,{id:"remote_interaction.divider",defaultMessage:"or"}))),!_&&(0,n.Z)(u.xv,{size:"lg",weight:"medium"},void 0,(0,n.Z)(s.Z,{id:"unauthorized_modal.title",defaultMessage:"Sign up for {site_title}",values:{site_title:b}}))))):(0,n.Z)(u.u_,{title:(0,n.Z)(s.Z,{id:"unauthorized_modal.title",defaultMessage:"Sign up for {site_title}",values:{site_title:b}}),onClose:N,confirmationAction:E,confirmationText:(0,n.Z)(s.Z,{id:"account.login",defaultMessage:"Log in"}),secondaryAction:O,secondaryText:(0,n.Z)(s.Z,{id:"account.register",defaultMessage:"Sign up"})},void 0,(0,n.Z)(u.Kq,{},void 0,(0,n.Z)(u.xv,{},void 0,(0,n.Z)(s.Z,{id:"unauthorized_modal.text",defaultMessage:"You need to be logged in to do that."}))))}},1095:function(e,t,o){"use strict";o.r(t);var n,i=o(1821),r=o(1814),a=o(5),s=o.n(a),c=o(10),d=o.n(c),l=o(8),u=o(1827),f=o(584),p=o(3),v=o(970),m=o(40),h=o(154),g=o(194),Z=o(38),y=o(1820),_=o(64),b=o(2),w=o(11),C=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return C(t,e),t.prototype.render=function(){var e=this.props,t=e.account,o=e.action,n=e.badges,r=e.displayFqn,a=e.intl,s=e.domain;if(!t)return null;var c={__html:t.get("display_name_html")},d=-1===t.get("acct").indexOf("@")&&s?"".concat(t.get("acct"),"@").concat(s):t.get("acct"),l=t.get("header"),f=t.get("verified");return(0,i.Z)("div",{className:"relative"},void 0,(0,i.Z)(b.Kq,{space:2},void 0,(0,i.Z)(b.Kq,{},void 0,(0,i.Z)("div",{className:"-mt-4 -mx-4 h-24 bg-gray-200 relative"},void 0,l&&(0,i.Z)(h.Z,{src:t.get("header"),className:"absolute inset-0 object-cover",alt:""})),(0,i.Z)(b.Ug,{justifyContent:"between"},void 0,(0,i.Z)(v.rU,{to:"/@".concat(t.get("acct")),title:d,className:"-mt-12 block"},void 0,(0,i.Z)(m.Z,{account:t,className:"h-20 w-20 bg-gray-50 ring-2 ring-white"})),o&&(0,i.Z)("div",{className:"mt-2"},void 0,o))),(0,i.Z)(b.Kq,{},void 0,(0,i.Z)(v.rU,{to:"/@".concat(t.get("acct"))},void 0,(0,i.Z)(b.Ug,{space:1,alignItems:"center"},void 0,(0,i.Z)(b.xv,{size:"lg",weight:"bold",dangerouslySetInnerHTML:c}),f&&(0,i.Z)(g.Z,{}),n.length>0&&(0,i.Z)(b.Ug,{space:1,alignItems:"center"},void 0,n))),(0,i.Z)(b.xv,{size:"sm",theme:"muted"},void 0,"@",(0,Z.F7)(t,r))),(0,i.Z)(b.Ug,{alignItems:"center",space:3},void 0,t.get("statuses_count")>=0&&(0,i.Z)(v.rU,{to:"/@".concat(t.get("acct")),title:a.formatNumber(t.get("statuses_count"))},void 0,(0,i.Z)(b.Ug,{alignItems:"center",space:1},void 0,(0,i.Z)(b.xv,{theme:"primary",weight:"bold",size:"sm"},void 0,(0,y.w8)(t.get("statuses_count"))),(0,i.Z)(b.xv,{weight:"bold",size:"sm"},void 0,(0,i.Z)(u.Z,{className:"user-panel-stats-item__label",id:"account.posts",defaultMessage:"Posts"})))),t.get("followers_count")>=0&&(0,i.Z)(v.rU,{to:"/@".concat(t.get("acct"),"/followers"),title:a.formatNumber(t.get("followers_count"))},void 0,(0,i.Z)(b.Ug,{alignItems:"center",space:1},void 0,(0,i.Z)(b.xv,{theme:"primary",weight:"bold",size:"sm"},void 0,(0,y.w8)(t.get("followers_count"))),(0,i.Z)(b.xv,{weight:"bold",size:"sm"},void 0,(0,i.Z)(u.Z,{id:"account.followers",defaultMessage:"Followers"})))),t.get("following_count")>=0&&(0,i.Z)(v.rU,{to:"/@".concat(t.get("acct"),"/following"),title:a.formatNumber(t.get("following_count"))},void 0,(0,i.Z)(b.Ug,{alignItems:"center",space:1},void 0,(0,i.Z)(b.xv,{theme:"primary",weight:"bold",size:"sm"},void 0,(0,y.w8)(t.get("following_count"))),(0,i.Z)(b.xv,{weight:"bold",size:"sm"},void 0,(0,i.Z)(u.Z,{id:"account.follows",defaultMessage:"Follows"})))))))},t}(l.ZP);(0,r.Z)(M,"propTypes",{account:d().record,displayFqn:s().bool,intl:s().object.isRequired,domain:s().string}),t.default=(0,f.ZP)((0,p.$j)((function(){var e=(0,w.Tm)();return function(t,o){var n=o.accountId;return{account:e(t,n),displayFqn:(0,_.$X)(t)}}}),null,null,{forwardRef:!0})(M))},1055:function(e,t,o){"use strict";o.r(t);var n=o(1821),i=o(1827),r=o(1811),a=o(179);t.default=function(e){var t=e.status,o=e.account,s=e.media,c=e.time,d=e.onClose,l=(0,r.k6)(),u=t&&o&&(0,n.Z)("a",{href:t.url,onClick:function(e){0!==e.button||e.ctrlKey||e.metaKey||(e.preventDefault(),l.push("/@".concat(o.acct,"/posts/").concat(t.id)))}},void 0,(0,n.Z)(i.Z,{id:"lightbox.view_context",defaultMessage:"View context"}));return(0,n.Z)("div",{className:"block w-full max-w-xl mx-auto overflow-hidden text-left align-middle transition-all transform shadow-xl rounded-2xl pointer-events-auto"},void 0,(0,n.Z)(a.default,{preview:s.preview_url,blurhash:s.blurhash,src:s.url,startTime:c,onCloseVideo:d,link:u,detailed:!0,alt:s.description}))}},968:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return z}});var n,i,r=o(3),a=o(147),s=o(20),c=o(1828),d=o(1810),l=o(1821),u=o(1814),f=(o(1),o(0)),p=o(6),v=o.n(p),m=o(1813),h=(o(1345),o(1815)),g=o(1827),Z=o(584),y=o(1811),_=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});function b(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function w(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?b(Object(o),!0).forEach((function(t){(0,u.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):b(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var C=(0,h.vU)({confirm:{id:"confirmations.delete.confirm",defaultMessage:"Delete"}}),M=function(e){return[e.get("text").length>0,e.get("spoiler_text").length>0,e.get("media_attachments").size>0,null!==e.get("in_reply_to"),null!==e.get("quote"),null!==e.get("poll")].some((function(e){return!0===e}))},k=(0,y.EN)(i=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,u.Z)(t,"state",{revealed:!!t.props.children}),(0,u.Z)(t,"activeElement",t.state.revealed?document.activeElement:null),(0,u.Z)(t,"handleKeyUp",(function(e){"Escape"!==e.key&&"Esc"!==e.key&&27!==e.keyCode||!t.props.children||t.handleOnClose()})),(0,u.Z)(t,"handleOnClose",(function(){var e=t.props,n=e.onOpenModal,i=e.onCloseModal,r=e.hasComposeContent,a=e.intl,s=e.type,c=e.onCancelReplyCompose;r&&"COMPOSE"===s?n("CONFIRM",{icon:o(58),heading:(0,l.Z)(g.Z,{id:"confirmations.delete.heading",defaultMessage:"Delete post"}),message:(0,l.Z)(g.Z,{id:"confirmations.delete.message",defaultMessage:"Are you sure you want to delete this post?"}),confirm:a.formatMessage(C.confirm),onConfirm:function(){return c()},onCancel:function(){return i("CONFIRM")}}):r&&"CONFIRM"===s?i("CONFIRM"):t.props.onClose()})),(0,u.Z)(t,"handleKeyDown",(function(e){if("Tab"===e.key){var o=Array.from(t.node.querySelectorAll('button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])')).filter((function(e){return"none"!==window.getComputedStyle(e).display})),n=o.indexOf(e.target),i=void 0;(i=e.shiftKey?o[n-1]||o[o.length-1]:o[n+1]||o[0])&&(i.focus(),e.stopPropagation(),e.preventDefault())}})),(0,u.Z)(t,"getSiblings",(function(){return Array.apply(void 0,t.node.parentElement.childNodes).filter((function(e){return e!==t.node}))})),(0,u.Z)(t,"setRef",(function(e){t.node=e})),t}return _(t,e),t.prototype.componentDidMount=function(){window.addEventListener("keyup",this.handleKeyUp,!1),window.addEventListener("keydown",this.handleKeyDown,!1),this.history=this.props.history||(0,m.lX)()},t.prototype.componentDidUpdate=function(e){var t=this;this.props.children&&!e.children?(this.activeElement=document.activeElement,this.getSiblings().forEach((function(e){return e.setAttribute("inert",!0)})),this._handleModalOpen()):e.children||this.setState({revealed:!1}),!this.props.children&&e.children&&(this.activeElement.focus(),this.activeElement=null,this.getSiblings().forEach((function(e){return e.removeAttribute("inert")})),this._handleModalClose(e.type)),this.props.children&&(requestAnimationFrame((function(){t.setState({revealed:!0})})),this._ensureHistoryBuffer())},t.prototype.componentWillUnmount=function(){window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("keydown",this.handleKeyDown)},t.prototype._handleModalOpen=function(){var e=this;this._modalHistoryKey=Date.now(),this.unlistenHistory=this.history.listen((function(t,o){"POP"===o&&(e.handleOnClose(),e.props.onCancel&&e.props.onCancel())}))},t.prototype._handleModalClose=function(e){if(this.unlistenHistory&&this.unlistenHistory(),!["FAVOURITES","MENTIONS","REACTIONS","REBLOGS","MEDIA"].includes(e)){var t=this.history.location.state;t&&t.soapboxModalKey===this._modalHistoryKey&&this.history.goBack()}},t.prototype._ensureHistoryBuffer=function(){var e=this.history.location,t=e.pathname,o=e.state;o&&o.soapboxModalKey===this._modalHistoryKey||this.history.push(t,w(w({},o),{},{soapboxModalKey:this._modalHistoryKey}))},t.prototype.render=function(){var e=this.props,t=e.children,o=e.type,n=this.state.revealed,i=!!t;return i?f.createElement("div",{ref:this.setRef,className:v()({"fixed top-0 left-0 z-[100] w-full h-full overflow-x-hidden overflow-y-auto":!0,"pointer-events-none":!i}),style:{opacity:n?1:0}},(0,l.Z)("div",{role:"presentation",id:"modal-overlay",className:"fixed inset-0 bg-gray-600 bg-opacity-90",onClick:this.handleOnClose}),(0,l.Z)("div",{role:"dialog",className:v()({"my-2 mx-auto relative pointer-events-none flex items-center":!0,"p-4 md:p-0":"MEDIA"!==o}),style:{minHeight:"calc(100% - 3.5rem)"}},void 0,t)):f.createElement("div",{className:"z-50 transition-all",ref:this.setRef,style:{opacity:0}})},t}(f.PureComponent))||i,x=(0,Z.ZP)((0,r.$j)((function(e){return{hasComposeContent:M(e.get("compose"))}}),(function(e){return{onOpenModal:function(t,o){e((0,c.h7)(t,o))},onCloseModal:function(t){e((0,c.Mr)(t))},onCancelReplyCompose:function(){e((0,c.Mr)("COMPOSE")),e((0,s.qY)())}}}))(k)),N=o(30),E=o(36),O=o(34),I=function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},e(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),S=(0,h.vU)({error:{id:"bundle_modal_error.message",defaultMessage:"Something went wrong while loading this page."},retry:{id:"bundle_modal_error.retry",defaultMessage:"Try again"},close:{id:"bundle_modal_error.close",defaultMessage:"Close"}}),P=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,u.Z)(t,"handleRetry",(function(){t.props.onRetry()})),t}return I(t,e),t.prototype.render=function(){var e=this.props,t=e.onClose,o=e.intl.formatMessage;return(0,l.Z)("div",{className:"modal-root__modal error-modal"},void 0,(0,l.Z)("div",{className:"error-modal__body"},void 0,(0,l.Z)(O.Z,{title:o(S.retry),icon:"refresh",onClick:this.handleRetry,size:64}),o(S.error)),(0,l.Z)("div",{className:"error-modal__footer"},void 0,(0,l.Z)("div",{},void 0,(0,l.Z)("button",{onClick:t,className:"error-modal__nav onboarding-modal__skip"},void 0,o(S.close)))))},t}(f.PureComponent),T=(0,Z.ZP)(P),A=o(2),R=function(){return(0,l.Z)("div",{className:"modal-root__modal error-modal"},void 0,(0,l.Z)("div",{className:"error-modal__body"},void 0,(0,l.Z)(A.$j,{})),(0,l.Z)("div",{className:"error-modal__footer"},void 0,(0,l.Z)("div",{},void 0,(0,l.Z)("button",{className:"error-modal__nav onboarding-modal__skip"}))))},D=function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},e(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),j={MEDIA:N.p3,VIDEO:N.Kd,BOOST:N.Zl,CONFIRM:N.cV,MISSING_DESCRIPTION:N.if,MUTE:N.z1,REPORT:N.yW,ACTIONS:N.VU,EMBED:N.V6,LIST_EDITOR:N.gL,FOCAL_POINT:N.in,LIST_ADDER:N.v7,HOTKEYS:N.C4,COMPOSE:N.C,REPLY_MENTIONS:N.OQ,UNAUTHORIZED:N.iq,CRYPTO_DONATE:N.v3,EDIT_FEDERATION:N.Jc,COMPONENT:N.HS,REBLOGS:N.jM,FAVOURITES:N.YP,REACTIONS:N.qP,MENTIONS:N.nO,LANDING_PAGE:N.Qk,BIRTHDAYS:N.cC,ACCOUNT_NOTE:N.SU,COMPARE_HISTORY:N.WI},L=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,u.Z)(t,"renderLoading",(function(e){return function(){return-1===["MEDIA","VIDEO","BOOST","CONFIRM","ACTIONS"].indexOf(e)?(0,l.Z)(R,{}):null}})),(0,u.Z)(t,"renderError",(function(e){return f.createElement(T,(0,d.Z)({},e,{onClose:t.onClickClose}))})),(0,u.Z)(t,"onClickClose",(function(e){var o=t.props;(0,o.onClose)(o.type)})),t}return D(t,e),t.prototype.getSnapshotBeforeUpdate=function(){return{visible:!!this.props.type}},t.prototype.componentDidUpdate=function(e,t,o){o.visible?document.body.classList.add("with-modals"):document.body.classList.remove("with-modals")},t.prototype.render=function(){var e=this,t=this.props,o=t.type,n=t.props,i=!!o;return(0,l.Z)(x,{onClose:this.onClickClose,type:o},void 0,i&&(0,l.Z)(E.Z,{fetchComponent:j[o],loading:this.renderLoading(o),error:this.renderError,renderDelay:200},void 0,(function(t){return f.createElement(t,(0,d.Z)({},n,{onClose:e.onClickClose}))})))},t}(f.PureComponent),U=L,z=(0,r.$j)((function(e){var t=e.get("modals").last({modalType:null,modalProps:{}});return{type:t.modalType,props:t.modalProps}}),(function(e){return{onClose:function(t){switch(t){case"COMPOSE":e((0,s.qY)());break;case"REPORT":e((0,a.Mq)())}e((0,c.Mr)(t))}}}))(U)},572:function(e,t,o){"use strict";e.exports=o.p+"packs/icons/filter-5fa0ab6c.svg"}}]);
//# sourceMappingURL=ui-fbef40ca4c28928e9aef.chunk.js.map