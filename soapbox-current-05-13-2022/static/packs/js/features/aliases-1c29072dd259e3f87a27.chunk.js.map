{"version":3,"file":"packs/js/features/aliases-1c29072dd259e3f87a27.chunk.js","mappings":"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","sources":["webpack://soapbox-fe/./app/soapbox/features/aliases/components/account.js","webpack://soapbox-fe/./app/soapbox/features/aliases/index.js","webpack://soapbox-fe/./app/soapbox/features/aliases/components/search.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class,_class2;import\"core-js/modules/web.dom-collections.iterator.js\";import PropTypes from'prop-types';import React from'react';import ImmutablePropTypes from'react-immutable-proptypes';import ImmutablePureComponent from'react-immutable-pure-component';import{defineMessages,injectIntl}from'react-intl';import{connect}from'react-redux';import{addToAliases}from'soapbox/actions/aliases';import Avatar from'soapbox/components/avatar';import DisplayName from'soapbox/components/display_name';import IconButton from'soapbox/components/icon_button';import{makeGetAccount}from'soapbox/selectors';import{getFeatures}from'soapbox/utils/features';const messages=defineMessages({add:{\"id\":\"aliases.account.add\",\"defaultMessage\":\"Create alias\"}});const makeMapStateToProps=()=>{const getAccount=makeGetAccount();const mapStateToProps=(state,_ref)=>{let{accountId,added,aliases}=_ref;const me=state.get('me');const instance=state.get('instance');const features=getFeatures(instance);const account=getAccount(state,accountId);const apId=account.getIn(['pleroma','ap_id']);const name=features.accountMoving?account.get('acct'):apId;return{account,apId,added:typeof added==='undefined'?aliases.includes(name):added,me};};return mapStateToProps;};const mapDispatchToProps=dispatch=>({onAdd:(intl,apId)=>dispatch(addToAliases(intl,apId))});let Account=(_dec=connect(makeMapStateToProps,mapDispatchToProps),_dec(_class=injectIntl(_class=(_class2=class Account extends ImmutablePureComponent{constructor(){super(...arguments);_defineProperty(this,\"handleOnAdd\",()=>this.props.onAdd(this.props.intl,this.props.account));}render(){const{account,accountId,intl,added,me}=this.props;let button;if(!added&&accountId!==me){button=/*#__PURE__*/_jsx(\"div\",{className:\"account__relationship\"},void 0,/*#__PURE__*/_jsx(IconButton,{src:require('@tabler/icons/icons/plus.svg'),title:intl.formatMessage(messages.add),onClick:this.handleOnAdd}));}return/*#__PURE__*/_jsx(\"div\",{className:\"account\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"account__wrapper\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"account__display-name\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"account__avatar-wrapper\"},void 0,/*#__PURE__*/_jsx(Avatar,{account:account,size:36})),/*#__PURE__*/_jsx(DisplayName,{account:account})),button));}},_defineProperty(_class2,\"propTypes\",{account:ImmutablePropTypes.record.isRequired,apId:PropTypes.string.isRequired,intl:PropTypes.object.isRequired,onAdd:PropTypes.func.isRequired,added:PropTypes.bool}),_defineProperty(_class2,\"defaultProps\",{added:false}),_class2))||_class)||_class);export{Account as default};","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class;import\"core-js/modules/web.dom-collections.iterator.js\";import{List as ImmutableList}from'immutable';import React from'react';import ImmutablePureComponent from'react-immutable-pure-component';import{defineMessages,injectIntl,FormattedMessage}from'react-intl';import{connect}from'react-redux';import{fetchAliases,removeFromAliases}from'soapbox/actions/aliases';import Icon from'soapbox/components/icon';import ScrollableList from'soapbox/components/scrollable_list';import{CardHeader,CardTitle,Column,HStack,Text}from'soapbox/components/ui';import{makeGetAccount}from'soapbox/selectors';import{getFeatures}from'soapbox/utils/features';import Account from'./components/account';import Search from'./components/search';const messages=defineMessages({heading:{\"id\":\"column.aliases\",\"defaultMessage\":\"Account aliases\"},subheading_add_new:{\"id\":\"column.aliases.subheading_add_new\",\"defaultMessage\":\"Add New Alias\"},create_error:{\"id\":\"column.aliases.create_error\",\"defaultMessage\":\"Error creating alias\"},delete_error:{\"id\":\"column.aliases.delete_error\",\"defaultMessage\":\"Error deleting alias\"},subheading_aliases:{\"id\":\"column.aliases.subheading_aliases\",\"defaultMessage\":\"Current aliases\"},delete:{\"id\":\"column.aliases.delete\",\"defaultMessage\":\"Delete\"}});const makeMapStateToProps=()=>{const getAccount=makeGetAccount();const mapStateToProps=state=>{const me=state.get('me');const account=getAccount(state,me);const instance=state.get('instance');const features=getFeatures(instance);let aliases;if(features.accountMoving)aliases=state.getIn(['aliases','aliases','items'],ImmutableList());else aliases=account.getIn(['pleroma','also_known_as']);return{aliases,searchAccountIds:state.getIn(['aliases','suggestions','items']),loaded:state.getIn(['aliases','suggestions','loaded'])};};return mapStateToProps;};let Aliases=(_dec=connect(makeMapStateToProps),_dec(_class=injectIntl(_class=class Aliases extends ImmutablePureComponent{constructor(){super(...arguments);_defineProperty(this,\"componentDidMount\",e=>{const{dispatch}=this.props;dispatch(fetchAliases);});_defineProperty(this,\"handleFilterDelete\",e=>{const{dispatch,intl}=this.props;dispatch(removeFromAliases(intl,e.currentTarget.dataset.value));});}render(){const{intl,aliases,searchAccountIds,loaded}=this.props;const emptyMessage=/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.aliases\",defaultMessage:\"You haven't created any account alias yet.\"});return/*#__PURE__*/_jsx(Column,{className:\"aliases-settings-panel\",icon:\"suitcase\",label:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(CardHeader,{},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.subheading_add_new)})),/*#__PURE__*/_jsx(Search,{}),loaded&&searchAccountIds.size===0?/*#__PURE__*/_jsx(\"div\",{className:\"aliases__accounts empty-column-indicator\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.aliases.suggestions\",defaultMessage:\"There are no account suggestions available for the provided term.\"})):/*#__PURE__*/_jsx(\"div\",{className:\"aliases__accounts\"},void 0,searchAccountIds.map(accountId=>/*#__PURE__*/_jsx(Account,{accountId:accountId,aliases:aliases},accountId))),/*#__PURE__*/_jsx(CardHeader,{},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.subheading_aliases)})),/*#__PURE__*/_jsx(\"div\",{className:\"aliases-settings-panel\"},void 0,/*#__PURE__*/_jsx(ScrollableList,{scrollKey:\"aliases\",emptyMessage:emptyMessage},void 0,aliases.map((alias,i)=>/*#__PURE__*/_jsx(HStack,{alignItems:\"center\",justifyContent:\"between\",space:1,className:\"p-2\"},i,/*#__PURE__*/_jsx(\"div\",{},void 0,/*#__PURE__*/_jsx(Text,{tag:\"span\",theme:\"muted\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"aliases.account_label\",defaultMessage:\"Old account:\"})),' ',/*#__PURE__*/_jsx(Text,{tag:\"span\"},void 0,alias)),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",role:\"button\",tabIndex:\"0\",onClick:this.handleFilterDelete,\"data-value\":alias,\"aria-label\":intl.formatMessage(messages.delete)},void 0,/*#__PURE__*/_jsx(Icon,{className:\"pr-1.5 text-lg\",id:\"times\",size:40}),/*#__PURE__*/_jsx(Text,{weight:\"bold\",theme:\"muted\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"aliases.aliases_list_delete\",defaultMessage:\"Unlink alias\"}))))))));}})||_class)||_class);export{Aliases as default};","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import classNames from'classnames';import React from'react';import{defineMessages,useIntl}from'react-intl';import{useDispatch}from'react-redux';import{fetchAliasesSuggestions,clearAliasesSuggestions,changeAliasesSuggestions}from'soapbox/actions/aliases';import Icon from'soapbox/components/icon';import{Button}from'soapbox/components/ui';import{useAppSelector}from'soapbox/hooks';const messages=defineMessages({search:{\"id\":\"aliases.search\",\"defaultMessage\":\"Search your old account\"},searchTitle:{\"id\":\"tabs_bar.search\",\"defaultMessage\":\"Search\"}});const Search=()=>{const dispatch=useDispatch();const intl=useIntl();const value=useAppSelector(state=>state.aliases.getIn(['suggestions','value']));const handleChange=e=>{dispatch(changeAliasesSuggestions(e.target.value));};const handleKeyUp=e=>{if(e.keyCode===13){dispatch(fetchAliasesSuggestions(value));}};const handleSubmit=()=>{dispatch(fetchAliasesSuggestions(value));};const handleClear=()=>{dispatch(clearAliasesSuggestions());};const hasValue=value.length>0;return/*#__PURE__*/_jsx(\"div\",{className:\"aliases_search search\"},void 0,/*#__PURE__*/_jsx(\"label\",{},void 0,/*#__PURE__*/_jsx(\"span\",{style:{display:'none'}},void 0,intl.formatMessage(messages.search)),/*#__PURE__*/_jsx(\"input\",{className:\"search__input\",type:\"text\",value:value,onChange:handleChange,onKeyUp:handleKeyUp,placeholder:intl.formatMessage(messages.search)})),/*#__PURE__*/_jsx(\"div\",{role:\"button\",tabIndex:0,className:\"search__icon\",onClick:handleClear},void 0,/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/icons/backspace.svg'),\"aria-label\":intl.formatMessage(messages.search),className:classNames('svg-icon--backspace',{active:hasValue})})),/*#__PURE__*/_jsx(Button,{onClick:handleSubmit},void 0,intl.formatMessage(messages.searchTitle)));};export default Search;"],"names":["_dec","_class","_class2","messages","add","Account","getAccount","state","_ref","accountId","added","aliases","me","get","instance","features","account","apId","getIn","name","accountMoving","includes","dispatch","onAdd","intl","injectIntl","arguments","props","render","button","this","className","src","title","formatMessage","onClick","handleOnAdd","size","search","searchTitle","useIntl","value","hasValue","length","style","display","type","onChange","e","target","onKeyUp","keyCode","placeholder","role","tabIndex","active","heading","subheading_add_new","create_error","delete_error","subheading_aliases","delete","Aliases","searchAccountIds","loaded","currentTarget","dataset","emptyMessage","id","defaultMessage","icon","label","map","scrollKey","alias","i","alignItems","justifyContent","space","tag","theme","handleFilterDelete","weight"],"sourceRoot":""}