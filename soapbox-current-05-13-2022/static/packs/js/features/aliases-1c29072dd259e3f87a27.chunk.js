"use strict";(self.webpackChunksoapbox_fe=self.webpackChunksoapbox_fe||[]).push([[12],{1116:function(e,a,t){t.r(a),t.d(a,{default:function(){return S}});var s,n,o,i,r,c=t(1821),l=t(1814),d=(t(1),t(602)),u=t(8),p=t(1815),f=t(584),g=t(1827),v=t(3),m=t(257),h=t(15),Z=t(21),_=t(2),y=t(11),b=t(14),M=t(5),w=t.n(M),N=t(10),I=t.n(N),O=t(40),C=t(66),x=t(34),k=(s=function(e,a){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])},s(e,a)},function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function t(){this.constructor=e}s(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),A=(0,p.vU)({add:{id:"aliases.account.add",defaultMessage:"Create alias"}}),j=(n=(0,v.$j)((function(){var e=(0,y.Tm)();return function(a,t){var s=t.accountId,n=t.added,o=t.aliases,i=a.get("me"),r=a.get("instance"),c=(0,b.N$)(r),l=e(a,s),d=l.getIn(["pleroma","ap_id"]),u=c.accountMoving?l.get("acct"):d;return{account:l,apId:d,added:void 0===n?o.includes(u):n,me:i}}}),(function(e){return{onAdd:function(a,t){return e((0,m.j4)(a,t))}}})),n(o=(0,f.ZP)((i=function(e){function a(){var a=e.apply(this,arguments)||this;return(0,l.Z)(a,"handleOnAdd",(function(){return a.props.onAdd(a.props.intl,a.props.account)})),a}return k(a,e),a.prototype.render=function(){var e,a=this.props,s=a.account,n=a.accountId,o=a.intl,i=a.added,r=a.me;return i||n===r||(e=(0,c.Z)("div",{className:"account__relationship"},void 0,(0,c.Z)(x.Z,{src:t(48),title:o.formatMessage(A.add),onClick:this.handleOnAdd}))),(0,c.Z)("div",{className:"account"},void 0,(0,c.Z)("div",{className:"account__wrapper"},void 0,(0,c.Z)("div",{className:"account__display-name"},void 0,(0,c.Z)("div",{className:"account__avatar-wrapper"},void 0,(0,c.Z)(O.Z,{account:s,size:36})),(0,c.Z)(C.Z,{account:s})),e))},a}(u.ZP),(0,l.Z)(i,"propTypes",{account:I().record.isRequired,apId:w().string.isRequired,intl:w().object.isRequired,onAdd:w().func.isRequired,added:w().bool}),(0,l.Z)(i,"defaultProps",{added:!1}),o=i))||o)||o),P=t(6),T=t.n(P),U=t(583),q=t(4),z=(0,p.vU)({search:{id:"aliases.search",defaultMessage:"Search your old account"},searchTitle:{id:"tabs_bar.search",defaultMessage:"Search"}}),D=function(){var e=(0,v.I0)(),a=(0,U.Z)(),s=(0,q.CG)((function(e){return e.aliases.getIn(["suggestions","value"])})),n=s.length>0;return(0,c.Z)("div",{className:"aliases_search search"},void 0,(0,c.Z)("label",{},void 0,(0,c.Z)("span",{style:{display:"none"}},void 0,a.formatMessage(z.search)),(0,c.Z)("input",{className:"search__input",type:"text",value:s,onChange:function(a){e((0,m.lt)(a.target.value))},onKeyUp:function(a){13===a.keyCode&&e((0,m.YX)(s))},placeholder:a.formatMessage(z.search)})),(0,c.Z)("div",{role:"button",tabIndex:0,className:"search__icon",onClick:function(){e((0,m.oy)())}},void 0,(0,c.Z)(h.Z,{src:t(627),"aria-label":a.formatMessage(z.search),className:T()("svg-icon--backspace",{active:n})})),(0,c.Z)(_.zx,{onClick:function(){e((0,m.YX)(s))}},void 0,a.formatMessage(z.searchTitle)))},E=function(){var e=function(a,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])},e(a,t)};return function(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function s(){this.constructor=a}e(a,t),a.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),R=(0,p.vU)({heading:{id:"column.aliases",defaultMessage:"Account aliases"},subheading_add_new:{id:"column.aliases.subheading_add_new",defaultMessage:"Add New Alias"},create_error:{id:"column.aliases.create_error",defaultMessage:"Error creating alias"},delete_error:{id:"column.aliases.delete_error",defaultMessage:"Error deleting alias"},subheading_aliases:{id:"column.aliases.subheading_aliases",defaultMessage:"Current aliases"},delete:{id:"column.aliases.delete",defaultMessage:"Delete"}}),S=(0,v.$j)((function(){var e=(0,y.Tm)();return function(a){var t=a.get("me"),s=e(a,t),n=a.get("instance");return{aliases:(0,b.N$)(n).accountMoving?a.getIn(["aliases","aliases","items"],(0,d.List)()):s.getIn(["pleroma","also_known_as"]),searchAccountIds:a.getIn(["aliases","suggestions","items"]),loaded:a.getIn(["aliases","suggestions","loaded"])}}}))(r=(0,f.ZP)(r=function(e){function a(){var a=e.apply(this,arguments)||this;return(0,l.Z)(a,"componentDidMount",(function(e){(0,a.props.dispatch)(m.Ir)})),(0,l.Z)(a,"handleFilterDelete",(function(e){var t=a.props,s=t.dispatch,n=t.intl;s((0,m.vu)(n,e.currentTarget.dataset.value))})),a}return E(a,e),a.prototype.render=function(){var e=this,a=this.props,t=a.intl,s=a.aliases,n=a.searchAccountIds,o=a.loaded,i=(0,c.Z)(g.Z,{id:"empty_column.aliases",defaultMessage:"You haven't created any account alias yet."});return(0,c.Z)(_.sg,{className:"aliases-settings-panel",icon:"suitcase",label:t.formatMessage(R.heading)},void 0,(0,c.Z)(_.Ol,{},void 0,(0,c.Z)(_.ll,{title:t.formatMessage(R.subheading_add_new)})),(0,c.Z)(D,{}),o&&0===n.size?(0,c.Z)("div",{className:"aliases__accounts empty-column-indicator"},void 0,(0,c.Z)(g.Z,{id:"empty_column.aliases.suggestions",defaultMessage:"There are no account suggestions available for the provided term."})):(0,c.Z)("div",{className:"aliases__accounts"},void 0,n.map((function(e){return(0,c.Z)(j,{accountId:e,aliases:s},e)}))),(0,c.Z)(_.Ol,{},void 0,(0,c.Z)(_.ll,{title:t.formatMessage(R.subheading_aliases)})),(0,c.Z)("div",{className:"aliases-settings-panel"},void 0,(0,c.Z)(Z.Z,{scrollKey:"aliases",emptyMessage:i},void 0,s.map((function(a,s){return(0,c.Z)(_.Ug,{alignItems:"center",justifyContent:"between",space:1,className:"p-2"},s,(0,c.Z)("div",{},void 0,(0,c.Z)(_.xv,{tag:"span",theme:"muted"},void 0,(0,c.Z)(g.Z,{id:"aliases.account_label",defaultMessage:"Old account:"}))," ",(0,c.Z)(_.xv,{tag:"span"},void 0,a)),(0,c.Z)("div",{className:"flex items-center",role:"button",tabIndex:"0",onClick:e.handleFilterDelete,"data-value":a,"aria-label":t.formatMessage(R.delete)},void 0,(0,c.Z)(h.Z,{className:"pr-1.5 text-lg",id:"times",size:40}),(0,c.Z)(_.xv,{weight:"bold",theme:"muted"},void 0,(0,c.Z)(g.Z,{id:"aliases.aliases_list_delete",defaultMessage:"Unlink alias"}))))})))))},a}(u.ZP))||r)||r}}]);
//# sourceMappingURL=aliases-1c29072dd259e3f87a27.chunk.js.map