"use strict";(self.webpackChunksoapbox_fe=self.webpackChunksoapbox_fe||[]).push([[23],{964:function(o,n,t){t.r(n),t.d(n,{default:function(){return W}});var e,r,s,i=t(1821),c=t(1814),a=(t(1),t(0)),u=t(1815),p=t(584),l=t(1827),d=t(3),f=t(20),h=t(264),v=t(219),y=t(44),g=t(2),M=t(1810),_=t(1823),w=t(22),Z=t.n(w),m=t(5),I=t.n(m),b=t(10),L=t.n(b),O=t(8),C=t(21),P=t(1811),k=t(227),j=(e=function(o,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(o[t]=n[t])},e(o,n)},function(o,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=o}e(o,n),o.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),S=(0,P.EN)((s=function(o){function n(){var n=o.apply(this,arguments)||this;return(0,c.Z)(n,"handleClick",(function(){if(n.props.history){var o=n.props,t=o.lastStatusId,e=o.unread,r=o.markRead;e&&r(),n.props.history.push("/statuses/".concat(t))}})),(0,c.Z)(n,"handleHotkeyMoveUp",(function(){n.props.onMoveUp(n.props.conversationId)})),(0,c.Z)(n,"handleHotkeyMoveDown",(function(){n.props.onMoveDown(n.props.conversationId)})),n}return j(n,o),n.prototype.render=function(){var o=this.props,n=o.accounts,t=o.lastStatusId,e=o.unread;return null===t?null:(0,i.Z)(k.Z,{id:t,unread:e,otherAccounts:n,onMoveUp:this.handleHotkeyMoveUp,onMoveDown:this.handleHotkeyMoveDown,onClick:this.handleClick})},n}(O.ZP),(0,c.Z)(s,"propTypes",{conversationId:I().string.isRequired,accounts:L().list.isRequired,lastStatusId:I().string,unread:I().bool.isRequired,onMoveUp:I().func,onMoveDown:I().func,markRead:I().func.isRequired,history:I().object}),r=s))||r,x=(0,d.$j)((function(o,n){var t=n.conversationId,e=o.getIn(["conversations","items"]).find((function(o){return o.get("id")===t}));return{accounts:e.get("accounts").map((function(n){return o.getIn(["accounts",n],null)})),unread:e.get("unread"),lastStatusId:e.get("last_status",null)}}),(function(o,n){var t=n.conversationId;return{markRead:function(){return o((0,v.v3)(t))}}}))(S),D=function(){var o=function(n,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(o[t]=n[t])},o(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}o(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),R=["conversations","isLoading","onLoadMore"],U=function(o){function n(){var n=o.apply(this,arguments)||this;return(0,c.Z)(n,"getCurrentIndex",(function(o){return n.props.conversations.findIndex((function(n){return n.get("id")===o}))})),(0,c.Z)(n,"handleMoveUp",(function(o){var t=n.getCurrentIndex(o)-1;n._selectChild(t,!0)})),(0,c.Z)(n,"handleMoveDown",(function(o){var t=n.getCurrentIndex(o)+1;n._selectChild(t,!1)})),(0,c.Z)(n,"setRef",(function(o){n.node=o})),(0,c.Z)(n,"handleLoadOlder",Z()((function(){var o=n.props.conversations.getIn([-1,"id"]);o&&n.props.onLoadMore(o)}),300,{leading:!0})),n}return D(n,o),n.prototype._selectChild=function(o,n){var t=this.node.node,e=t.querySelector("article:nth-of-type(".concat(o+1,") .focusable"));e&&(n&&t.scrollTop>e.offsetTop?e.scrollIntoView(!0):!n&&t.scrollTop+t.clientHeight<e.offsetTop+e.offsetHeight&&e.scrollIntoView(!1),e.focus())},n.prototype.render=function(){var o=this,n=this.props,t=n.conversations,e=n.isLoading,r=n.onLoadMore,s=(0,_.Z)(n,R);return a.createElement(C.Z,(0,M.Z)({},s,{onLoadMore:r&&this.handleLoadOlder,scrollKey:"direct",ref:this.setRef,isLoading:e,showLoading:e&&0===t.size}),t.map((function(n){return(0,i.Z)(x,{conversationId:n.get("id"),onMoveUp:o.handleMoveUp,onMoveDown:o.handleMoveDown},n.get("id"))})))},n}(O.ZP),T=U;(0,c.Z)(U,"propTypes",{conversations:L().list.isRequired,hasMore:I().bool,isLoading:I().bool,onLoadMore:I().func});var q,H=(0,d.$j)((function(o){return{conversations:o.getIn(["conversations","items"]),isLoading:o.getIn(["conversations","isLoading"],!0),hasMore:o.getIn(["conversations","hasMore"],!1)}}),(function(o){return{onLoadMore:function(n){return o((0,v.P4)({maxId:n}))}}}))(T),E=function(){var o=function(n,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(o[t]=n[t])},o(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}o(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),A=(0,u.vU)({title:{id:"column.direct",defaultMessage:"Direct messages"},searchPlaceholder:{id:"direct.search_placeholder",defaultMessage:"Send a message toâ€¦"}}),W=(0,d.$j)()(q=(0,p.ZP)(q=function(o){function n(){var n=o.apply(this,arguments)||this;return(0,c.Z)(n,"handleSuggestion",(function(o){n.props.dispatch((0,f.W3)(o))})),(0,c.Z)(n,"handleLoadMore",(function(o){n.props.dispatch((0,v.P4)({maxId:o}))})),n}return E(n,o),n.prototype.componentDidMount=function(){var o=this.props.dispatch;o((0,v.ol)()),o((0,v.P4)()),this.disconnect=o((0,y._o)())},n.prototype.componentWillUnmount=function(){this.props.dispatch((0,v.eC)()),this.disconnect&&(this.disconnect(),this.disconnect=null)},n.prototype.render=function(){var o=this.props.intl;return(0,i.Z)(g.sg,{label:o.formatMessage(A.title)},void 0,(0,i.Z)(h.Z,{placeholder:o.formatMessage(A.searchPlaceholder),onSelected:this.handleSuggestion}),(0,i.Z)(H,{scrollKey:"direct_timeline",timelineId:"direct",onLoadMore:this.handleLoadMore,emptyMessage:(0,i.Z)(l.Z,{id:"empty_column.direct",defaultMessage:"You don't have any direct messages yet. When you send or receive one, it will show up here."})}))},n}(a.PureComponent))||q)||q}}]);
//# sourceMappingURL=conversations-f23196c9314b7cb7c3da.chunk.js.map