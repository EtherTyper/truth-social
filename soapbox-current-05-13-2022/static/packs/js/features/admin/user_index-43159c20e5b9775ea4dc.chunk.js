"use strict";(self.webpackChunksoapbox_fe=self.webpackChunksoapbox_fe||[]).push([[11],{1114:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var o,a,r,s=n(1821),i=n(1814),u=n(22),c=n.n(u),d=(n(1),n(602)),p=n(5),f=n.n(p),l=n(8),h=n(1815),g=n(584),y=n(3),m=n(37),Z=n(21),v=n(23),_=n(158),M=n(24),S=(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),x=(0,h.vU)({heading:{id:"column.admin.users",defaultMessage:"Users"},empty:{id:"admin.user_index.empty",defaultMessage:"No users found."},searchPlaceholder:{id:"admin.user_index.search_input_placeholder",defaultMessage:"Who are you looking for?"}}),P=(0,y.$j)()(a=(0,g.ZP)((r=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,i.Z)(t,"state",{isLoading:!0,filters:(0,d.Set)(["local","active"]),accountIds:(0,d.OrderedSet)(),total:1/0,pageSize:50,page:0,query:""}),(0,i.Z)(t,"clearState",(function(e){t.setState({isLoading:!0,accountIds:(0,d.OrderedSet)(),page:0},e)})),(0,i.Z)(t,"fetchNextPage",(function(){var e=t.state,n=e.filters,o=e.page,a=e.query,r=e.pageSize,s=o+1;t.props.dispatch((0,m.uh)(n,s,a,r)).then((function(e){var n=e.users,o=e.count,a=n.map((function(e){return e.id}));t.setState({isLoading:!1,accountIds:t.state.accountIds.union(a),total:o,page:s})})).catch((function(){}))})),(0,i.Z)(t,"refresh",(function(){t.clearState((function(){t.fetchNextPage()}))})),(0,i.Z)(t,"handleLoadMore",c()((function(){t.fetchNextPage()}),2e3,{leading:!0})),(0,i.Z)(t,"updateQuery",c()((function(e){t.setState({query:e})}),900)),(0,i.Z)(t,"handleQueryChange",(function(e){t.updateQuery(e.target.value)})),t}return S(t,e),t.prototype.componentDidMount=function(){this.fetchNextPage()},t.prototype.componentDidUpdate=function(e,t){var n=this.state,o=n.filters,a=n.query,r=!(0,d.is)(o,t.filters),s=a!==t.query;(r||s)&&this.refresh()},t.prototype.render=function(){var e=this.props.intl,t=this.state,n=t.accountIds,o=t.isLoading,a=n.count()<this.state.total,r=o&&n.isEmpty();return(0,s.Z)(M.Z,{label:e.formatMessage(x.heading)},void 0,(0,s.Z)(_.NA,{style:{paddingBottom:0}},void 0,(0,s.Z)(_.oi,{onChange:this.handleQueryChange,placeholder:e.formatMessage(x.searchPlaceholder)})),(0,s.Z)(Z.Z,{scrollKey:"user-index",hasMore:a,isLoading:o,showLoading:r,onLoadMore:this.handleLoadMore,emptyMessage:e.formatMessage(x.empty),className:"mt-4",itemClassName:"pb-4"},void 0,n.map((function(e){return(0,s.Z)(v.Z,{id:e,withDate:!0},e)}))))},t}(l.ZP),(0,i.Z)(r,"propTypes",{dispatch:f().func.isRequired}),a=r))||a)||a}}]);
//# sourceMappingURL=user_index-43159c20e5b9775ea4dc.chunk.js.map