{"version":3,"file":"packs/js/features/admin/user_index-43159c20e5b9775ea4dc.chunk.js","mappings":"+JAAwKA,EAAOC,E,klBAA0oBC,GAAS,QAAe,CAACC,QAAQ,CAAC,GAAK,qBAAqB,eAAiB,SAASC,MAAM,CAAC,GAAK,yBAAyB,eAAiB,mBAAmBC,kBAAkB,CAAC,GAAK,4CAA4C,eAAiB,8BAAkCC,GAAgB,SAAUC,CAAKP,GAAO,SAAmBC,EAAO,YAAgD,gCAAuBO,YAAS,K,OAAE,OAAgB,EAAK,QAAQ,CAACC,WAAU,EAAKC,SAAQ,SAAa,CAAC,QAAQ,WAAWC,YAAW,kBAAsBC,MAAMC,EAAAA,EAASC,SAAS,GAAGC,KAAK,EAAEC,MAAM,MAAK,OAAgB,EAAK,cAAa,SAAAC,GAAW,EAAKC,SAAS,CAACT,WAAU,EAAKE,YAAW,kBAAsBI,KAAK,GAAGE,OAAa,OAAgB,EAAK,iBAAgB,WAAU,MAA8B,EAAKE,MAAlCT,EAAO,UAACK,EAAI,OAACC,EAAK,QAACF,EAAQ,WAAmBM,EAASL,EAAK,EAAE,EAAKM,MAAMC,UAAS,QAAWZ,EAAQU,EAASJ,EAAMF,IAAWS,MAAK,SAAAC,GAAW,IAAAC,EAAaD,EAAI,MAAXE,EAAOF,EAAI,MAAOG,EAAOF,EAAMG,KAAI,SAAAC,GAAM,OAAAA,EAAKC,MAAI,EAAKZ,SAAS,CAACT,WAAU,EAAME,WAAW,EAAKQ,MAAMR,WAAWoB,MAAMJ,GAAQf,MAAMc,EAAMX,KAAKK,OAAcY,OAAM,mBAAW,OAAgB,EAAK,WAAU,WAAK,EAAKC,YAAW,WAAK,EAAKC,uBAAsB,OAAgB,EAAK,iBAAiB,KAAU,WAAK,EAAKA,kBAAkB,IAAK,CAACC,SAAQ,MAAQ,OAAgB,EAAK,cAAc,KAAU,SAAAnB,GAAQ,EAAKE,SAAS,CAACF,MAAK,MAAK,OAAM,OAAgB,EAAK,qBAAoB,SAAAoB,GAAI,EAAKC,YAAYD,EAAEE,OAAOC,U,EAA2gC,OAA/iE,OAA+iC,YAAAC,kBAAA,WAAoBC,KAAKP,iBAAiB,YAAAQ,mBAAA,SAAmBC,EAAUC,GAAgB,MAAgBH,KAAKtB,MAApBT,EAAO,UAACM,EAAK,QAAmB6B,IAAgB,IAAAC,IAAGpC,EAAQkC,EAAUlC,SAAeqC,EAAa/B,IAAQ4B,EAAU5B,OAAS6B,GAAgBE,IAAcN,KAAKO,WAAY,YAAAC,OAAA,WAAe,IAAAC,EAAMT,KAAKpB,MAAK,KAAM,EAAuBoB,KAAKtB,MAA3BR,EAAU,aAACF,EAAS,YAAmB0C,EAAQxC,EAAWe,QAAQe,KAAKtB,MAAMP,MAAYwC,EAAY3C,GAAWE,EAAW0C,UAAU,OAAmB,OAAK,IAAO,CAACC,MAAMJ,EAAKK,cAAcrD,EAASC,eAAU,GAAoB,OAAK,KAAW,CAACqD,MAAM,CAACC,cAAc,SAAI,GAAoB,OAAK,KAAU,CAACC,SAASjB,KAAKkB,kBAAkBC,YAAYV,EAAKK,cAAcrD,EAASG,uBAAmC,OAAK,IAAe,CAACwD,UAAU,aAAaV,QAAQA,EAAQ1C,UAAUA,EAAU2C,YAAYA,EAAYU,WAAWrB,KAAKsB,eAAeC,aAAad,EAAKK,cAAcrD,EAASE,OAAO6D,UAAU,OAAOC,cAAc,aAAQ,EAAOvD,EAAWiB,KAAI,SAAAE,GAAiB,cAAK,IAAiB,CAACA,GAAGA,EAAGqC,UAAS,GAAMrC,SAAQ,EAAxkE,CAAyB,OAAijE,OAAgB7B,EAAQ,YAAY,CAACqB,SAAS,sBAAvoEtB,EAAmqEC,KAAWD,IAASA","sources":["webpack://soapbox-fe/./app/soapbox/features/admin/user_index.js"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";import _debounce from\"lodash/debounce\";var _dec,_class,_class2;import\"core-js/modules/web.dom-collections.iterator.js\";import{Set as ImmutableSet,OrderedSet as ImmutableOrderedSet,is}from'immutable';import PropTypes from'prop-types';import React from'react';import ImmutablePureComponent from'react-immutable-pure-component';import{injectIntl,defineMessages}from'react-intl';import{connect}from'react-redux';import{fetchUsers}from'soapbox/actions/admin';import ScrollableList from'soapbox/components/scrollable_list';import AccountContainer from'soapbox/containers/account_container';import{SimpleForm,TextInput}from'soapbox/features/forms';import Column from'soapbox/features/ui/components/column';const messages=defineMessages({heading:{\"id\":\"column.admin.users\",\"defaultMessage\":\"Users\"},empty:{\"id\":\"admin.user_index.empty\",\"defaultMessage\":\"No users found.\"},searchPlaceholder:{\"id\":\"admin.user_index.search_input_placeholder\",\"defaultMessage\":\"Who are you looking for?\"}});let UserIndex=(_dec=connect(),_dec(_class=injectIntl(_class=(_class2=class UserIndex extends ImmutablePureComponent{constructor(){super(...arguments);_defineProperty(this,\"state\",{isLoading:true,filters:ImmutableSet(['local','active']),accountIds:ImmutableOrderedSet(),total:Infinity,pageSize:50,page:0,query:''});_defineProperty(this,\"clearState\",callback=>{this.setState({isLoading:true,accountIds:ImmutableOrderedSet(),page:0},callback);});_defineProperty(this,\"fetchNextPage\",()=>{const{filters,page,query,pageSize}=this.state;const nextPage=page+1;this.props.dispatch(fetchUsers(filters,nextPage,query,pageSize)).then(_ref=>{let{users,count}=_ref;const newIds=users.map(user=>user.id);this.setState({isLoading:false,accountIds:this.state.accountIds.union(newIds),total:count,page:nextPage});}).catch(()=>{});});_defineProperty(this,\"refresh\",()=>{this.clearState(()=>{this.fetchNextPage();});});_defineProperty(this,\"handleLoadMore\",_debounce(()=>{this.fetchNextPage();},2000,{leading:true}));_defineProperty(this,\"updateQuery\",_debounce(query=>{this.setState({query});},900));_defineProperty(this,\"handleQueryChange\",e=>{this.updateQuery(e.target.value);});}componentDidMount(){this.fetchNextPage();}componentDidUpdate(prevProps,prevState){const{filters,query}=this.state;const filtersChanged=!is(filters,prevState.filters);const queryChanged=query!==prevState.query;if(filtersChanged||queryChanged){this.refresh();}}render(){const{intl}=this.props;const{accountIds,isLoading}=this.state;const hasMore=accountIds.count()<this.state.total;const showLoading=isLoading&&accountIds.isEmpty();return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(SimpleForm,{style:{paddingBottom:0}},void 0,/*#__PURE__*/_jsx(TextInput,{onChange:this.handleQueryChange,placeholder:intl.formatMessage(messages.searchPlaceholder)})),/*#__PURE__*/_jsx(ScrollableList,{scrollKey:\"user-index\",hasMore:hasMore,isLoading:isLoading,showLoading:showLoading,onLoadMore:this.handleLoadMore,emptyMessage:intl.formatMessage(messages.empty),className:\"mt-4\",itemClassName:\"pb-4\"},void 0,accountIds.map(id=>/*#__PURE__*/_jsx(AccountContainer,{id:id,withDate:true},id))));}},_defineProperty(_class2,\"propTypes\",{dispatch:PropTypes.func.isRequired}),_class2))||_class)||_class);export{UserIndex as default};"],"names":["_class","_class2","messages","heading","empty","searchPlaceholder","UserIndex","_dec","arguments","isLoading","filters","accountIds","total","Infinity","pageSize","page","query","callback","setState","state","nextPage","props","dispatch","then","_ref","users","count","newIds","map","user","id","union","catch","clearState","fetchNextPage","leading","e","updateQuery","target","value","componentDidMount","this","componentDidUpdate","prevProps","prevState","filtersChanged","is","queryChanged","refresh","render","intl","hasMore","showLoading","isEmpty","label","formatMessage","style","paddingBottom","onChange","handleQueryChange","placeholder","scrollKey","onLoadMore","handleLoadMore","emptyMessage","className","itemClassName","withDate"],"sourceRoot":""}