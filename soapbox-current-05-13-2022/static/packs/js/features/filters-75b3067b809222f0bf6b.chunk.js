"use strict";(self.webpackChunksoapbox_fe=self.webpackChunksoapbox_fe||[]).push([[38],{1052:function(e,t,i){i.r(t),i.d(t,{default:function(){return x}});var a,s,l,r=i(1821),o=i(1814),n=(i(1),i(5)),d=i.n(n),c=i(8),f=i(1815),h=i(584),u=i(1827),_=i(3),p=i(319),m=i(17),g=i(15),Z=i(21),v=i(2),b=i(158),w=(a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},a(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),M=(0,f.vU)({heading:{id:"column.filters",defaultMessage:"Muted words"},subheading_add_new:{id:"column.filters.subheading_add_new",defaultMessage:"Add New Filter"},keyword:{id:"column.filters.keyword",defaultMessage:"Keyword or phrase"},expires:{id:"column.filters.expires",defaultMessage:"Expire after"},expires_hint:{id:"column.filters.expires_hint",defaultMessage:"Expiration dates are not currently supported"},home_timeline:{id:"column.filters.home_timeline",defaultMessage:"Home timeline"},public_timeline:{id:"column.filters.public_timeline",defaultMessage:"Public timeline"},notifications:{id:"column.filters.notifications",defaultMessage:"Notifications"},conversations:{id:"column.filters.conversations",defaultMessage:"Conversations"},drop_header:{id:"column.filters.drop_header",defaultMessage:"Drop instead of hide"},drop_hint:{id:"column.filters.drop_hint",defaultMessage:"Filtered posts will disappear irreversibly, even if filter is later removed"},whole_word_header:{id:"column.filters.whole_word_header",defaultMessage:"Whole word"},whole_word_hint:{id:"column.filters.whole_word_hint",defaultMessage:"When the keyword or phrase is alphanumeric only, it will only be applied if it matches the whole word"},add_new:{id:"column.filters.add_new",defaultMessage:"Add New Filter"},create_error:{id:"column.filters.create_error",defaultMessage:"Error adding filter"},delete_error:{id:"column.filters.delete_error",defaultMessage:"Error deleting filter"},subheading_filters:{id:"column.filters.subheading_filters",defaultMessage:"Current Filters"},delete:{id:"column.filters.delete",defaultMessage:"Delete"}}),x=(0,_.$j)((function(e){return{filters:e.get("filters")}}))(s=(0,h.ZP)((l=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,o.Z)(t,"state",{phrase:"",expires_at:"",home_timeline:!0,public_timeline:!1,notifications:!1,conversations:!1,irreversible:!1,whole_word:!0}),(0,o.Z)(t,"handleInputChange",(function(e){var i;t.setState(((i={})[e.target.name]=e.target.value,i))})),(0,o.Z)(t,"handleSelectChange",(function(e){var i;t.setState(((i={})[e.target.name]=e.target.value,i))})),(0,o.Z)(t,"handleCheckboxChange",(function(e){var i;t.setState(((i={})[e.target.name]=e.target.checked,i))})),(0,o.Z)(t,"handleAddNew",(function(e){e.preventDefault();var i=t.props,a=i.intl,s=i.dispatch,l=t.state,r=l.phrase,o=l.whole_word,n=l.expires_at,d=l.irreversible,c=t.state,f=c.home_timeline,h=c.public_timeline,u=c.notifications,_=c.conversations,g=[];f&&g.push("home"),h&&g.push("public"),u&&g.push("notifications"),_&&g.push("thread"),s((0,p.cj)(a,r,n,g,o,d)).then((function(e){return s((0,p.a$)())})).catch((function(e){s(m.ZP.error(a.formatMessage(M.create_error)))}))})),(0,o.Z)(t,"handleFilterDelete",(function(e){var i=t.props,a=i.intl,s=i.dispatch;s((0,p.kh)(a,e.currentTarget.dataset.value)).then((function(e){return s((0,p.a$)())})).catch((function(e){s(m.ZP.error(a.formatMessage(M.delete_error)))}))})),t}return w(t,e),t.prototype.componentDidMount=function(){this.props.dispatch((0,p.a$)())},t.prototype.render=function(){var e=this,t=this.props,i=t.intl,a=t.filters,s=(0,r.Z)(u.Z,{id:"empty_column.filters",defaultMessage:"You haven't created any muted words yet."});return(0,r.Z)(v.sg,{className:"filter-settings-panel",icon:"filter",label:i.formatMessage(M.heading)},void 0,(0,r.Z)(v.Ol,{},void 0,(0,r.Z)(v.ll,{title:i.formatMessage(M.subheading_add_new)})),(0,r.Z)(v.l0,{onSubmit:this.handleAddNew},void 0,(0,r.Z)(v.cw,{labelText:i.formatMessage(M.keyword)},void 0,(0,r.Z)(v.II,{required:!0,type:"text",name:"phrase",onChange:this.handleInputChange})),(0,r.Z)(b.H_,{},void 0,(0,r.Z)(v.xv,{tag:"label"},void 0,(0,r.Z)(u.Z,{id:"filters.context_header",defaultMessage:"Filter contexts"})),(0,r.Z)(v.xv,{theme:"muted",size:"xs"},void 0,(0,r.Z)(u.Z,{id:"filters.context_hint",defaultMessage:"One or multiple contexts where the filter should apply"})),(0,r.Z)("div",{className:"two-col"},void 0,(0,r.Z)(b.XZ,{label:i.formatMessage(M.home_timeline),name:"home_timeline",checked:this.state.home_timeline,onChange:this.handleCheckboxChange}),(0,r.Z)(b.XZ,{label:i.formatMessage(M.public_timeline),name:"public_timeline",checked:this.state.public_timeline,onChange:this.handleCheckboxChange}),(0,r.Z)(b.XZ,{label:i.formatMessage(M.notifications),name:"notifications",checked:this.state.notifications,onChange:this.handleCheckboxChange}),(0,r.Z)(b.XZ,{label:i.formatMessage(M.conversations),name:"conversations",checked:this.state.conversations,onChange:this.handleCheckboxChange}))),(0,r.Z)(b.H_,{},void 0,(0,r.Z)(b.XZ,{label:i.formatMessage(M.drop_header),hint:i.formatMessage(M.drop_hint),name:"irreversible",checked:this.state.irreversible,onChange:this.handleCheckboxChange}),(0,r.Z)(b.XZ,{label:i.formatMessage(M.whole_word_header),hint:i.formatMessage(M.whole_word_hint),name:"whole_word",checked:this.state.whole_word,onChange:this.handleCheckboxChange})),(0,r.Z)(v.iN,{},void 0,(0,r.Z)(v.zx,{type:"submit",theme:"primary"},void 0,i.formatMessage(M.add_new)))),(0,r.Z)(v.Ol,{},void 0,(0,r.Z)(v.ll,{title:i.formatMessage(M.subheading_filters)})),(0,r.Z)(Z.Z,{scrollKey:"filters",emptyMessage:s},void 0,a.map((function(t,a){return(0,r.Z)("div",{className:"filter__container"},a,(0,r.Z)("div",{className:"filter__details"},void 0,(0,r.Z)("div",{className:"filter__phrase"},void 0,(0,r.Z)("span",{className:"filter__list-label"},void 0,(0,r.Z)(u.Z,{id:"filters.filters_list_phrase_label",defaultMessage:"Keyword or phrase:"})),(0,r.Z)("span",{className:"filter__list-value"},void 0,t.get("phrase"))),(0,r.Z)("div",{className:"filter__contexts"},void 0,(0,r.Z)("span",{className:"filter__list-label"},void 0,(0,r.Z)(u.Z,{id:"filters.filters_list_context_label",defaultMessage:"Filter contexts:"})),(0,r.Z)("span",{className:"filter__list-value"},void 0,t.get("context").map((function(e,t){return(0,r.Z)("span",{className:"context"},t,e)})))),(0,r.Z)("div",{className:"filter__details"},void 0,(0,r.Z)("span",{className:"filter__list-label"},void 0,(0,r.Z)(u.Z,{id:"filters.filters_list_details_label",defaultMessage:"Filter settings:"})),(0,r.Z)("span",{className:"filter__list-value"},void 0,t.get("irreversible")?(0,r.Z)("span",{},void 0,(0,r.Z)(u.Z,{id:"filters.filters_list_drop",defaultMessage:"Drop"})):(0,r.Z)("span",{},void 0,(0,r.Z)(u.Z,{id:"filters.filters_list_hide",defaultMessage:"Hide"})),t.get("whole_word")&&(0,r.Z)("span",{},void 0,(0,r.Z)(u.Z,{id:"filters.filters_list_whole-word",defaultMessage:"Whole word"}))))),(0,r.Z)("div",{className:"filter__delete",role:"button",tabIndex:"0",onClick:e.handleFilterDelete,"data-value":t.get("id"),"aria-label":i.formatMessage(M.delete)},void 0,(0,r.Z)(g.Z,{className:"filter__delete-icon",id:"times",size:40}),(0,r.Z)("span",{className:"filter__delete-label"},void 0,(0,r.Z)(u.Z,{id:"filters.filters_list_delete",defaultMessage:"Delete"}))))}))))},t}(c.ZP),(0,o.Z)(l,"propTypes",{params:d().object.isRequired,dispatch:d().func.isRequired,intl:d().object.isRequired}),s=l))||s)||s}}]);
//# sourceMappingURL=filters-75b3067b809222f0bf6b.chunk.js.map