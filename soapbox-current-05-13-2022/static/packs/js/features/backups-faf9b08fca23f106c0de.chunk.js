"use strict";(self.webpackChunksoapbox_fe=self.webpackChunksoapbox_fe||[]).push([[15],{1087:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var o,a,r,i=n(1821),s=n(1814),c=(n(1),n(6)),u=n.n(c),p=n(5),l=n.n(p),d=n(8),f=n(1815),g=n(584),h=n(3),m=n(473),y=n(21),b=n(1810),_=n(1823),v=(n(7),n(0)),k=n(2),Z=n(146),M=n(465),w=(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),C=["heading","icon","children","active","menu"],O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),t.prototype.render=function(){var e=this.props,t=e.heading,n=e.icon,o=e.children,a=e.active,r=e.menu,s=(0,_.Z)(e,C),c=t&&t.replace(/ /g,"-");return v.createElement(k.sg,(0,b.Z)({"aria-labelledby":c,className:"column--better"},s),(0,i.Z)("div",{className:"column__top"},void 0,t&&(0,i.Z)(M.Z,{icon:n,active:a,type:t,columnHeaderId:c}),r&&(0,i.Z)("div",{className:"column__menu"},void 0,(0,i.Z)(Z.Z,{items:r,icon:"ellipsis-v",size:18,direction:"right"}))),o)},t}(v.PureComponent),j=O,P=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),x=(0,f.vU)({heading:{id:"column.backups",defaultMessage:"Backups"},create:{id:"backups.actions.create",defaultMessage:"Create backup"},emptyMessage:{id:"backups.empty_message",defaultMessage:"No backups found. {action}"},emptyMessageAction:{id:"backups.empty_message.action",defaultMessage:"Create one now?"},pending:{id:"backups.pending",defaultMessage:"Pending"}}),L=(0,h.$j)((function(e){return{backups:e.get("backups").toList().sortBy((function(e){return e.get("inserted_at")}))}}))(a=(0,g.ZP)((r=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,s.Z)(t,"state",{isLoading:!0}),(0,s.Z)(t,"handleCreateBackup",(function(e){t.props.dispatch((0,m.id)()),e.preventDefault()})),(0,s.Z)(t,"makeColumnMenu",(function(){return[{text:t.props.intl.formatMessage(x.create),action:t.handleCreateBackup,icon:n(48)}]})),t}return P(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.dispatch((0,m.xX)()).then((function(){e.setState({isLoading:!1})})).catch((function(){}))},t.prototype.render=function(){var e=this.props,t=e.intl,n=e.backups,o=this.state.isLoading,a=o&&0===n.count(),r=(0,i.Z)("a",{href:"#",onClick:this.handleCreateBackup},void 0,t.formatMessage(x.emptyMessageAction));return(0,i.Z)(j,{icon:"cloud-download",label:t.formatMessage(x.heading),menu:this.makeColumnMenu()},void 0,(0,i.Z)(y.Z,{isLoading:o,showLoading:a,scrollKey:"backups",emptyMessage:t.formatMessage(x.emptyMessage,{action:r})},void 0,n.map((function(e){return(0,i.Z)("div",{className:u()("backup",{"backup--pending":!e.get("processed")})},e.get("id"),e.get("processed")?(0,i.Z)("a",{href:e.get("url"),target:"_blank"},void 0,e.get("inserted_at")):(0,i.Z)("div",{},void 0,t.formatMessage(x.pending),": ",e.get("inserted_at")))}))))},t}(d.ZP),(0,s.Z)(r,"propTypes",{intl:l().object.isRequired}),a=r))||a)||a}}]);
//# sourceMappingURL=backups-faf9b08fca23f106c0de.chunk.js.map