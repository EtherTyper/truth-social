{"version":3,"file":"packs/js/features/hashtag_timeline-150d1b8ce430e67627bd.chunk.js","mappings":"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","sources":["webpack://soapbox-fe/./node_modules/lodash/isEqual.js","webpack://soapbox-fe/./app/soapbox/features/hashtag_timeline/index.js"],"sourcesContent":["var baseIsEqual = require('./_baseIsEqual');\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\n\n\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nmodule.exports = isEqual;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";import _isEqual from\"lodash/isEqual\";var _dec,_class;import\"core-js/modules/web.dom-collections.iterator.js\";import React from'react';import{FormattedMessage}from'react-intl';import{connect}from'react-redux';import{connectHashtagStream}from'../../actions/streaming';import{expandHashtagTimeline,clearTimeline}from'../../actions/timelines';import ColumnHeader from'../../components/column_header';import{Column}from'../../components/ui';import StatusListContainer from'../ui/containers/status_list_container';const mapStateToProps=(state,props)=>({hasUnread:state.getIn(['timelines',\"hashtag:\".concat(props.params.id),'unread'])>0});let HashtagTimeline=(_dec=connect(mapStateToProps),_dec(_class=class HashtagTimeline extends React.PureComponent{constructor(){super(...arguments);_defineProperty(this,\"disconnects\",[]);_defineProperty(this,\"title\",()=>{const title=[\"#\".concat(this.props.params.id)];// TODO: wtf is all this?\n// It exists in Mastodon's codebase, but undocumented\nif(this.additionalFor('any')){title.push(' ',/*#__PURE__*/_jsx(FormattedMessage,{id:\"hashtag.column_header.tag_mode.any\",values:{additional:this.additionalFor('any')},defaultMessage:\"or {additional}\"},\"any\"));}if(this.additionalFor('all')){title.push(' ',/*#__PURE__*/_jsx(FormattedMessage,{id:\"hashtag.column_header.tag_mode.all\",values:{additional:this.additionalFor('all')},defaultMessage:\"and {additional}\"},\"all\"));}if(this.additionalFor('none')){title.push(' ',/*#__PURE__*/_jsx(FormattedMessage,{id:\"hashtag.column_header.tag_mode.none\",values:{additional:this.additionalFor('none')},defaultMessage:\"without {additional}\"},\"none\"));}return title;});_defineProperty(this,\"additionalFor\",mode=>{const{tags}=this.props.params;if(tags&&(tags[mode]||[]).length>0){return tags[mode].map(tag=>tag.value).join('/');}else{return'';}});_defineProperty(this,\"handleLoadMore\",maxId=>{const{id,tags}=this.props.params;this.props.dispatch(expandHashtagTimeline(id,{maxId,tags}));});}_subscribe(dispatch,id){let tags=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};const any=(tags.any||[]).map(tag=>tag.value);const all=(tags.all||[]).map(tag=>tag.value);const none=(tags.none||[]).map(tag=>tag.value);[id,...any].map(tag=>{this.disconnects.push(dispatch(connectHashtagStream(id,tag,status=>{const tags=status.tags.map(tag=>tag.name);return all.filter(tag=>tags.includes(tag)).length===all.length&&none.filter(tag=>tags.includes(tag)).length===0;})));});}_unsubscribe(){this.disconnects.map(disconnect=>disconnect());this.disconnects=[];}componentDidMount(){const{dispatch}=this.props;const{id,tags}=this.props.params;this._subscribe(dispatch,id,tags);dispatch(expandHashtagTimeline(id,{tags}));}componentDidUpdate(prevProps){const{dispatch}=this.props;const{id,tags}=this.props.params;const{id:prevId,tags:prevTags}=prevProps.params;if(id!==prevId||!_isEqual(tags,prevTags)){this._unsubscribe();this._subscribe(dispatch,id,tags);dispatch(clearTimeline(\"hashtag:\".concat(id)));dispatch(expandHashtagTimeline(id,{tags}));}}componentWillUnmount(){this._unsubscribe();}render(){const{hasUnread}=this.props;const{id}=this.props.params;return/*#__PURE__*/_jsx(Column,{label:\"#\".concat(id),transparent:true},void 0,/*#__PURE__*/_jsx(ColumnHeader,{active:hasUnread,title:this.title()}),/*#__PURE__*/_jsx(StatusListContainer,{scrollKey:\"hashtag_timeline\",timelineId:\"hashtag:\".concat(id),onLoadMore:this.handleLoadMore,emptyMessage:/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.hashtag\",defaultMessage:\"There is nothing in this hashtag yet.\"}),divideType:\"space\"}));}})||_class);export{HashtagTimeline as default};"],"names":["baseIsEqual","module","exports","value","other","_class","HashtagTimeline","state","props","hasUnread","getIn","concat","params","id","_dec","arguments","title","additionalFor","push","values","additional","defaultMessage","mode","tags","length","map","tag","join","maxId","dispatch","_subscribe","undefined","any","all","none","disconnects","status","name","filter","includes","_unsubscribe","this","disconnect","componentDidMount","componentDidUpdate","prevProps","prevId","prevTags","componentWillUnmount","render","label","transparent","active","scrollKey","timelineId","onLoadMore","handleLoadMore","emptyMessage","divideType"],"sourceRoot":""}