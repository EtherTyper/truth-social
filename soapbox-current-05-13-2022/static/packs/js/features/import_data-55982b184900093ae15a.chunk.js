"use strict";(self.webpackChunksoapbox_fe=self.webpackChunksoapbox_fe||[]).push([[48],{1086:function(t,e,o){o.r(e),o.d(e,{default:function(){return R}});var s=o(1821),i=o(1814),n=o(5),a=o.n(n),r=o(8),u=o(1815),c=o(584),l=o(3),p=o(17),f=o(9),d=(0,u.vU)({blocksSuccess:{id:"import_data.success.blocks",defaultMessage:"Blocks imported successfully"},followersSuccess:{id:"import_data.success.followers",defaultMessage:"Followers imported successfully"},mutesSuccess:{id:"import_data.success.mutes",defaultMessage:"Mutes imported successfully"}});function m(t,e){return function(o,s){return o({type:"IMPORT_FOLLOWS_REQUEST"}),(0,f.ZP)(s).post("/api/pleroma/follow_import",e).then((function(e){o(p.ZP.success(t.formatMessage(d.followersSuccess))),o({type:"IMPORT_FOLLOWS_SUCCESS",config:e.data})})).catch((function(t){o({type:"IMPORT_FOLLOWS_FAIL",error:t})}))}}function _(t,e){return function(o,s){return o({type:"IMPORT_BLOCKS_REQUEST"}),(0,f.ZP)(s).post("/api/pleroma/blocks_import",e).then((function(e){o(p.ZP.success(t.formatMessage(d.blocksSuccess))),o({type:"IMPORT_BLOCKS_SUCCESS",config:e.data})})).catch((function(t){o({type:"IMPORT_BLOCKS_FAIL",error:t})}))}}function g(t,e){return function(o,s){return o({type:"IMPORT_MUTES_REQUEST"}),(0,f.ZP)(s).post("/api/pleroma/mutes_import",e).then((function(e){o(p.ZP.success(t.formatMessage(d.mutesSuccess))),o({type:"IMPORT_MUTES_SUCCESS",config:e.data})})).catch((function(t){o({type:"IMPORT_MUTES_FAIL",error:t})}))}}var h,b,y,S,M,v=o(14),O=o(24),Z=(o(1),o(2)),w=(h=function(t,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},h(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),P=(0,l.$j)()(b=(0,c.ZP)((y=function(t){function e(){var e=t.apply(this,arguments)||this;return(0,i.Z)(e,"state",{file:null,isLoading:!1}),(0,i.Z)(e,"handleSubmit",(function(t){var o=e.props,s=o.dispatch,i=o.action,n=o.intl,a=new FormData;a.append("list",e.state.file),e.setState({isLoading:!0}),s(i(n,a)).then((function(){e.setState({isLoading:!1})})).catch((function(t){e.setState({isLoading:!1})})),t.preventDefault()})),(0,i.Z)(e,"handleFileChange",(function(t){var o=(t.target.files||[])[0];e.setState({file:o})})),e}return w(e,t),e.prototype.render=function(){var t=this.props,e=t.intl,o=t.messages;return(0,s.Z)(Z.l0,{onSubmit:this.handleSubmit,disabled:this.state.isLoading},void 0,(0,s.Z)(Z.xv,{size:"xl",weight:"bold",tag:"label"},void 0,e.formatMessage(o.input_label)),(0,s.Z)("div",{},void 0,(0,s.Z)("input",{className:"text-black dark:text-white",type:"file",accept:[".csv","text/csv"],onChange:this.handleFileChange,required:!0}),(0,s.Z)(Z.xv,{theme:"muted"},void 0,e.formatMessage(o.input_hint))),(0,s.Z)(Z.iN,{},void 0,(0,s.Z)(Z.zx,{type:"submit",theme:"primary",disabled:this.state.isLoading},void 0,e.formatMessage(o.submit))))},e}(r.ZP),(0,i.Z)(y,"propTypes",{action:a().func.isRequired,messages:a().object.isRequired,dispatch:a().func.isRequired,intl:a().object.isRequired}),b=y))||b)||b,C=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function s(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(s.prototype=o.prototype,new s)}}(),T=(0,u.vU)({heading:{id:"column.import_data",defaultMessage:"Import data"},submit:{id:"import_data.actions.import",defaultMessage:"Import"}}),L=(0,u.vU)({input_label:{id:"import_data.follows_label",defaultMessage:"Follows"},input_hint:{id:"import_data.hints.follows",defaultMessage:"CSV file containing a list of followed accounts"},submit:{id:"import_data.actions.import_follows",defaultMessage:"Import follows"}}),k=(0,u.vU)({input_label:{id:"import_data.blocks_label",defaultMessage:"Blocks"},input_hint:{id:"import_data.hints.blocks",defaultMessage:"CSV file containing a list of blocked accounts"},submit:{id:"import_data.actions.import_blocks",defaultMessage:"Import blocks"}}),I=(0,u.vU)({input_label:{id:"import_data.mutes_label",defaultMessage:"Mutes"},input_hint:{id:"import_data.hints.mutes",defaultMessage:"CSV file containing a list of muted accounts"},submit:{id:"import_data.actions.import_mutes",defaultMessage:"Import mutes"}}),R=(0,l.$j)((function(t){return{features:(0,v.N$)(t.get("instance"))}}))(S=(0,c.ZP)((M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return C(e,t),e.prototype.render=function(){var t=this.props,e=t.intl,o=t.features;return(0,s.Z)(O.Z,{icon:"cloud-upload-alt",label:e.formatMessage(T.heading)},void 0,(0,s.Z)(P,{action:m,messages:L}),(0,s.Z)(P,{action:_,messages:k}),o.importMutes&&(0,s.Z)(P,{action:g,messages:I}))},e}(r.ZP),(0,i.Z)(M,"propTypes",{intl:a().object.isRequired,features:a().object}),S=M))||S)||S}}]);
//# sourceMappingURL=import_data-55982b184900093ae15a.chunk.js.map