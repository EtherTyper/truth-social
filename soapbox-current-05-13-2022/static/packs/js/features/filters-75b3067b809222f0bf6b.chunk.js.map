{"version":3,"file":"packs/js/features/filters-75b3067b809222f0bf6b.chunk.js","mappings":"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","sources":["webpack://soapbox-fe/./app/soapbox/features/filters/index.js"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class,_class2;import\"core-js/modules/web.dom-collections.iterator.js\";import PropTypes from'prop-types';import React from'react';import ImmutablePureComponent from'react-immutable-pure-component';import{defineMessages,injectIntl,FormattedMessage}from'react-intl';import{connect}from'react-redux';import{fetchFilters,createFilter,deleteFilter}from'soapbox/actions/filters';import snackbar from'soapbox/actions/snackbar';import Icon from'soapbox/components/icon';import ScrollableList from'soapbox/components/scrollable_list';import{Button}from'soapbox/components/ui';import{CardHeader,CardTitle,Column,Form,FormActions,FormGroup,Input,Text}from'soapbox/components/ui';import{FieldsGroup,Checkbox}from'soapbox/features/forms';const messages=defineMessages({heading:{\"id\":\"column.filters\",\"defaultMessage\":\"Muted words\"},subheading_add_new:{\"id\":\"column.filters.subheading_add_new\",\"defaultMessage\":\"Add New Filter\"},keyword:{\"id\":\"column.filters.keyword\",\"defaultMessage\":\"Keyword or phrase\"},expires:{\"id\":\"column.filters.expires\",\"defaultMessage\":\"Expire after\"},expires_hint:{\"id\":\"column.filters.expires_hint\",\"defaultMessage\":\"Expiration dates are not currently supported\"},home_timeline:{\"id\":\"column.filters.home_timeline\",\"defaultMessage\":\"Home timeline\"},public_timeline:{\"id\":\"column.filters.public_timeline\",\"defaultMessage\":\"Public timeline\"},notifications:{\"id\":\"column.filters.notifications\",\"defaultMessage\":\"Notifications\"},conversations:{\"id\":\"column.filters.conversations\",\"defaultMessage\":\"Conversations\"},drop_header:{\"id\":\"column.filters.drop_header\",\"defaultMessage\":\"Drop instead of hide\"},drop_hint:{\"id\":\"column.filters.drop_hint\",\"defaultMessage\":\"Filtered posts will disappear irreversibly, even if filter is later removed\"},whole_word_header:{\"id\":\"column.filters.whole_word_header\",\"defaultMessage\":\"Whole word\"},whole_word_hint:{\"id\":\"column.filters.whole_word_hint\",\"defaultMessage\":\"When the keyword or phrase is alphanumeric only, it will only be applied if it matches the whole word\"},add_new:{\"id\":\"column.filters.add_new\",\"defaultMessage\":\"Add New Filter\"},create_error:{\"id\":\"column.filters.create_error\",\"defaultMessage\":\"Error adding filter\"},delete_error:{\"id\":\"column.filters.delete_error\",\"defaultMessage\":\"Error deleting filter\"},subheading_filters:{\"id\":\"column.filters.subheading_filters\",\"defaultMessage\":\"Current Filters\"},delete:{\"id\":\"column.filters.delete\",\"defaultMessage\":\"Delete\"}});// const expirations = {\n//   null: 'Never',\n//   // 3600: '30 minutes',\n//   // 21600: '1 hour',\n//   // 43200: '12 hours',\n//   // 86400 : '1 day',\n//   // 604800: '1 week',\n// };\nconst mapStateToProps=state=>({filters:state.get('filters')});let Filters=(_dec=connect(mapStateToProps),_dec(_class=injectIntl(_class=(_class2=class Filters extends ImmutablePureComponent{constructor(){super(...arguments);_defineProperty(this,\"state\",{phrase:'',expires_at:'',home_timeline:true,public_timeline:false,notifications:false,conversations:false,irreversible:false,whole_word:true});_defineProperty(this,\"handleInputChange\",e=>{this.setState({[e.target.name]:e.target.value});});_defineProperty(this,\"handleSelectChange\",e=>{this.setState({[e.target.name]:e.target.value});});_defineProperty(this,\"handleCheckboxChange\",e=>{this.setState({[e.target.name]:e.target.checked});});_defineProperty(this,\"handleAddNew\",e=>{e.preventDefault();const{intl,dispatch}=this.props;const{phrase,whole_word,expires_at,irreversible}=this.state;const{home_timeline,public_timeline,notifications,conversations}=this.state;const context=[];if(home_timeline){context.push('home');}if(public_timeline){context.push('public');}if(notifications){context.push('notifications');}if(conversations){context.push('thread');}dispatch(createFilter(intl,phrase,expires_at,context,whole_word,irreversible)).then(response=>{return dispatch(fetchFilters());}).catch(error=>{dispatch(snackbar.error(intl.formatMessage(messages.create_error)));});});_defineProperty(this,\"handleFilterDelete\",e=>{const{intl,dispatch}=this.props;dispatch(deleteFilter(intl,e.currentTarget.dataset.value)).then(response=>{return dispatch(fetchFilters());}).catch(error=>{dispatch(snackbar.error(intl.formatMessage(messages.delete_error)));});});}componentDidMount(){this.props.dispatch(fetchFilters());}render(){const{intl,filters}=this.props;const emptyMessage=/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.filters\",defaultMessage:\"You haven't created any muted words yet.\"});return/*#__PURE__*/_jsx(Column,{className:\"filter-settings-panel\",icon:\"filter\",label:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(CardHeader,{},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.subheading_add_new)})),/*#__PURE__*/_jsx(Form,{onSubmit:this.handleAddNew},void 0,/*#__PURE__*/_jsx(FormGroup,{labelText:intl.formatMessage(messages.keyword)},void 0,/*#__PURE__*/_jsx(Input,{required:true,type:\"text\",name:\"phrase\",onChange:this.handleInputChange})),/*#__PURE__*/_jsx(FieldsGroup,{},void 0,/*#__PURE__*/_jsx(Text,{tag:\"label\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.context_header\",defaultMessage:\"Filter contexts\"})),/*#__PURE__*/_jsx(Text,{theme:\"muted\",size:\"xs\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.context_hint\",defaultMessage:\"One or multiple contexts where the filter should apply\"})),/*#__PURE__*/_jsx(\"div\",{className:\"two-col\"},void 0,/*#__PURE__*/_jsx(Checkbox,{label:intl.formatMessage(messages.home_timeline),name:\"home_timeline\",checked:this.state.home_timeline,onChange:this.handleCheckboxChange}),/*#__PURE__*/_jsx(Checkbox,{label:intl.formatMessage(messages.public_timeline),name:\"public_timeline\",checked:this.state.public_timeline,onChange:this.handleCheckboxChange}),/*#__PURE__*/_jsx(Checkbox,{label:intl.formatMessage(messages.notifications),name:\"notifications\",checked:this.state.notifications,onChange:this.handleCheckboxChange}),/*#__PURE__*/_jsx(Checkbox,{label:intl.formatMessage(messages.conversations),name:\"conversations\",checked:this.state.conversations,onChange:this.handleCheckboxChange}))),/*#__PURE__*/_jsx(FieldsGroup,{},void 0,/*#__PURE__*/_jsx(Checkbox,{label:intl.formatMessage(messages.drop_header),hint:intl.formatMessage(messages.drop_hint),name:\"irreversible\",checked:this.state.irreversible,onChange:this.handleCheckboxChange}),/*#__PURE__*/_jsx(Checkbox,{label:intl.formatMessage(messages.whole_word_header),hint:intl.formatMessage(messages.whole_word_hint),name:\"whole_word\",checked:this.state.whole_word,onChange:this.handleCheckboxChange})),/*#__PURE__*/_jsx(FormActions,{},void 0,/*#__PURE__*/_jsx(Button,{type:\"submit\",theme:\"primary\"},void 0,intl.formatMessage(messages.add_new)))),/*#__PURE__*/_jsx(CardHeader,{},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.subheading_filters)})),/*#__PURE__*/_jsx(ScrollableList,{scrollKey:\"filters\",emptyMessage:emptyMessage},void 0,filters.map((filter,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"filter__container\"},i,/*#__PURE__*/_jsx(\"div\",{className:\"filter__details\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"filter__phrase\"},void 0,/*#__PURE__*/_jsx(\"span\",{className:\"filter__list-label\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_phrase_label\",defaultMessage:\"Keyword or phrase:\"})),/*#__PURE__*/_jsx(\"span\",{className:\"filter__list-value\"},void 0,filter.get('phrase'))),/*#__PURE__*/_jsx(\"div\",{className:\"filter__contexts\"},void 0,/*#__PURE__*/_jsx(\"span\",{className:\"filter__list-label\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_context_label\",defaultMessage:\"Filter contexts:\"})),/*#__PURE__*/_jsx(\"span\",{className:\"filter__list-value\"},void 0,filter.get('context').map((context,i)=>/*#__PURE__*/_jsx(\"span\",{className:\"context\"},i,context)))),/*#__PURE__*/_jsx(\"div\",{className:\"filter__details\"},void 0,/*#__PURE__*/_jsx(\"span\",{className:\"filter__list-label\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_details_label\",defaultMessage:\"Filter settings:\"})),/*#__PURE__*/_jsx(\"span\",{className:\"filter__list-value\"},void 0,filter.get('irreversible')?/*#__PURE__*/_jsx(\"span\",{},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_drop\",defaultMessage:\"Drop\"})):/*#__PURE__*/_jsx(\"span\",{},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_hide\",defaultMessage:\"Hide\"})),filter.get('whole_word')&&/*#__PURE__*/_jsx(\"span\",{},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_whole-word\",defaultMessage:\"Whole word\"}))))),/*#__PURE__*/_jsx(\"div\",{className:\"filter__delete\",role:\"button\",tabIndex:\"0\",onClick:this.handleFilterDelete,\"data-value\":filter.get('id'),\"aria-label\":intl.formatMessage(messages.delete)},void 0,/*#__PURE__*/_jsx(Icon,{className:\"filter__delete-icon\",id:\"times\",size:40}),/*#__PURE__*/_jsx(\"span\",{className:\"filter__delete-label\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"filters.filters_list_delete\",defaultMessage:\"Delete\"})))))));}},_defineProperty(_class2,\"propTypes\",{params:PropTypes.object.isRequired,dispatch:PropTypes.func.isRequired,intl:PropTypes.object.isRequired}),_class2))||_class)||_class);export{Filters as default};"],"names":["_class","_class2","messages","heading","subheading_add_new","keyword","expires","expires_hint","home_timeline","public_timeline","notifications","conversations","drop_header","drop_hint","whole_word_header","whole_word_hint","add_new","create_error","delete_error","subheading_filters","delete","Filters","state","filters","get","_dec","arguments","phrase","expires_at","irreversible","whole_word","e","setState","target","name","value","checked","preventDefault","props","intl","dispatch","context","push","then","response","catch","error","formatMessage","currentTarget","dataset","componentDidMount","this","render","emptyMessage","id","defaultMessage","className","icon","label","title","onSubmit","handleAddNew","labelText","required","type","onChange","handleInputChange","tag","theme","size","handleCheckboxChange","hint","scrollKey","map","filter","i","role","tabIndex","onClick","handleFilterDelete","params"],"sourceRoot":""}