{"version":3,"file":"packs/js/features/federation_restrictions-8f190a5b3c61513994b0.chunk.js","mappings":"+JAAiIA,EAAOC,ECAP,EAAO,E,ylBDAiaC,GAAkB,UAAqIC,GAAyB,SAAhH,SAACC,EAAMC,GAAY,MAAM,CAACC,eAAeJ,EAAkBE,EAAMC,EAASE,SAA+DC,EAAaP,EAAO,YAAyD,gCAAuBQ,YAAS,K,OAAE,OAAgB,EAAK,QAAQ,CAACC,UAAS,KAAQ,OAAgB,EAAK,kBAAiB,SAAAC,GAAI,EAAKC,SAAS,CAACF,UAAU,EAAKN,MAAMM,WAAWC,EAAEE,oB,EAA01B,OAA7hC,OAAwN,YAAAC,OAAA,WAAe,IAAAR,EAAgBS,KAAKC,MAAK,eAAON,EAAUK,KAAKX,MAAK,SAAC,OAAmB,OAAK,MAAM,CAACa,UAAU,IAAW,sBAAsB,CAAC,8BAA8BX,EAAeY,MAAM,CAAC,aAAa,WAAW,gCAAgCR,UAAY,GAAoB,OAAK,IAAI,CAACS,KAAK,IAAIF,UAAU,8BAA8BG,QAAQL,KAAKM,qBAAgB,GAAoB,OAAK,MAAM,CAACJ,UAAU,kCAA6B,GAAoB,OAAK,IAAK,CAACK,IAAa,EAATZ,EAAiB,KAA8C,UAAuD,OAAK,MAAM,CAACO,UAAU,kCAA6B,EAAOX,EAAeiB,IAAI,WAAuB,OAAK,MAAM,CAACN,UAAU,0CAAqC,GAAoB,OAAK,IAAqB,CAACX,eAAeA,OAAoB,EAA/jC,CAAkC,OAA+hC,OAAgBL,EAAQ,YAAY,CAACM,KAAK,wBAA1nCP,EAAwpCC,KAAWD,E,0dCAlqCwB,GAAS,QAAe,CAACC,QAAQ,CAAC,GAAK,iCAAiC,eAAiB,2BAA2BC,SAAS,CAAC,GAAK,gDAAgD,eAAiB,8BAA8BC,WAAW,CAAC,GAAK,kDAAkD,eAAiB,4HAA4HC,aAAa,CAAC,GAAK,wCAAwC,eAAiB,iDAAiDC,aAAa,CAAC,GAAK,gDAAgD,eAAiB,4EAAkFC,GAAS,UAAuKC,GAA6B,SAA/J,SAAA3B,GAAO,OAAE4B,UAAU5B,EAAMc,MAAM,CAAC,WAAW,UAAUe,MAAMH,EAAS1B,GAAO8B,WAAU,QAAgC9B,MAAmE,CAAK,GAAO,EAAA+B,EAAA,KAAmB,EAAO,YAA6D,gCAAuB1B,YAAS,K,OAAE,OAAgB,EAAK,QAAQ,CAAC2B,wBAAuB,KAAO,OAAgB,EAAK,wBAAuB,SAAAC,GAAU,EAAKzB,SAAS,CAACwB,uBAAuBC,O,EAAyxB,OAA1+B,OAA+N,YAAAvB,OAAA,WAAc,MAAiCC,KAAKC,MAArCsB,EAAI,OAACL,EAAK,QAACD,EAAS,YAACE,EAAS,YAAmBE,EAAwBrB,KAAKX,MAAK,uBAAOwB,EAAaM,EAAUV,EAASI,aAAaJ,EAASK,aAAa,OAAmB,OAAK,IAAO,CAACU,KAAK,QAAQC,MAAMF,EAAKG,cAAcjB,EAASC,eAAU,GAAoB,OAAK,MAAM,CAACR,UAAU,wBAAmB,GAAoB,OAAK,IAAU,CAACyB,SAASJ,EAAKG,cAAcjB,EAASE,UAAUhB,SAAS0B,EAAuBO,SAAS5B,KAAK6B,2BAAsB,EAAON,EAAKG,cAAcjB,EAASG,WAAW,CAACK,UAAS,OAAkB,OAAK,MAAM,CAACf,UAAU,gCAA2B,GAAoB,OAAK,IAAe,CAACW,aAAaU,EAAKG,cAAcb,EAAa,CAACI,UAAS,UAAI,EAAOC,EAAMY,KAAI,SAAAtC,GAAmB,cAAKJ,EAAmB,CAACI,KAAKA,GAAMA,UAAW,EAAhhC,CAAsC,OAA4+B,OAAgB,EAAQ,YAAY,CAAC+B,KAAK,sBAA4BJ,UAAU,WAAjnC,EAAkoC,KAAW,IAAS,G","sources":["webpack://soapbox-fe/./app/soapbox/features/federation_restrictions/components/restricted_instance.js","webpack://soapbox-fe/./app/soapbox/features/federation_restrictions/index.js"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class,_class2;import\"core-js/modules/web.dom-collections.iterator.js\";import classNames from'classnames';import PropTypes from'prop-types';import React from'react';import ImmutablePureComponent from'react-immutable-pure-component';import{connect}from'react-redux';import Icon from'soapbox/components/icon';import{makeGetRemoteInstance}from'soapbox/selectors';import InstanceRestrictions from'./instance_restrictions';const getRemoteInstance=makeGetRemoteInstance();const mapStateToProps=(state,ownProps)=>{return{remoteInstance:getRemoteInstance(state,ownProps.host)};};let RestrictedInstance=(_dec=connect(mapStateToProps),_dec(_class=(_class2=class RestrictedInstance extends ImmutablePureComponent{constructor(){super(...arguments);_defineProperty(this,\"state\",{expanded:false});_defineProperty(this,\"toggleExpanded\",e=>{this.setState({expanded:!this.state.expanded});e.preventDefault();});}render(){const{remoteInstance}=this.props;const{expanded}=this.state;return/*#__PURE__*/_jsx(\"div\",{className:classNames('restricted-instance',{'restricted-instance--reject':remoteInstance.getIn(['federation','reject']),'restricted-instance--expanded':expanded})},void 0,/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"restricted-instance__header\",onClick:this.toggleExpanded},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"restricted-instance__icon\"},void 0,/*#__PURE__*/_jsx(Icon,{src:expanded?require('@tabler/icons/icons/caret-down.svg'):require('@tabler/icons/icons/caret-right.svg')})),/*#__PURE__*/_jsx(\"div\",{className:\"restricted-instance__host\"},void 0,remoteInstance.get('host'))),/*#__PURE__*/_jsx(\"div\",{className:\"restricted-instance__restrictions\"},void 0,/*#__PURE__*/_jsx(InstanceRestrictions,{remoteInstance:remoteInstance})));}},_defineProperty(_class2,\"propTypes\",{host:PropTypes.string.isRequired}),_class2))||_class);export{RestrictedInstance as default};","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class,_class2;import\"core-js/modules/web.dom-collections.iterator.js\";import PropTypes from'prop-types';import React from'react';import ImmutablePureComponent from'react-immutable-pure-component';import{defineMessages,injectIntl}from'react-intl';import{connect}from'react-redux';import ScrollableList from'soapbox/components/scrollable_list';import Accordion from'soapbox/features/ui/components/accordion';import{makeGetHosts}from'soapbox/selectors';import{federationRestrictionsDisclosed}from'soapbox/utils/state';import Column from'../ui/components/column';import RestrictedInstance from'./components/restricted_instance';const messages=defineMessages({heading:{\"id\":\"column.federation_restrictions\",\"defaultMessage\":\"Federation Restrictions\"},boxTitle:{\"id\":\"federation_restrictions.explanation_box.title\",\"defaultMessage\":\"Instance-specific policies\"},boxMessage:{\"id\":\"federation_restrictions.explanation_box.message\",\"defaultMessage\":\"Normally servers on the Fediverse can communicate freely. {siteTitle} has imposed restrictions on the following servers.\"},emptyMessage:{\"id\":\"federation_restrictions.empty_message\",\"defaultMessage\":\"{siteTitle} has not restricted any instances.\"},notDisclosed:{\"id\":\"federation_restrictions.not_disclosed_message\",\"defaultMessage\":\"{siteTitle} does not disclose federation restrictions through the API.\"}});const getHosts=makeGetHosts();const mapStateToProps=state=>({siteTitle:state.getIn(['instance','title']),hosts:getHosts(state),disclosed:federationRestrictionsDisclosed(state)});let FederationRestrictions=(_dec=connect(mapStateToProps),_dec(_class=injectIntl(_class=(_class2=class FederationRestrictions extends ImmutablePureComponent{constructor(){super(...arguments);_defineProperty(this,\"state\",{explanationBoxExpanded:true});_defineProperty(this,\"toggleExplanationBox\",setting=>{this.setState({explanationBoxExpanded:setting});});}render(){const{intl,hosts,siteTitle,disclosed}=this.props;const{explanationBoxExpanded}=this.state;const emptyMessage=disclosed?messages.emptyMessage:messages.notDisclosed;return/*#__PURE__*/_jsx(Column,{icon:\"gavel\",label:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"explanation-box\"},void 0,/*#__PURE__*/_jsx(Accordion,{headline:intl.formatMessage(messages.boxTitle),expanded:explanationBoxExpanded,onToggle:this.toggleExplanationBox},void 0,intl.formatMessage(messages.boxMessage,{siteTitle}))),/*#__PURE__*/_jsx(\"div\",{className:\"federation-restrictions\"},void 0,/*#__PURE__*/_jsx(ScrollableList,{emptyMessage:intl.formatMessage(emptyMessage,{siteTitle})},void 0,hosts.map(host=>/*#__PURE__*/_jsx(RestrictedInstance,{host:host},host)))));}},_defineProperty(_class2,\"propTypes\",{intl:PropTypes.object.isRequired,disclosed:PropTypes.bool}),_class2))||_class)||_class);export{FederationRestrictions as default};"],"names":["_class","_class2","getRemoteInstance","RestrictedInstance","state","ownProps","remoteInstance","host","_dec","arguments","expanded","e","setState","preventDefault","render","this","props","className","getIn","href","onClick","toggleExpanded","src","get","messages","heading","boxTitle","boxMessage","emptyMessage","notDisclosed","getHosts","FederationRestrictions","siteTitle","hosts","disclosed","injectIntl","explanationBoxExpanded","setting","intl","icon","label","formatMessage","headline","onToggle","toggleExplanationBox","map"],"sourceRoot":""}