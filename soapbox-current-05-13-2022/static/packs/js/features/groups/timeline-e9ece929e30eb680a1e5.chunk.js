"use strict";(self.webpackChunksoapbox_fe=self.webpackChunksoapbox_fe||[]).push([[45],{1035:function(o,t,e){e.r(t),e.d(t,{default:function(){return Z}});var n,r,i=e(1821),s=e(1814),a=e(6),p=e.n(a),u=e(0),c=e(1815),d=e(584),l=e(3),g=e(1811),f=e(76),h=e(2),m=e(258),v=(n=function(o,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])},n(o,t)},function(o,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}n(o,t),o.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),y=(0,c.vU)({title:{id:"groups.form.title",defaultMessage:"Title"},description:{id:"groups.form.description",defaultMessage:"Description"},coverImage:{id:"groups.form.coverImage",defaultMessage:"Upload new banner image (optional)"},coverImageChange:{id:"groups.form.coverImageChange",defaultMessage:"Banner image selected"},update:{id:"groups.form.update",defaultMessage:"Update group"}}),Z=(0,l.$j)((function(o,t){return{group:o.getIn(["groups",t.params.id]),title:o.getIn(["group_editor","title"]),description:o.getIn(["group_editor","description"]),coverImage:o.getIn(["group_editor","coverImage"]),disabled:o.getIn(["group_editor","isSubmitting"])}}),(function(o){return{onTitleChange:function(t){return o((0,m.Se)("title",t))},onDescriptionChange:function(t){return o((0,m.Se)("description",t))},onCoverImageChange:function(t){return o((0,m.Se)("coverImage",t))},onSubmit:function(t){return o((0,m.Ps)(t))},setUp:function(t){return o((0,m.Z_)(t))}}}))(r=(0,d.ZP)(r=(0,g.EN)(r=function(o){function t(t){var e=o.call(this,t)||this;return(0,s.Z)(e,"handleTitleChange",(function(o){e.props.onTitleChange(o.target.value)})),(0,s.Z)(e,"handleDescriptionChange",(function(o){e.props.onDescriptionChange(o.target.value)})),(0,s.Z)(e,"handleCoverImageChange",(function(o){e.props.onCoverImageChange(o.target.files[0])})),(0,s.Z)(e,"handleSubmit",(function(o){o.preventDefault(),e.props.onSubmit(e.props.history)})),(0,s.Z)(e,"handleClick",(function(){e.props.onSubmit(e.props.history)})),t.group&&t.setUp(t.group),e}return v(t,o),t.prototype.componentDidUpdate=function(o){!o.group&&this.props.group&&this.props.setUp(this.props.group)},t.prototype.render=function(){var o=this.props,t=o.group,e=o.title,n=o.description,r=o.coverImage,s=o.disabled,a=o.intl;return void 0===t?(0,i.Z)(h.sg,{},void 0,(0,i.Z)(h.$j,{})):!1===t?(0,i.Z)(f.Z,{}):(0,i.Z)("form",{className:"group-form",method:"post",onSubmit:this.handleSubmit},void 0,(0,i.Z)("div",{},void 0,(0,i.Z)("input",{className:"standard",type:"text",value:e,disabled:s,onChange:this.handleTitleChange,placeholder:a.formatMessage(y.title)})),(0,i.Z)("div",{},void 0,(0,i.Z)("textarea",{className:"standard",type:"text",value:n,disabled:s,onChange:this.handleDescriptionChange,placeholder:a.formatMessage(y.description)})),(0,i.Z)("div",{},void 0,(0,i.Z)("label",{htmlFor:"group_cover_image",className:p()("group-form__file-label",{"group-form__file-label--selected":null!==r})},void 0,a.formatMessage(null===r?y.coverImage:y.coverImageChange)),(0,i.Z)("input",{type:"file",className:"group-form__file",id:"group_cover_image",disabled:s,onChange:this.handleCoverImageChange}),(0,i.Z)("button",{},void 0,a.formatMessage(y.update))))},t}(u.PureComponent))||r)||r)||r},1033:function(o,t,e){e.r(t),e.d(t,{default:function(){return I}});var n,r,i,s=e(1821),a=e(1814),p=e(22),u=e.n(p),c=(e(1),e(5)),d=e.n(c),l=e(10),g=e.n(l),f=e(8),h=e(1827),m=e(3),v=e(2),y=e(160),Z=e(21),_=e(23),b=e(24),M=(n=function(o,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])},n(o,t)},function(o,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}n(o,t),o.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),I=(0,m.$j)((function(o,t){var e=t.params.id;return{group:o.getIn(["groups",e]),accountIds:o.getIn(["user_lists","groups",e,"items"]),hasMore:!!o.getIn(["user_lists","groups",e,"next"])}}))((i=function(o){function t(){var t=o.apply(this,arguments)||this;return(0,a.Z)(t,"handleLoadMore",u()((function(){t.props.dispatch((0,y.BZ)(t.props.params.id))}),300,{leading:!0})),t}return M(t,o),t.prototype.componentDidMount=function(){var o=this.props.params.id;this.props.dispatch((0,y.Mv)(o))},t.prototype.componentDidUpdate=function(o){this.props.params.id!==o.params.id&&this.props.dispatch((0,y.Mv)(this.props.params.id))},t.prototype.render=function(){var o=this.props,t=o.accountIds,e=o.hasMore;return o.group&&t?(0,s.Z)(b.Z,{},void 0,(0,s.Z)(Z.Z,{scrollKey:"members",hasMore:e,onLoadMore:this.handleLoadMore,emptyMessage:(0,s.Z)(h.Z,{id:"group.members.empty",defaultMessage:"This group does not has any members."})},void 0,t.map((function(o){return(0,s.Z)(_.Z,{id:o,withNote:!1},o)})))):(0,s.Z)(b.Z,{},void 0,(0,s.Z)(v.$j,{}))},t}(f.ZP),(0,a.Z)(i,"propTypes",{params:d().object.isRequired,dispatch:d().func.isRequired,accountIds:g().orderedSet,hasMore:d().bool}),r=i))||r},1034:function(o,t,e){e.r(t),e.d(t,{default:function(){return j}});var n,r,i,s=e(1821),a=e(1814),p=e(22),u=e.n(p),c=(e(1),e(5)),d=e.n(c),l=e(10),g=e.n(l),f=e(8),h=e(1827),m=e(1815),v=e(584),y=e(3),Z=e(2),_=e(160),b=e(21),M=e(23),I=e(24),C=(n=function(o,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])},n(o,t)},function(o,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}n(o,t),o.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),w=(0,m.vU)({remove:{id:"groups.removed_accounts",defaultMessage:"Allow joining"}}),j=(0,y.$j)((function(o,t){var e=t.params.id;return{group:o.getIn(["groups",e]),accountIds:o.getIn(["user_lists","groups_removed_accounts",e,"items"]),hasMore:!!o.getIn(["user_lists","groups_removed_accounts",e,"next"])}}))(r=(0,v.ZP)((i=function(o){function t(){var t=o.apply(this,arguments)||this;return(0,a.Z)(t,"handleLoadMore",u()((function(){t.props.dispatch((0,_.M$)(t.props.params.id))}),300,{leading:!0})),(0,a.Z)(t,"handleOnActionClick",(function(o,e){return function(){t.props.dispatch((0,_.Ly)(o.get("id"),e))}})),t}return C(t,o),t.prototype.componentDidMount=function(){var o=this.props.params.id;this.props.dispatch((0,_.Zn)(o))},t.prototype.componentDidUpdate=function(o){this.props.params.id!==o.params.id&&this.props.dispatch((0,_.Zn)(this.props.params.id))},t.prototype.render=function(){var o=this,t=this.props,n=t.accountIds,r=t.hasMore,i=t.group,a=t.intl;return i&&n?(0,s.Z)(I.Z,{},void 0,(0,s.Z)(b.Z,{scrollKey:"removed_accounts",hasMore:r,onLoadMore:this.handleLoadMore,emptyMessage:(0,s.Z)(h.Z,{id:"group.removed_accounts.empty",defaultMessage:"This group does not has any removed accounts."})},void 0,n.map((function(t){return(0,s.Z)(M.Z,{id:t,actionIcon:e(26),onActionClick:o.handleOnActionClick(i,t),actionTitle:a.formatMessage(w.remove)},t)})))):(0,s.Z)(I.Z,{},void 0,(0,s.Z)(Z.$j,{}))},t}(f.ZP),(0,a.Z)(i,"propTypes",{params:d().object.isRequired,dispatch:d().func.isRequired,accountIds:g().orderedSet,hasMore:d().bool}),r=i))||r)||r},1032:function(o,t,e){e.r(t),e.d(t,{default:function(){return _}});var n,r,i=e(1821),s=e(1814),a=(e(1),e(0)),p=e(584),u=e(1827),c=e(3),d=e(970),l=e(2),g=e(807),f=e(44),h=e(28),m=e(40),v=e(76),y=e(170),Z=(n=function(o,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])},n(o,t)},function(o,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}n(o,t),o.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),_=(0,c.$j)((function(o,t){var e=o.get("me");return{account:o.getIn(["accounts",e]),group:o.getIn(["groups",t.params.id]),relationships:o.getIn(["group_relationships",t.params.id]),hasUnread:o.getIn(["timelines","group:".concat(t.params.id),"unread"])>0}}))(r=(0,p.ZP)(r=function(o){function t(){var t=o.apply(this,arguments)||this;return(0,s.Z)(t,"handleLoadMore",(function(o){var e=t.props.params.id;t.props.dispatch((0,h.F0)(e,{maxId:o}))})),t}return Z(t,o),t.prototype.componentDidMount=function(){var o=this.props.dispatch,t=this.props.params.id;o((0,h.F0)(t)),this.disconnect=o((0,f.iZ)(t))},t.prototype.componentWillUnmount=function(){this.disconnect&&(this.disconnect(),this.disconnect=null)},t.prototype.render=function(){var o=this.props,t=o.columnId,e=o.group,n=o.relationships,r=o.account,s=this.props.params.id;if(void 0===e||!n)return(0,i.Z)(l.sg,{},void 0,(0,i.Z)(l.$j,{}));if(!1===e)return(0,i.Z)(v.Z,{});var a=r?r.get("acct"):"";return(0,i.Z)("div",{},void 0,n.get("member")&&(0,i.Z)("div",{className:"timeline-compose-block"},void 0,(0,i.Z)(d.rU,{className:"timeline-compose-block__avatar",to:"/@".concat(a)},void 0,(0,i.Z)(m.Z,{account:r,size:46})),(0,i.Z)(g.Z,{group:e,shouldCondense:!0,autoFocus:!1})),(0,i.Z)("div",{className:"group__feed"},void 0,(0,i.Z)(y.Z,{alwaysPrepend:!0,scrollKey:"group_timeline-".concat(t),timelineId:"group:".concat(s),onLoadMore:this.handleLoadMore,group:e,withGroupAdmin:n&&n.get("admin"),emptyMessage:(0,i.Z)(u.Z,{id:"empty_column.group",defaultMessage:"There is nothing in this group yet. When members of this group make new posts, they will appear here."})})))},t}(a.PureComponent))||r)||r}}]);
//# sourceMappingURL=timeline-e9ece929e30eb680a1e5.chunk.js.map