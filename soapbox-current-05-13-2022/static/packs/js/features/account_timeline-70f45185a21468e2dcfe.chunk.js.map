{"version":3,"file":"packs/js/features/account_timeline-70f45185a21468e2dcfe.chunk.js","mappings":"8JAAiIA,EAAOC,E,0nBAA2oFC,GAAsB,SAA9lD,WAAK,IAAMC,GAAa,UAAmhD,OAA1+C,SAACC,EAAMC,GAAY,IAAAC,EAA0BD,EAAI,OAAvB,EAAmBA,EAAI,YAAvBE,OAAW,OAAM,EAAaC,EAASF,EAAOE,UAAU,GAASC,EAAGL,EAAMM,IAAI,MAAYC,GAAmBP,EAAMQ,MAAM,CAAC,YAAY,EAAE,cAAc,IAAIC,gBAAgBL,EAASK,cAAoBC,GAAc,QAAiBV,GAAaW,GAAS,QAAYX,EAAMM,IAAI,aAAiBM,GAAW,EAAMC,EAAQ,KAASC,EAAgBV,EAAaW,EAAY,KAAQR,EAAmBK,EAAU,MAAyDA,GAA9CC,GAAQ,QAAsBb,EAAMI,IAA4BS,EAAQL,MAAM,CAAC,MAAM,OAAO,EAAEM,EAAgBD,EAAQA,EAAQL,MAAM,CAAC,QAAQ,IAAI,GAAGO,EAAYF,EAAQA,EAAQP,IAAI,OAAO,IAAI,IAAMU,EAAKb,EAAY,GAAGc,OAAOL,EAAU,iBAAiBA,EAAgBM,EAAUlB,EAAMQ,MAAM,CAAC,gBAAgBI,EAAU,eAAc,GAAaO,EAAYd,IAAKO,GAAgBM,IAAYP,EAASS,gBAAsBC,GAAS,QAAYrB,GAAOQ,MAAM,CAAC,mBAAmB,QAAQ,aAAaL,EAAY,MAAM,CAACS,UAAS,EAACO,YAAW,EAACL,gBAAe,EAACC,YAAW,EAACG,UAAS,EAACL,QAAO,EAACS,YAAYtB,EAAMQ,MAAM,CAAC,WAAWI,IAAYW,UAAUxB,EAAaC,EAAM,CAACwB,KAAK,WAAWP,OAAOD,GAAMS,OAAO,qBAAqBC,kBAAkBL,EAAStB,EAAaC,EAAM,CAACwB,KAAK,WAAWP,OAAOL,EAAU,WAAWa,OAAO,sBAAqB,kBAAsBE,UAAU3B,EAAMQ,MAAM,CAAC,YAAY,WAAWS,OAAOD,GAAM,cAAcY,QAAQ5B,EAAMQ,MAAM,CAAC,YAAY,WAAWS,OAAOD,GAAM,YAAYX,GAAE,EAACwB,cAAcnB,EAAcF,MAAM,CAAC,aAAa,SAAS,gBAA+FsB,EAAajC,EAAO,YAAsD,gCAAuBkC,YAAS,K,OAAE,OAAgB,EAAK,kBAAiB,SAAAC,GAAW,EAAKC,MAAMrB,YAAmC,IAAxB,EAAKqB,MAAMrB,WAAgB,EAAKqB,MAAMC,UAAS,QAAsB,EAAKD,MAAMrB,UAAU,CAACoB,MAAK,EAAC7B,YAAY,EAAK8B,MAAM9B,kB,EAAquE,OAA79E,OAA4Q,YAAAgC,kBAAA,WAAyB,MAAuEC,KAAKH,MAAnE7B,EAAQ,kBAAEQ,EAAS,YAACG,EAAW,cAACZ,EAAW,cAACE,EAAE,KAACwB,EAAa,gBAAgBjB,IAAwB,IAAbA,GAAgBwB,KAAKH,MAAMC,UAAS,QAAatB,IAAeP,GAAG+B,KAAKH,MAAMC,UAAS,QAA2BtB,IAAgBT,GAAaiC,KAAKH,MAAMC,UAAS,QAA8BtB,IAAgBiB,GAAed,GAAaqB,KAAKH,MAAMC,UAAS,QAAmBnB,IAAeqB,KAAKH,MAAMC,UAAS,QAAsBtB,EAAU,CAACT,YAAW,MAAUiC,KAAKH,MAAMC,UAAS,QAAuB9B,KAAa,YAAAiC,mBAAA,SAAmBC,GAAgB,MAAuEF,KAAKH,MAAnE7B,EAAQ,kBAAEC,EAAE,KAACO,EAAS,YAACT,EAAW,cAACY,EAAW,cAACc,EAAa,gBAAgBjB,IAAwB,IAAbA,GAAgBA,IAAY0B,EAAU1B,WAAWT,IAAcmC,EAAUnC,aAAaiC,KAAKH,MAAMC,UAAS,QAAatB,IAAeP,GAAG+B,KAAKH,MAAMC,UAAS,QAA2BtB,IAAgBT,GAAaiC,KAAKH,MAAMC,UAAS,QAA8BtB,IAAgBiB,GAAed,GAAaqB,KAAKH,MAAMC,UAAS,QAAmBnB,IAAeqB,KAAKH,MAAMC,UAAS,QAAsBtB,EAAU,CAACT,YAAW,MAAaC,GAAUA,IAAWkC,EAAUpC,OAAOE,UAAUgC,KAAKH,MAAMC,UAAS,QAAuB9B,KAAa,YAAAmC,OAAA,WAAc,MAA0GH,KAAKH,MAA9GV,EAAS,YAACG,EAAiB,oBAACC,EAAS,YAACC,EAAO,UAACV,EAAS,YAACI,EAAS,YAACV,EAAS,YAACO,EAAW,cAACL,EAAe,kBAAa,OAAIQ,IAAwB,IAAbV,GAAyF,IAAbA,IAAiBW,GAAWI,GAA8B,OAAK,KAAQ,IAAQR,GAAgC,OAAK,KAAK,QAAG,GAAoB,OAAK,KAAS,QAAG,GAAoB,OAAK,KAAK,CAACqB,MAAM,eAAU,EAAOtB,GAAuB,OAAK,IAAiB,CAACuB,GAAG,+BAA+BC,eAAe,yCAAyCC,OAAO,CAAC7B,gBAAgBA,MAAgC,OAAK,IAAiB,CAAC2B,GAAG,mCAAmCC,eAAe,4BAA+C,OAAK,IAAW,CAACE,UAAU,mBAAmBrB,UAAUA,EAAUG,kBAAkBA,EAAkBC,UAAUA,EAAUC,QAAQA,EAAQiB,WAAWT,KAAKU,eAAeC,cAA0B,OAAK,IAAiB,CAACN,GAAG,gCAAgCC,eAAe,sBAAv0B,OAAK,IAAiB,CAACM,QAAO,KAA+zB,EAA5/E,CAA+B,OAA+9E,OAAgBnD,EAAQ,YAAY,CAACK,OAAO,sBAA4BgC,SAAS,oBAA0BX,UAAU,eAA8BG,kBAAkB,eAA8BC,UAAU,SAAeC,QAAQ,SAAezB,YAAY,SAAemB,UAAU,SAAeH,YAAY,WAAh0FvB,EAAi1FC,KAAWD,G,8GCAjyKqD,EAAU,SAAAC,GAAO,OAACA,EAAMC,MAAM,mBAAmB,IAAI,IAAyDC,GAAS,QAAe,CAACC,eAAe,CAAC,GAAK,2BAA2B,eAAiB,gDAAgDC,eAAe,CAAC,GAAK,sBAAsB,eAAiB,iGAAiGC,YAAY,CAAC,GAAK,sBAAsB,eAAiB,eAAeC,IAAI,CAAC,GAAK,qBAAqB,eAAiB,SAAeC,EAAkB,CAACC,MAAM,QAAQC,IAAI,UAAUC,KAAK,UAAUC,QAAO,EAAMC,KAAK,UAAUC,OAAO,WAAuDC,EAAa,SAAA/D,GAAW,IAAroBiD,EAAqoBe,EAAOhE,EAAI,MAAOiE,GAAK,SAAU,OAAtqBhB,EAAkrBe,EAAME,KAAjrBC,QAAQnB,EAAUC,KAAyrB,OAAK,IAAgB,CAACmB,eAAe,WAAe,GAAO,SAAAC,GAAwB,cAAKA,EAAU,CAACC,OAAOtB,EAAUgB,EAAME,MAAM1D,cAAc+D,QAAQP,EAAMQ,kBAAmC,OAAK,KAAK,QAAG,GAAoB,OAAK,KAAK,CAACC,MAAMT,EAAME,WAAM,GAAoB,OAAK,KAAK,CAACQ,OAAO,OAAOC,IAAI,OAAOC,wBAAwB,CAACC,OAAOb,EAAMc,oBAAgC,OAAK,KAAK,CAACC,UAAU,IAAW,CAAC,mBAAmBf,EAAMgB,cAAcP,MAAMT,EAAMQ,kBAAa,GAAoB,OAAK,KAAO,CAACS,MAAM,EAAEC,WAAW,eAAU,EAAOlB,EAAMgB,cAA0B,OAAK,OAAO,CAACD,UAAU,YAAYN,MAAMR,EAAKkB,cAAchC,EAASC,eAAe,CAACgC,KAAKnB,EAAKoB,WAAWrB,EAAMgB,YAAYxB,WAAsB,GAAoB,OAAK,KAAK,CAAC8B,IAAI,EAAQ,SAAiD,OAAK,KAAK,CAACX,IAAI,OAAOC,wBAAwB,CAACC,OAAOb,EAAMuB,uBAAqY,UAA3S,SAAAC,GAAY,IAAA5E,EAAS4E,EAAK,QAAC,OAAmB,OAAK,KAAO,CAACf,OAAmB,OAAK,IAAiB,CAACjC,GAAG,6BAA6BC,eAAe,yBAAoB,GAAoB,OAAK,KAAM,CAACwC,MAAM,QAAG,EAAOrE,EAAQ6E,OAAOC,KAAI,SAAC1B,EAAM2B,GAAiB,cAAK5B,EAAa,CAACC,MAAMA,GAAO2B,U,qICAhpDxC,GAAS,QAAe,CAACC,eAAe,CAAC,GAAK,2BAA2B,eAAiB,gDAAgDC,eAAe,CAAC,GAAK,sBAAsB,eAAiB,iGAAiGC,YAAY,CAAC,GAAK,sBAAsB,eAAiB,eAAeC,IAAI,CAAC,GAAK,qBAAqB,eAAiB,SAAwlJ,UAA1/I,SAAAvD,GAAW,IAAAY,EAAkBZ,EAAI,QAAdG,EAAUH,EAAI,SAAOiE,GAAK,SAAgB2B,GAAY,UAAkB,WAA68C,IAAIhF,EAAS,OAAmB,OAAK,MAAM,CAACmE,UAAU,oCAA+B,GAAoB,OAAK,KAAM,CAACE,MAAM,QAAG,GAAoB,OAAK,KAAM,QAAG,GAAoB,OAAK,KAAO,CAACA,MAAM,EAAEC,WAAW,eAAU,GAAoB,OAAK,KAAK,CAACW,KAAK,KAAKC,MAAM,cAAS,EAAO,IAAI3F,OAAe,IAAM4F,EAAQ,CAAClB,OAAOjE,EAAQoF,gBAAsFC,EAAX,IAAxCrF,EAAQsF,QAAQ7F,IAAI,aAAY,GAA+C,CAACwE,OAAOZ,EAAKkB,cAAchC,EAASG,cAAc,CAACuB,OAAOjE,EAAQuF,mBAAyBC,EAAgBnC,EAAKoB,WAAWzE,EAAQyF,WAAW,CAAC5C,MAAM,OAAOE,KAAK,YAAkB2C,EAAS1F,EAAQ0F,SAAeC,EAA/xD,WAAK,IAAMC,EAA/S5F,MAAAA,GAAkCA,EAAQ6F,OAA0B,OAAK,IAAM,CAACC,KAAK,QAAQjC,MAAM,SAAS,SAAkB7D,MAAAA,GAAkCA,EAAQ+F,WAA8B,OAAK,IAAM,CAACD,KAAK,YAAYjC,MAAM,aAAa,SAAsB,KAAoEmC,GAAiD,IAAxChG,EAAQL,MAAM,CAAC,SAAS,cAA2BgG,EAAO,GAAqO,OAA/NC,GAAYD,EAAOM,KAAKL,GAAgBI,GAAUL,EAAOM,MAAkB,OAAK,IAAM,CAACH,KAAK,SAASjC,MAAM,UAAU,WAAe7D,EAAQkG,OAAOP,EAAOM,MAAkB,OAAK,IAAM,CAACH,KAAK,QAAQjC,MAAM,SAAS,UAAkB8B,EAA28CQ,GAAY,OAAmB,OAAK,MAAM,CAAChC,UAAU,oCAA+B,GAAoB,OAAK,KAAM,CAACE,MAAM,QAAG,GAAoB,OAAK,KAAM,QAAG,GAAoB,OAAK,KAAO,CAACA,MAAM,EAAEC,WAAW,eAAU,GAAoB,OAAK,KAAK,CAACW,KAAK,KAAKnB,OAAO,OAAOE,wBAAwBqB,IAAkBK,IAAuB,OAAK,IAAkB,IAAI1F,EAAQ2C,MAAkB,OAAK,IAAM,CAACmD,KAAK,MAAMjC,MAAMR,EAAKkB,cAAchC,EAASI,OAAOgD,EAAOS,OAAO,IAAgB,OAAK,KAAO,CAAC/B,MAAM,EAAEC,WAAW,eAAU,EAAOqB,KAAsB,OAAK,KAAO,CAACrB,WAAW,SAASD,MAAM,SAAK,GAAoB,OAAK,KAAK,CAACY,KAAK,KAAKC,MAAM,cAAS,EAAO,IAAIF,EAAWhF,EAAQqG,IAAIrG,EAAQsG,MAAMtG,EAAQuG,SAAqB,OAAK,KAAK,CAAC7B,IAAI,EAAQ,KAAgC8B,IAAInD,EAAKkB,cAAchC,EAASE,gBAAgB0B,UAAU,6BAAyC,OAAK,IAAa,CAACnE,QAAQA,IAAUA,EAAQyG,KAAKL,OAAO,GAAkB,YAAfpG,EAAQyG,OAA+B,OAAK,KAAK,CAACxB,KAAK,KAAKjB,wBAAwBmB,KAAuB,OAAK,MAAM,CAAChB,UAAU,iFAA4E,GAAO,QAAQnE,IAAsB,OAAK,KAAO,CAACsE,WAAW,SAASD,MAAM,SAAK,GAAoB,OAAK,KAAK,CAACK,IAAI,EAAQ,KAAoCP,UAAU,8CAA0D,OAAK,KAAK,CAACc,KAAK,WAAM,GAAoB,OAAK,IAAiB,CAACrD,GAAG,uBAAuBC,eAAe,gBAAgBC,OAAO,CAAC0C,KAAKgB,OAAqB,KAAKxF,EAAQ0G,UAAsB,OAAK,KAAO,CAACpC,WAAW,SAASD,MAAM,SAAK,GAAoB,OAAK,KAAK,CAACK,IAAI,EAAQ,KAAmCP,UAAU,8CAA0D,OAAK,KAAK,CAACc,KAAK,WAAM,EAAOjF,EAAQ0G,WAAW,KAAK1G,EAAQ2G,SAAqB,OAAK,KAAO,CAACrC,WAAW,SAASD,MAAM,SAAK,GAAoB,OAAK,KAAK,CAACK,IAAI,EAAQ,KAAgCP,UAAU,8CAA0D,OAAK,MAAM,CAACA,UAAU,sBAAiB,GAAoB,OAAK,KAAK,CAACc,KAAK,KAAK2B,UAAS,QAAM,EAAl4J,SAAAC,GAAO,IAAI,IAAMC,EAAI,IAAIC,IAAIF,GAAM,MAAM,CAAC,QAAQ,UAAUG,SAASF,EAAIG,UAAW,MAAMC,GAAG,OAAO,GAAqyJC,CAAUnH,EAAQ2G,UAAsB,OAAK,IAAI,CAACxC,UAAU,yDAAyDiD,KAAKpH,EAAQ2G,QAAQU,OAAO,eAAU,EAAOrH,EAAQ2G,SAAS3G,EAAQ2G,WAAW,KAA1sH,WAAK,IAAMW,EAAStH,EAAQsH,SAAS,IAAIA,EAAS,OAAO,KAAK,IAAMC,EAAkBlE,EAAKoB,WAAW6C,EAAS,CAACE,SAAS,MAAM1E,IAAI,UAAUD,MAAM,OAAOE,KAAK,YAAkByB,EAAK,IAAIiD,KAAKH,GAAgBI,EAAM,IAAID,KAAaE,EAAYnD,EAAKoD,YAAYF,EAAME,WAAWpD,EAAKqD,aAAaH,EAAMG,WAAW,OAAmB,OAAK,KAAO,CAACvD,WAAW,SAASD,MAAM,SAAK,GAAoB,OAAK,KAAK,CAACK,IAAI,EAAQ,KAAkCP,UAAU,8CAA0D,OAAK,KAAK,CAACc,KAAK,WAAM,EAAO0C,GAAyB,OAAK,IAAiB,CAAC/F,GAAG,yBAAyBC,eAAe,wBAAoC,OAAK,IAAiB,CAACD,GAAG,mBAAmBC,eAAe,cAAcC,OAAO,CAAC0C,KAAK+C,OAAq9FO,Q","sources":["webpack://soapbox-fe/./app/soapbox/features/account_timeline/index.js","webpack://soapbox-fe/./app/soapbox/features/ui/components/profile_fields_panel.tsx","webpack://soapbox-fe/./app/soapbox/features/ui/components/profile_info_panel.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class,_class2;import\"core-js/modules/web.dom-collections.iterator.js\";import{OrderedSet as ImmutableOrderedSet}from'immutable';import PropTypes from'prop-types';import React from'react';import ImmutablePropTypes from'react-immutable-proptypes';import ImmutablePureComponent from'react-immutable-pure-component';import{FormattedMessage}from'react-intl';import{connect}from'react-redux';import{getSettings}from'soapbox/actions/settings';import{getSoapboxConfig}from'soapbox/actions/soapbox';import MissingIndicator from'soapbox/components/missing_indicator';import{makeGetStatusIds,findAccountByUsername}from'soapbox/selectors';import{getFeatures}from'soapbox/utils/features';import{fetchAccount,fetchAccountByUsername}from'../../actions/accounts';import{fetchAccountIdentityProofs}from'../../actions/identity_proofs';import{fetchPatronAccount}from'../../actions/patron';import{expandAccountFeaturedTimeline,expandAccountTimeline}from'../../actions/timelines';import StatusList from'../../components/status_list';import{Card,CardBody,Spinner,Text}from'../../components/ui';const makeMapStateToProps=()=>{const getStatusIds=makeGetStatusIds();const mapStateToProps=(state,_ref)=>{let{params,withReplies=false}=_ref;const username=params.username||'';const me=state.get('me');const accountFetchError=(state.getIn(['accounts',-1,'username'])||'').toLowerCase()===username.toLowerCase();const soapboxConfig=getSoapboxConfig(state);const features=getFeatures(state.get('instance'));let accountId=-1;let account=null;let accountUsername=username;let accountApId=null;if(accountFetchError){accountId=null;}else{account=findAccountByUsername(state,username);accountId=account?account.getIn(['id'],null):-1;accountUsername=account?account.getIn(['acct'],''):'';accountApId=account?account.get('url'):'';}const path=withReplies?\"\".concat(accountId,\":with_replies\"):accountId;const isBlocked=state.getIn(['relationships',accountId,'blocked_by'],false);const unavailable=me===accountId?false:isBlocked&&!features.blockersVisible;const showPins=getSettings(state).getIn(['account_timeline','shows','pinned'])&&!withReplies;return{accountId,unavailable,accountUsername,accountApId,isBlocked,account,isAccount:!!state.getIn(['accounts',accountId]),statusIds:getStatusIds(state,{type:\"account:\".concat(path),prefix:'account_timeline'}),featuredStatusIds:showPins?getStatusIds(state,{type:\"account:\".concat(accountId,\":pinned\"),prefix:'account_timeline'}):ImmutableOrderedSet(),isLoading:state.getIn(['timelines',\"account:\".concat(path),'isLoading']),hasMore:state.getIn(['timelines',\"account:\".concat(path),'hasMore']),me,patronEnabled:soapboxConfig.getIn(['extensions','patron','enabled'])};};return mapStateToProps;};let AccountTimeline=(_dec=connect(makeMapStateToProps),_dec(_class=(_class2=class AccountTimeline extends ImmutablePureComponent{constructor(){super(...arguments);_defineProperty(this,\"handleLoadMore\",maxId=>{if(this.props.accountId&&this.props.accountId!==-1){this.props.dispatch(expandAccountTimeline(this.props.accountId,{maxId,withReplies:this.props.withReplies}));}});}componentDidMount(){const{params:{username},accountId,accountApId,withReplies,me,patronEnabled}=this.props;if(accountId&&accountId!==-1){this.props.dispatch(fetchAccount(accountId));if(me)this.props.dispatch(fetchAccountIdentityProofs(accountId));if(!withReplies){this.props.dispatch(expandAccountFeaturedTimeline(accountId));}if(patronEnabled&&accountApId){this.props.dispatch(fetchPatronAccount(accountApId));}this.props.dispatch(expandAccountTimeline(accountId,{withReplies}));}else{this.props.dispatch(fetchAccountByUsername(username));}}componentDidUpdate(prevProps){const{params:{username},me,accountId,withReplies,accountApId,patronEnabled}=this.props;if(accountId&&accountId!==-1&&accountId!==prevProps.accountId||withReplies!==prevProps.withReplies){this.props.dispatch(fetchAccount(accountId));if(me)this.props.dispatch(fetchAccountIdentityProofs(accountId));if(!withReplies){this.props.dispatch(expandAccountFeaturedTimeline(accountId));}if(patronEnabled&&accountApId){this.props.dispatch(fetchPatronAccount(accountApId));}this.props.dispatch(expandAccountTimeline(accountId,{withReplies}));}else if(username&&username!==prevProps.params.username){this.props.dispatch(fetchAccountByUsername(username));}}render(){const{statusIds,featuredStatusIds,isLoading,hasMore,isBlocked,isAccount,accountId,unavailable,accountUsername}=this.props;if(!isAccount&&accountId!==-1){return/*#__PURE__*/_jsx(MissingIndicator,{nested:true});}if(accountId===-1||!statusIds&&isLoading){return/*#__PURE__*/_jsx(Spinner,{});}if(unavailable){return/*#__PURE__*/_jsx(Card,{},void 0,/*#__PURE__*/_jsx(CardBody,{},void 0,/*#__PURE__*/_jsx(Text,{align:\"center\"},void 0,isBlocked?/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.account_blocked\",defaultMessage:\"You are blocked by @{accountUsername}.\",values:{accountUsername:accountUsername}}):/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.account_unavailable\",defaultMessage:\"Profile unavailable\"}))));}return/*#__PURE__*/_jsx(StatusList,{scrollKey:\"account_timeline\",statusIds:statusIds,featuredStatusIds:featuredStatusIds,isLoading:isLoading,hasMore:hasMore,onLoadMore:this.handleLoadMore,emptyMessage:/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.account_timeline\",defaultMessage:\"No posts here!\"})});}},_defineProperty(_class2,\"propTypes\",{params:PropTypes.object.isRequired,dispatch:PropTypes.func.isRequired,statusIds:ImmutablePropTypes.orderedSet,featuredStatusIds:ImmutablePropTypes.orderedSet,isLoading:PropTypes.bool,hasMore:PropTypes.bool,withReplies:PropTypes.bool,isAccount:PropTypes.bool,unavailable:PropTypes.bool}),_class2))||_class);export{AccountTimeline as default};","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import classNames from'classnames';import React from'react';import{defineMessages,useIntl,FormattedMessage}from'react-intl';import{Widget,Stack,HStack,Icon,Text}from'soapbox/components/ui';import BundleContainer from'soapbox/features/ui/containers/bundle_container';import{CryptoAddress}from'soapbox/features/ui/util/async-components';const getTicker=value=>(value.match(/\\$([a-zA-Z]*)/i)||[])[1];const isTicker=value=>Boolean(getTicker(value));const messages=defineMessages({linkVerifiedOn:{\"id\":\"account.link_verified_on\",\"defaultMessage\":\"Ownership of this link was checked on {date}\"},account_locked:{\"id\":\"account.locked_info\",\"defaultMessage\":\"This account privacy status is set to locked. The owner manually reviews who can follow them.\"},deactivated:{\"id\":\"account.deactivated\",\"defaultMessage\":\"Deactivated\"},bot:{\"id\":\"account.badges.bot\",\"defaultMessage\":\"Bot\"}});const dateFormatOptions={month:'short',day:'numeric',year:'numeric',hour12:false,hour:'2-digit',minute:'2-digit'};/** Renders a single profile field. */const ProfileField=_ref=>{let{field}=_ref;const intl=useIntl();if(isTicker(field.name)){return/*#__PURE__*/_jsx(BundleContainer,{fetchComponent:CryptoAddress},void 0,Component=>/*#__PURE__*/_jsx(Component,{ticker:getTicker(field.name).toLowerCase(),address:field.value_plain}));}return/*#__PURE__*/_jsx(\"dl\",{},void 0,/*#__PURE__*/_jsx(\"dt\",{title:field.name},void 0,/*#__PURE__*/_jsx(Text,{weight:\"bold\",tag:\"span\",dangerouslySetInnerHTML:{__html:field.name_emojified}})),/*#__PURE__*/_jsx(\"dd\",{className:classNames({'text-success-500':field.verified_at}),title:field.value_plain},void 0,/*#__PURE__*/_jsx(HStack,{space:2,alignItems:\"center\"},void 0,field.verified_at&&/*#__PURE__*/_jsx(\"span\",{className:\"flex-none\",title:intl.formatMessage(messages.linkVerifiedOn,{date:intl.formatDate(field.verified_at,dateFormatOptions)})},void 0,/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/icons/check.svg')})),/*#__PURE__*/_jsx(Text,{tag:\"span\",dangerouslySetInnerHTML:{__html:field.value_emojified}}))));};/** Custom profile fields for sidebar. */const ProfileFieldsPanel=_ref2=>{let{account}=_ref2;return/*#__PURE__*/_jsx(Widget,{title:/*#__PURE__*/_jsx(FormattedMessage,{id:\"profile_fields_panel.title\",defaultMessage:\"Profile fields\"})},void 0,/*#__PURE__*/_jsx(Stack,{space:4},void 0,account.fields.map((field,i)=>/*#__PURE__*/_jsx(ProfileField,{field:field},i))));};export default ProfileFieldsPanel;","'use strict';import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import\"core-js/modules/web.url.js\";import React from'react';import{defineMessages,useIntl,FormattedMessage}from'react-intl';import Badge from'soapbox/components/badge';import{Icon,HStack,Stack,Text}from'soapbox/components/ui';import VerificationBadge from'soapbox/components/verification_badge';import{useSoapboxConfig}from'soapbox/hooks';import{isLocal}from'soapbox/utils/accounts';import ProfileStats from'./profile_stats';/** Basically ensure the URL isn't `javascript:alert('hi')` or something like that */const isSafeUrl=text=>{try{const url=new URL(text);return['http:','https:'].includes(url.protocol);}catch(e){return false;}};const messages=defineMessages({linkVerifiedOn:{\"id\":\"account.link_verified_on\",\"defaultMessage\":\"Ownership of this link was checked on {date}\"},account_locked:{\"id\":\"account.locked_info\",\"defaultMessage\":\"This account privacy status is set to locked. The owner manually reviews who can follow them.\"},deactivated:{\"id\":\"account.deactivated\",\"defaultMessage\":\"Deactivated\"},bot:{\"id\":\"account.badges.bot\",\"defaultMessage\":\"Bot\"}});/** User profile metadata, such as location, birthday, etc. */const ProfileInfoPanel=_ref=>{let{account,username}=_ref;const intl=useIntl();const{displayFqn}=useSoapboxConfig();const getStaffBadge=()=>{if(account!==null&&account!==void 0&&account.admin){return/*#__PURE__*/_jsx(Badge,{slug:\"admin\",title:\"Admin\"},\"staff\");}else if(account!==null&&account!==void 0&&account.moderator){return/*#__PURE__*/_jsx(Badge,{slug:\"moderator\",title:\"Moderator\"},\"staff\");}else{return null;}};const getBadges=()=>{const staffBadge=getStaffBadge();const isPatron=account.getIn(['patron','is_patron'])===true;const badges=[];if(staffBadge){badges.push(staffBadge);}if(isPatron){badges.push(/*#__PURE__*/_jsx(Badge,{slug:\"patron\",title:\"Patron\"},\"patron\"));}if(account.donor){badges.push(/*#__PURE__*/_jsx(Badge,{slug:\"donor\",title:\"Donor\"},\"donor\"));}return badges;};const renderBirthday=()=>{const birthday=account.birthday;if(!birthday)return null;const formattedBirthday=intl.formatDate(birthday,{timeZone:'UTC',day:'numeric',month:'long',year:'numeric'});const date=new Date(birthday);const today=new Date();const hasBirthday=date.getDate()===today.getDate()&&date.getMonth()===today.getMonth();return/*#__PURE__*/_jsx(HStack,{alignItems:\"center\",space:0.5},void 0,/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/icons/ballon.svg'),className:\"w-4 h-4 text-gray-800 dark:text-gray-200\"}),/*#__PURE__*/_jsx(Text,{size:\"sm\"},void 0,hasBirthday?/*#__PURE__*/_jsx(FormattedMessage,{id:\"account.birthday_today\",defaultMessage:\"Birthday is today!\"}):/*#__PURE__*/_jsx(FormattedMessage,{id:\"account.birthday\",defaultMessage:\"Born {date}\",values:{date:formattedBirthday}})));};if(!account){return/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 min-w-0 flex-1 sm:px-2\"},void 0,/*#__PURE__*/_jsx(Stack,{space:2},void 0,/*#__PURE__*/_jsx(Stack,{},void 0,/*#__PURE__*/_jsx(HStack,{space:1,alignItems:\"center\"},void 0,/*#__PURE__*/_jsx(Text,{size:\"sm\",theme:\"muted\"},void 0,\"@\",username)))));}const content={__html:account.note_emojified};const deactivated=!account.pleroma.get('is_active',true)===true;const displayNameHtml=deactivated?{__html:intl.formatMessage(messages.deactivated)}:{__html:account.display_name_html};const memberSinceDate=intl.formatDate(account.created_at,{month:'long',year:'numeric'});const verified=account.verified;const badges=getBadges();return/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 min-w-0 flex-1 sm:px-2\"},void 0,/*#__PURE__*/_jsx(Stack,{space:2},void 0,/*#__PURE__*/_jsx(Stack,{},void 0,/*#__PURE__*/_jsx(HStack,{space:1,alignItems:\"center\"},void 0,/*#__PURE__*/_jsx(Text,{size:\"lg\",weight:\"bold\",dangerouslySetInnerHTML:displayNameHtml}),verified&&/*#__PURE__*/_jsx(VerificationBadge,{}),account.bot&&/*#__PURE__*/_jsx(Badge,{slug:\"bot\",title:intl.formatMessage(messages.bot)}),badges.length>0&&/*#__PURE__*/_jsx(HStack,{space:1,alignItems:\"center\"},void 0,badges)),/*#__PURE__*/_jsx(HStack,{alignItems:\"center\",space:0.5},void 0,/*#__PURE__*/_jsx(Text,{size:\"sm\",theme:\"muted\"},void 0,\"@\",displayFqn?account.fqn:account.acct),account.locked&&/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/icons/lock.svg'),alt:intl.formatMessage(messages.account_locked),className:\"w-4 h-4 text-gray-600\"}))),/*#__PURE__*/_jsx(ProfileStats,{account:account}),account.note.length>0&&account.note!=='<p></p>'&&/*#__PURE__*/_jsx(Text,{size:\"sm\",dangerouslySetInnerHTML:content}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col md:flex-row items-start md:flex-wrap md:items-center gap-2\"},void 0,isLocal(account)?/*#__PURE__*/_jsx(HStack,{alignItems:\"center\",space:0.5},void 0,/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/icons/calendar.svg'),className:\"w-4 h-4 text-gray-800 dark:text-gray-200\"}),/*#__PURE__*/_jsx(Text,{size:\"sm\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"account.member_since\",defaultMessage:\"Joined {date}\",values:{date:memberSinceDate}}))):null,account.location?/*#__PURE__*/_jsx(HStack,{alignItems:\"center\",space:0.5},void 0,/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/icons/map-pin.svg'),className:\"w-4 h-4 text-gray-800 dark:text-gray-200\"}),/*#__PURE__*/_jsx(Text,{size:\"sm\"},void 0,account.location)):null,account.website?/*#__PURE__*/_jsx(HStack,{alignItems:\"center\",space:0.5},void 0,/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/icons/link.svg'),className:\"w-4 h-4 text-gray-800 dark:text-gray-200\"}),/*#__PURE__*/_jsx(\"div\",{className:\"max-w-[300px]\"},void 0,/*#__PURE__*/_jsx(Text,{size:\"sm\",truncate:true},void 0,isSafeUrl(account.website)?/*#__PURE__*/_jsx(\"a\",{className:\"text-primary-600 dark:text-primary-400 hover:underline\",href:account.website,target:\"_blank\"},void 0,account.website):account.website))):null,renderBirthday())));};export default ProfileInfoPanel;"],"names":["_class","_class2","AccountTimeline","getStatusIds","state","_ref","params","withReplies","username","me","get","accountFetchError","getIn","toLowerCase","soapboxConfig","features","accountId","account","accountUsername","accountApId","path","concat","isBlocked","unavailable","blockersVisible","showPins","isAccount","statusIds","type","prefix","featuredStatusIds","isLoading","hasMore","patronEnabled","_dec","arguments","maxId","props","dispatch","componentDidMount","this","componentDidUpdate","prevProps","render","align","id","defaultMessage","values","scrollKey","onLoadMore","handleLoadMore","emptyMessage","nested","getTicker","value","match","messages","linkVerifiedOn","account_locked","deactivated","bot","dateFormatOptions","month","day","year","hour12","hour","minute","ProfileField","field","intl","name","Boolean","fetchComponent","Component","ticker","address","value_plain","title","weight","tag","dangerouslySetInnerHTML","__html","name_emojified","className","verified_at","space","alignItems","formatMessage","date","formatDate","src","value_emojified","_ref2","fields","map","i","displayFqn","size","theme","content","note_emojified","displayNameHtml","pleroma","display_name_html","memberSinceDate","created_at","verified","badges","staffBadge","admin","slug","moderator","isPatron","push","donor","getBadges","length","fqn","acct","locked","alt","note","location","website","truncate","text","url","URL","includes","protocol","e","isSafeUrl","href","target","birthday","formattedBirthday","timeZone","Date","today","hasBirthday","getDate","getMonth","renderBirthday"],"sourceRoot":""}