"use strict";(self.webpackChunksoapbox_fe=self.webpackChunksoapbox_fe||[]).push([[26],{1126:function(e,t,a){a.r(t),a.d(t,{default:function(){return k}});var r,s,o,n=a(1821),i=a(1814),l=(a(1),a(602)),d=a(5),c=a.n(d),p=a(10),u=a.n(p),g=a(8),f=a(1815),v=a(584),Z=a(1827),h=a(3),m=a(603),y=a(604),b=a(24),_=a(38),x=a(14),w=a(2),S=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),M=(0,f.vU)({heading:{id:"column.app_create",defaultMessage:"Create app"},namePlaceholder:{id:"app_create.name_placeholder",defaultMessage:"e.g. 'Soapbox'"},scopesPlaceholder:{id:"app_create.scopes_placeholder",defaultMessage:"e.g. 'read write follow'"}}),k=(0,h.$j)((function(e){var t=e.get("me"),a=e.getIn(["accounts",t]),r=e.get("instance");return{account:a,defaultScopes:(0,x.N$)(r).scopes}}))(s=(0,v.ZP)((o=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,i.Z)(t,"initialState",(function(){return{params:(0,l.Map)({client_name:"",redirect_uris:"urn:ietf:wg:oauth:2.0:oob",scopes:"",website:""}),app:null,token:null,isLoading:!1}})),(0,i.Z)(t,"state",t.initialState()),(0,i.Z)(t,"handleCreateApp",(function(){var e=t.props,a=e.dispatch,r=e.account,s=t.state.params,o=(0,_.BS)(r);return a((0,m.ri)(s.toJS(),o)).then((function(e){return t.setState({app:e})}))})),(0,i.Z)(t,"handleCreateToken",(function(){var e=t.props,a=e.dispatch,r=e.account,s=t.state,o=s.app,n=s.params,i=(0,_.BS)(r),l={client_id:o.client_id,client_secret:o.client_secret,redirect_uri:n.get("redirect_uri"),grant_type:"client_credentials",scope:n.get("scopes")};return a((0,y.eQ)(l,i)).then((function(e){return t.setState({token:e})}))})),(0,i.Z)(t,"handleSubmit",(function(e){t.setState({isLoading:!0}),t.handleCreateApp().then(t.handleCreateToken).then((function(){t.scrollToTop(),t.setState({isLoading:!1})})).catch((function(e){console.error(e),t.setState({isLoading:!1})}))})),(0,i.Z)(t,"setParam",(function(e,a){var r=t.state.params.set(e,a);t.setState({params:r})})),(0,i.Z)(t,"handleParamChange",(function(e){return function(a){t.setParam(e,a.target.value)}})),(0,i.Z)(t,"resetState",(function(){t.setState(t.initialState())})),(0,i.Z)(t,"handleReset",(function(e){t.resetState(),t.scrollToTop()})),(0,i.Z)(t,"scrollToTop",(function(){window.scrollTo({top:0,behavior:"smooth"})})),(0,i.Z)(t,"renderResults",(function(){var e=t.props.intl,a=t.state,r=a.app,s=a.token;return(0,n.Z)(b.Z,{label:e.formatMessage(M.heading),backHref:"/developers"},void 0,(0,n.Z)(w.l0,{},void 0,(0,n.Z)(w.Kq,{},void 0,(0,n.Z)(w.xv,{size:"lg",weight:"medium"},void 0,(0,n.Z)(Z.Z,{id:"app_create.results.explanation_title",defaultMessage:"App created successfully"})),(0,n.Z)(w.xv,{theme:"muted"},void 0,(0,n.Z)(Z.Z,{id:"app_create.results.explanation_text",defaultMessage:"You created a new app and token! Please copy the credentials somewhere; you will not see them again after navigating away from this page."}))),(0,n.Z)(w.cw,{labelText:(0,n.Z)(Z.Z,{id:"app_create.results.app_label",defaultMessage:"App"})},void 0,(0,n.Z)(w.gx,{value:JSON.stringify(r,null,2),rows:10,readOnly:!0,isCodeEditor:!0})),(0,n.Z)(w.cw,{labelText:(0,n.Z)(Z.Z,{id:"app_create.results.token_label",defaultMessage:"OAuth token"})},void 0,(0,n.Z)(w.gx,{value:JSON.stringify(s,null,2),rows:10,readOnly:!0,isCodeEditor:!0})),(0,n.Z)(w.iN,{},void 0,(0,n.Z)(w.zx,{theme:"primary",type:"button",onClick:t.handleReset},void 0,(0,n.Z)(Z.Z,{id:"app_create.restart",defaultMessage:"Create another"})))))})),t}return S(t,e),t.prototype.render=function(){var e=this.props.intl,t=this.state,a=t.params,r=t.app,s=t.token,o=t.isLoading;return r&&s?this.renderResults():(0,n.Z)(b.Z,{label:e.formatMessage(M.heading),backHref:"/developers"},void 0,(0,n.Z)(w.l0,{onSubmit:this.handleSubmit},void 0,(0,n.Z)(w.cw,{labelText:(0,n.Z)(Z.Z,{id:"app_create.name_label",defaultMessage:"App name"})},void 0,(0,n.Z)(w.II,{placeholder:e.formatMessage(M.namePlaceholder),onChange:this.handleParamChange("client_name"),value:a.get("client_name"),required:!0})),(0,n.Z)(w.cw,{labelText:(0,n.Z)(Z.Z,{id:"app_create.website_label",defaultMessage:"Website"})},void 0,(0,n.Z)(w.II,{placeholder:"https://soapbox.pub",onChange:this.handleParamChange("website"),value:a.get("website")})),(0,n.Z)(w.cw,{labelText:(0,n.Z)(Z.Z,{id:"app_create.redirect_uri_label",defaultMessage:"Redirect URIs"})},void 0,(0,n.Z)(w.II,{placeholder:"https://example.com",onChange:this.handleParamChange("redirect_uris"),value:a.get("redirect_uris"),required:!0})),(0,n.Z)(w.cw,{labelText:(0,n.Z)(Z.Z,{id:"app_create.scopes_label",defaultMessage:"Scopes"})},void 0,(0,n.Z)(w.II,{placeholder:e.formatMessage(M.scopesPlaceholder),onChange:this.handleParamChange("scopes"),value:a.get("scopes"),required:!0})),(0,n.Z)(w.iN,{},void 0,(0,n.Z)(w.zx,{theme:"primary",type:"submit",disabled:o},void 0,(0,n.Z)(Z.Z,{id:"app_create.submit",defaultMessage:"Create app"})))))},t}(g.ZP),(0,i.Z)(o,"propTypes",{intl:c().object.isRequired,dispatch:c().func.isRequired,account:u().record.isRequired,defaultScopes:c().string}),s=o))||s)||s},1125:function(e,t,a){a.r(t),a.d(t,{default:function(){return _}});var r=a(1821),s=a(12),o=a(4),n=(a(1),a(0)),i=a(1815),l=a(583),d=a(1827),c=a(3),p=a(17),u=a(2),g=a(24),f=(0,i.vU)({heading:{id:"column.developers",defaultMessage:"Developers"},answerLabel:{id:"developers.challenge.answer_label",defaultMessage:"Answer"},answerPlaceholder:{id:"developers.challenge.answer_placeholder",defaultMessage:"Your answer"},success:{id:"developers.challenge.success",defaultMessage:"You are now a developer"},fail:{id:"developers.challenge.fail",defaultMessage:"Wrong answer"}}),v=function(){var e=(0,c.I0)(),t=(0,l.Z)(),a=(0,n.useState)(""),o=a[0],i=a[1];return(0,r.Z)(g.Z,{label:t.formatMessage(f.heading)},void 0,(0,r.Z)(u.l0,{onSubmit:function(){"boxsoap"===o?(e((0,s.yD)(["isDeveloper"],!0)),e(p.ZP.success(t.formatMessage(f.success)))):e(p.ZP.error(t.formatMessage(f.fail)))}},void 0,(0,r.Z)(u.xv,{},void 0,(0,r.Z)(d.Z,{id:"developers.challenge.message",defaultMessage:"What is the result of calling {function}?",values:{function:(0,r.Z)("span",{className:"font-mono"},void 0,"soapbox()")}})),(0,r.Z)(u.xv,{tag:"pre",family:"mono"},void 0,"function soapbox() {\n  return 'soap|box'.split('|').reverse().join('');\n}"),(0,r.Z)(u.cw,{labelText:t.formatMessage(f.answerLabel)},void 0,(0,r.Z)(u.II,{name:"answer",placeholder:t.formatMessage(f.answerPlaceholder),onChange:function(e){i(e.target.value)},value:o,type:"text"})),(0,r.Z)(u.iN,{},void 0,(0,r.Z)(u.zx,{theme:"primary",type:"submit"},void 0,(0,r.Z)(d.Z,{id:"developers.challenge.submit",defaultMessage:"Become a developer"})))))},Z=a(970),h=a(1811),m=a(79),y=(0,i.vU)({heading:{id:"column.developers",defaultMessage:"Developers"},leave:{id:"developers.leave",defaultMessage:"You have left developers"}}),b=function(){var e=(0,c.I0)(),t=(0,h.k6)(),o=(0,l.Z)();return(0,r.Z)(g.Z,{label:o.formatMessage(y.heading)},void 0,(0,r.Z)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2"},void 0,(0,r.Z)(Z.rU,{to:"/developers/apps/create",className:"bg-gray-200 dark:bg-gray-600 p-4 rounded flex flex-col items-center justify-center space-y-2 hover:-translate-y-1 transition-transform"},void 0,(0,r.Z)(m.Z,{src:a(1804),className:"dark:text-gray-100"}),(0,r.Z)(u.xv,{},void 0,(0,r.Z)(d.Z,{id:"developers.navigation.app_create_label",defaultMessage:"Create an app"}))),(0,r.Z)(Z.rU,{to:"/developers/settings_store",className:"bg-gray-200 dark:bg-gray-600 p-4 rounded flex flex-col items-center justify-center space-y-2 hover:-translate-y-1 transition-transform"},void 0,(0,r.Z)(m.Z,{src:a(1805),className:"dark:text-gray-100"}),(0,r.Z)(u.xv,{},void 0,(0,r.Z)(d.Z,{id:"developers.navigation.settings_store_label",defaultMessage:"Settings store"}))),(0,r.Z)(Z.rU,{to:"/developers/timeline",className:"bg-gray-200 dark:bg-gray-600 p-4 rounded flex flex-col items-center justify-center space-y-2 hover:-translate-y-1 transition-transform"},void 0,(0,r.Z)(m.Z,{src:a(515),className:"dark:text-gray-100"}),(0,r.Z)(u.xv,{},void 0,(0,r.Z)(d.Z,{id:"developers.navigation.test_timeline_label",defaultMessage:"Test timeline"}))),(0,r.Z)(Z.rU,{to:"/error",className:"bg-gray-200 dark:bg-gray-600 p-4 rounded flex flex-col items-center justify-center space-y-2 hover:-translate-y-1 transition-transform"},void 0,(0,r.Z)(m.Z,{src:a(1806),className:"dark:text-gray-100"}),(0,r.Z)(u.xv,{},void 0,(0,r.Z)(d.Z,{id:"developers.navigation.intentional_error_label",defaultMessage:"Trigger an error"}))),(0,r.Z)(Z.rU,{to:"/error/network",className:"bg-gray-200 dark:bg-gray-600 p-4 rounded flex flex-col items-center justify-center space-y-2 hover:-translate-y-1 transition-transform"},void 0,(0,r.Z)(m.Z,{src:a(463),className:"dark:text-gray-100"}),(0,r.Z)(u.xv,{},void 0,(0,r.Z)(d.Z,{id:"developers.navigation.network_error_label",defaultMessage:"Network error"}))),(0,r.Z)("button",{onClick:function(a){a.preventDefault(),e((0,s.yD)(["isDeveloper"],!1)),e(p.ZP.success(o.formatMessage(y.leave))),t.push("/")},className:"bg-gray-200 dark:bg-gray-600 p-4 rounded flex flex-col items-center justify-center space-y-2 hover:-translate-y-1 transition-transform"},void 0,(0,r.Z)(m.Z,{src:a(407),className:"dark:text-gray-100"}),(0,r.Z)(u.xv,{},void 0,(0,r.Z)(d.Z,{id:"developers.navigation.leave_developers_label",defaultMessage:"Leave developers"})))))},_=function(){return(0,o.CG)((function(e){return(0,s.Gw)(e).get("isDeveloper")}))?(0,r.Z)(b,{}):(0,r.Z)(v,{})}},1127:function(e,t,a){a.r(t),a.d(t,{default:function(){return M}});var r,s,o,n=a(1821),i=a(1814),l=(a(1),a(5)),d=a.n(l),c=a(10),p=a.n(c),u=a(8),g=a(1815),f=a(584),v=a(1827),Z=a(3),h=a(77),m=a(42),y=a(12),b=a(24),_=a(2),x=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),w=function(e){try{return JSON.parse(e),!0}catch(e){return!1}},S=(0,g.vU)({heading:{id:"column.settings_store",defaultMessage:"Settings store"},hint:{id:"developers.settings_store.hint",defaultMessage:"It is possible to directly edit your user settings here. BE CAREFUL! Editing this section can break your account, and you will only be able to recover through the API."}}),M=(0,Z.$j)((function(e){return{settingsStore:e.get("settings")}}))(s=(0,f.ZP)((o=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,i.Z)(t,"state",{rawJSON:JSON.stringify(t.props.settingsStore,null,2),jsonValid:!0,isLoading:!1}),(0,i.Z)(t,"handleEditJSON",(function(e){var a=e.target.value;t.setState({rawJSON:a,jsonValid:w(a)})})),(0,i.Z)(t,"handleSubmit",(function(e){var a,r=t.props.dispatch,s=t.state.rawJSON,o=JSON.parse(s);t.setState({isLoading:!0}),r((0,m.sQ)({pleroma_settings_store:(a={},a[y.v1]=o,a)})).then((function(e){r({type:y.Y8,settings:o}),t.setState({isLoading:!1})})).catch((function(e){r((0,h.yg)(e)),t.setState({isLoading:!1})}))})),t}return x(t,e),t.prototype.componentDidUpdate=function(e){var t=this.props.settingsStore;t!==e.settingsStore&&this.setState({rawJSON:JSON.stringify(t,null,2),jsonValid:!0})},t.prototype.render=function(){var e=this.props.intl,t=this.state,a=t.rawJSON,r=t.jsonValid,s=t.isLoading;return(0,n.Z)(b.Z,{label:e.formatMessage(S.heading),backHref:"/developers"},void 0,(0,n.Z)(_.l0,{onSubmit:this.handleSubmit},void 0,(0,n.Z)(_.cw,{hintText:e.formatMessage(S.hint),errors:r?[]:["is invalid"]},void 0,(0,n.Z)(_.gx,{value:a,onChange:this.handleEditJSON,disabled:s,rows:12,isCodeEditor:!0})),(0,n.Z)(_.iN,{},void 0,(0,n.Z)(_.zx,{theme:"primary",type:"submit",disabled:!r||s},void 0,(0,n.Z)(v.Z,{id:"soapbox_config.save",defaultMessage:"Save"})))))},t}(u.ZP),(0,i.Z)(o,"propTypes",{intl:d().object.isRequired,dispatch:d().func.isRequired,settingsStore:p().map.isRequired}),s=o))||s)||s},1804:function(e,t,a){e.exports=a.p+"packs/icons/apps-076fd39c.svg"},1805:function(e,t,a){e.exports=a.p+"packs/icons/code-plus-890aad81.svg"},1806:function(e,t,a){e.exports=a.p+"packs/icons/mood-sad-fff5a232.svg"}}]);
//# sourceMappingURL=developers-a962ea4597f352e9cc79.chunk.js.map