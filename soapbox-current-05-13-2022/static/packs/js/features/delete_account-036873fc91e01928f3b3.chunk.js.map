{"version":3,"file":"packs/js/features/delete_account-036873fc91e01928f3b3.chunk.js","mappings":"wMAAmeA,GAAS,QAAe,CAACC,mBAAmB,CAAC,GAAK,iCAAiC,eAAiB,YAAYC,aAAa,CAAC,GAAK,0BAA0B,eAAiB,kBAAkBC,WAAW,CAAC,GAAK,uBAAuB,eAAiB,iSAAiSC,aAAa,CAAC,GAAK,yBAAyB,eAAiB,kBAAkBC,qBAAqB,CAAC,GAAK,kCAAkC,eAAiB,iCAAiCC,kBAAkB,CAAC,GAAK,+BAA+B,eAAiB,8BAA45C,UAA12C,WAAK,IAAMC,GAAK,SAAgBC,GAAS,UAAsB,EAAuB,WAAe,IAArCC,EAAQ,KAACC,EAAW,KAA0B,EAAuB,YAAe,GAArCC,EAAS,KAACC,EAAU,KAA8BC,EAAkB,eAAkB,SAAAC,GAAQA,EAAMC,UAAUL,EAAYI,EAAME,OAAOC,SAAS,IAAUC,EAAa,eAAkB,WAAKN,GAAW,GAAMJ,GAAS,QAAcD,EAAKE,IAAWU,MAAK,WAAKT,EAAY,IAAIF,EAAS,aAAiBD,EAAKa,cAAcpB,EAASK,2BAA2BgB,SAAQ,WAAKT,GAAW,MAAUU,OAAM,WAAKZ,EAAY,IAAIF,EAAS,WAAeD,EAAKa,cAAcpB,EAASM,0BAA0B,CAACG,EAASD,EAASD,IAAO,OAAmB,OAAK,KAAK,CAACgB,QAAQ,gBAAW,GAAoB,OAAK,KAAW,CAACC,SAAS,kBAAa,GAAoB,OAAK,KAAU,CAACC,MAAMlB,EAAKa,cAAcpB,EAASE,kBAA8B,OAAK,KAAS,QAAG,GAAoB,OAAK,IAAI,CAACwB,UAAU,2BAAsB,EAAOnB,EAAKa,cAAcpB,EAASG,cAA0B,OAAK,KAAK,CAACwB,SAAST,QAAc,GAAoB,OAAK,KAAU,CAACU,UAAUrB,EAAKa,cAAcpB,EAASC,0BAAqB,GAAoB,OAAK,KAAM,CAAC4B,KAAK,WAAWC,KAAK,WAAWC,SAASlB,EAAkBI,MAAMR,MAAyB,OAAK,KAAY,QAAG,GAAoB,OAAK,KAAO,CAACoB,KAAK,SAASG,MAAM,SAASC,SAAStB,QAAW,EAAOJ,EAAKa,cAAcpB,EAASI","sources":["webpack://soapbox-fe/./app/soapbox/features/delete_account/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import\"core-js/modules/es.promise.finally.js\";import*as React from'react';import{defineMessages,useIntl}from'react-intl';import{deleteAccount}from'soapbox/actions/security';import snackbar from'soapbox/actions/snackbar';import{Button,Card,CardBody,CardHeader,CardTitle,Form,FormActions,FormGroup,Input}from'soapbox/components/ui';import{useAppDispatch}from'soapbox/hooks';const messages=defineMessages({passwordFieldLabel:{\"id\":\"security.fields.password.label\",\"defaultMessage\":\"Password\"},deleteHeader:{\"id\":\"security.headers.delete\",\"defaultMessage\":\"Delete Account\"},deleteText:{\"id\":\"security.text.delete\",\"defaultMessage\":\"To delete your account, enter your password then click Delete Account. This is a permanent action that cannot be undone. Your account will be destroyed from this server, and a deletion request will be sent to other servers. It's not guaranteed that all servers will purge your account.\"},deleteSubmit:{\"id\":\"security.submit.delete\",\"defaultMessage\":\"Delete Account\"},deleteAccountSuccess:{\"id\":\"security.delete_account.success\",\"defaultMessage\":\"Account successfully deleted.\"},deleteAccountFail:{\"id\":\"security.delete_account.fail\",\"defaultMessage\":\"Account deletion failed.\"}});const DeleteAccount=()=>{const intl=useIntl();const dispatch=useAppDispatch();const[password,setPassword]=React.useState('');const[isLoading,setLoading]=React.useState(false);const handleInputChange=React.useCallback(event=>{event.persist();setPassword(event.target.value);},[]);const handleSubmit=React.useCallback(()=>{setLoading(true);dispatch(deleteAccount(intl,password)).then(()=>{setPassword('');dispatch(snackbar.success(intl.formatMessage(messages.deleteAccountSuccess)));}).finally(()=>{setLoading(false);}).catch(()=>{setPassword('');dispatch(snackbar.error(intl.formatMessage(messages.deleteAccountFail)));});},[password,dispatch,intl]);return/*#__PURE__*/_jsx(Card,{variant:\"rounded\"},void 0,/*#__PURE__*/_jsx(CardHeader,{backHref:\"/settings\"},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.deleteHeader)})),/*#__PURE__*/_jsx(CardBody,{},void 0,/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 mb-4\"},void 0,intl.formatMessage(messages.deleteText)),/*#__PURE__*/_jsx(Form,{onSubmit:handleSubmit},void 0,/*#__PURE__*/_jsx(FormGroup,{labelText:intl.formatMessage(messages.passwordFieldLabel)},void 0,/*#__PURE__*/_jsx(Input,{type:\"password\",name:\"password\",onChange:handleInputChange,value:password})),/*#__PURE__*/_jsx(FormActions,{},void 0,/*#__PURE__*/_jsx(Button,{type:\"submit\",theme:\"danger\",disabled:isLoading},void 0,intl.formatMessage(messages.deleteSubmit))))));};export default DeleteAccount;"],"names":["messages","passwordFieldLabel","deleteHeader","deleteText","deleteSubmit","deleteAccountSuccess","deleteAccountFail","intl","dispatch","password","setPassword","isLoading","setLoading","handleInputChange","event","persist","target","value","handleSubmit","then","formatMessage","finally","catch","variant","backHref","title","className","onSubmit","labelText","type","name","onChange","theme","disabled"],"sourceRoot":""}