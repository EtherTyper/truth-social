"use strict";(self.webpackChunksoapbox_fe=self.webpackChunksoapbox_fe||[]).push([[59],{962:function(e,t,o){o.r(t),o.d(t,{default:function(){return k}});var n,i,s,a=o(1821),l=o(1814),r=(o(1),o(0)),c=o(1815),p=o(584),d=o(1827),u=o(3),h=o(970),f=o(12),m=o(253),g=o(228),y=o(44),_=o(28),v=o(2),Z=o(495),x=o(170),M=o(34),b=o(624),w=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),B=(0,c.vU)({close:{id:"lightbox.close",defaultMessage:"Close"}}),C=(0,p.ZP)(i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),t.prototype.render=function(){var e=this.props,t=e.intl,n=e.settings,i=e.onChange,s=e.onClose;return(0,a.Z)("div",{className:"column-settings"},void 0,(0,a.Z)("div",{className:"column-settings__header"},void 0,(0,a.Z)("h1",{className:"column-settings__title"},void 0,(0,a.Z)(d.Z,{id:"public.column_settings.title",defaultMessage:"Fediverse timeline settings"})),(0,a.Z)("div",{className:"column-settings__close"},void 0,(0,a.Z)(M.Z,{title:t.formatMessage(B.close),src:o(26),onClick:s}))),(0,a.Z)("div",{className:"column-settings__content"},void 0,(0,a.Z)("div",{className:"column-settings__row"},void 0,(0,a.Z)(b.Z,{prefix:"public_timeline",settings:n,settingPath:["shows","reblog"],onChange:i,label:(0,a.Z)(d.Z,{id:"home.column_settings.show_reblogs",defaultMessage:"Show reposts"})})),(0,a.Z)("div",{className:"column-settings__row"},void 0,(0,a.Z)(b.Z,{prefix:"public_timeline",settings:n,settingPath:["shows","reply"],onChange:i,label:(0,a.Z)(d.Z,{id:"home.column_settings.show_replies",defaultMessage:"Show replies"})})),(0,a.Z)("div",{className:"column-settings__row"},void 0,(0,a.Z)(b.Z,{settings:n,settingPath:["other","onlyMedia"],onChange:i,label:(0,a.Z)(d.Z,{id:"community.column_settings.media_only",defaultMessage:"Media Only"})}))))},t}(r.PureComponent))||i,E=(0,u.$j)((function(e){return{settings:(0,f.Gw)(e).get("public")}}),(function(e){return{onChange:function(t,o){e((0,f.oz)(function(e,t,o){if(o||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}(["public"],t,!0),o))}}}))(C),P=function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},e(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),O=(0,c.vU)({title:{id:"column.public",defaultMessage:"Fediverse timeline"},dismiss:{id:"fediverse_tab.explanation_box.dismiss",defaultMessage:"Don't show again"}}),k=(0,u.$j)((function(e){var t=(0,f.Gw)(e),o=t.getIn(["public","other","onlyMedia"]),n="public";return{timelineId:n,onlyMedia:o,hasUnread:e.getIn(["timelines","".concat(n).concat(o?":media":""),"unread"])>0,siteTitle:e.getIn(["instance","title"]),explanationBoxExpanded:t.get("explanationBox"),showExplanationBox:t.get("showExplanationBox")}}))(s=(0,p.ZP)(s=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,l.Z)(t,"explanationBoxMenu",(function(){return[{text:t.props.intl.formatMessage(O.dismiss),action:t.dismissExplanationBox}]})),(0,l.Z)(t,"dismissExplanationBox",(function(){t.props.dispatch((0,f.oz)(["showExplanationBox"],!1))})),(0,l.Z)(t,"toggleExplanationBox",(function(e){t.props.dispatch((0,f.oz)(["explanationBox"],e))})),(0,l.Z)(t,"handleLoadMore",(function(e){var o=t.props,n=o.dispatch,i=o.onlyMedia;n((0,_.a1)({maxId:e,onlyMedia:i}))})),(0,l.Z)(t,"handleRefresh",(function(){var e=t.props,o=e.dispatch,n=e.onlyMedia;return o((0,_.a1)({onlyMedia:n}))})),t}return P(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.dispatch,o=e.onlyMedia;t((0,_.a1)({onlyMedia:o})),this.disconnect=t((0,y._B)({onlyMedia:o}))},t.prototype.componentDidUpdate=function(e){if(e.onlyMedia!==this.props.onlyMedia){var t=this.props,o=t.dispatch,n=t.onlyMedia;this.disconnect(),o((0,_.a1)({onlyMedia:n})),this.disconnect=o((0,y._B)({onlyMedia:n}))}},t.prototype.componentWillUnmount=function(){this.disconnect&&(this.disconnect(),this.disconnect=null)},t.prototype.render=function(){var e=this.props,t=e.intl,o=e.onlyMedia,n=e.timelineId,i=e.siteTitle,s=e.showExplanationBox,l=e.explanationBoxExpanded;return(0,a.Z)(v.sg,{label:t.formatMessage(O.title),transparent:!0},void 0,(0,a.Z)(m.Z,{message:t.formatMessage(O.title),settings:E}),(0,a.Z)(Z.Z,{}),s&&(0,a.Z)("div",{className:"explanation-box"},void 0,(0,a.Z)(g.Z,{headline:(0,a.Z)(d.Z,{id:"fediverse_tab.explanation_box.title",defaultMessage:"What is the Fediverse?"}),menu:this.explanationBoxMenu(),expanded:l,onToggle:this.toggleExplanationBox},void 0,(0,a.Z)(d.Z,{id:"fediverse_tab.explanation_box.explanation",defaultMessage:'{site_title} is part of the Fediverse, a social network made up of thousands of independent social media sites (aka "servers"). The posts you see here are from 3rd-party servers. You have the freedom to engage with them, or to block any server you don\'t like. Pay attention to the full username after the second @ symbol to know which server a post is from. To see only {site_title} posts, visit {local}.',values:{site_title:i,local:(0,a.Z)(h.rU,{to:"/timeline/local"},void 0,(0,a.Z)(d.Z,{id:"empty_column.home.local_tab",defaultMessage:"the {site_title} tab",values:{site_title:i}}))}}))),(0,a.Z)(x.Z,{scrollKey:"".concat(n,"_timeline"),timelineId:"".concat(n).concat(o?":media":""),onLoadMore:this.handleLoadMore,onRefresh:this.handleRefresh,emptyMessage:(0,a.Z)(d.Z,{id:"empty_column.public",defaultMessage:"There is nothing here! Write something publicly, or manually follow users from other servers to fill it up"}),divideType:"space"}))},t}(r.PureComponent))||s)||s}}]);
//# sourceMappingURL=public_timeline-d605799a470b78426188.chunk.js.map