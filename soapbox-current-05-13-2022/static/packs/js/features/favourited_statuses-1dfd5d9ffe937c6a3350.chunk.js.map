{"version":3,"file":"packs/js/features/favourited_statuses-1dfd5d9ffe937c6a3350.chunk.js","mappings":"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","sources":["webpack://soapbox-fe/./app/soapbox/features/favourited_statuses/index.js"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";import _debounce from\"lodash/debounce\";var _dec,_class,_class2;import\"core-js/modules/web.dom-collections.iterator.js\";import PropTypes from'prop-types';import React from'react';import ImmutablePropTypes from'react-immutable-proptypes';import ImmutablePureComponent from'react-immutable-pure-component';import{defineMessages,injectIntl,FormattedMessage}from'react-intl';import{connect}from'react-redux';import MissingIndicator from'soapbox/components/missing_indicator';import{Spinner}from'soapbox/components/ui';import{findAccountByUsername}from'soapbox/selectors';import{getFeatures}from'soapbox/utils/features';import{fetchAccount,fetchAccountByUsername}from'../../actions/accounts';import{fetchFavouritedStatuses,expandFavouritedStatuses,fetchAccountFavouritedStatuses,expandAccountFavouritedStatuses}from'../../actions/favourites';import StatusList from'../../components/status_list';import Column from'../ui/components/column';const messages=defineMessages({heading:{\"id\":\"column.favourited_statuses\",\"defaultMessage\":\"Liked posts\"}});const mapStateToProps=(state,_ref)=>{let{params}=_ref;const username=params.username||'';const me=state.get('me');const meUsername=state.getIn(['accounts',me,'username'],'');const isMyAccount=username.toLowerCase()===meUsername.toLowerCase();const features=getFeatures(state.get('instance'));if(isMyAccount){return{isMyAccount,statusIds:state.getIn(['status_lists','favourites','items']),isLoading:state.getIn(['status_lists','favourites','isLoading'],true),hasMore:!!state.getIn(['status_lists','favourites','next'])};}const accountFetchError=(state.getIn(['accounts',-1,'username'])||'').toLowerCase()===username.toLowerCase();let accountId=-1;if(accountFetchError){accountId=null;}else{const account=findAccountByUsername(state,username);accountId=account?account.getIn(['id'],null):-1;}const isBlocked=state.getIn(['relationships',accountId,'blocked_by'],false);const unavailable=me===accountId?false:isBlocked&&!features.blockersVisible;return{isMyAccount,accountId,unavailable,username,isAccount:!!state.getIn(['accounts',accountId]),statusIds:state.getIn(['status_lists',\"favourites:\".concat(accountId),'items'],[]),isLoading:state.getIn(['status_lists',\"favourites:\".concat(accountId),'isLoading'],true),hasMore:!!state.getIn(['status_lists',\"favourites:\".concat(accountId),'next'])};};let Favourites=(_dec=connect(mapStateToProps),_dec(_class=injectIntl(_class=(_class2=class Favourites extends ImmutablePureComponent{constructor(){super(...arguments);_defineProperty(this,\"handleLoadMore\",_debounce(()=>{const{accountId,isMyAccount}=this.props;if(isMyAccount){this.props.dispatch(expandFavouritedStatuses());}else{this.props.dispatch(expandAccountFavouritedStatuses(accountId));}},300,{leading:true}));}componentDidMount(){const{accountId,isMyAccount,username}=this.props;if(isMyAccount)this.props.dispatch(fetchFavouritedStatuses());else{if(accountId&&accountId!==-1){this.props.dispatch(fetchAccount(accountId));this.props.dispatch(fetchAccountFavouritedStatuses(accountId));}else{this.props.dispatch(fetchAccountByUsername(username));}}}componentDidUpdate(prevProps){const{accountId,isMyAccount}=this.props;if(!isMyAccount&&accountId&&accountId!==-1&&accountId!==prevProps.accountId&&accountId){this.props.dispatch(fetchAccount(accountId));this.props.dispatch(fetchAccountFavouritedStatuses(accountId));}}render(){const{intl,statusIds,isLoading,hasMore,isMyAccount,isAccount,accountId,unavailable}=this.props;if(!isMyAccount&&!isAccount&&accountId!==-1){return/*#__PURE__*/_jsx(MissingIndicator,{});}if(accountId===-1){return/*#__PURE__*/_jsx(Column,{},void 0,/*#__PURE__*/_jsx(Spinner,{}));}if(unavailable){return/*#__PURE__*/_jsx(Column,{},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"empty-column-indicator\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.account_unavailable\",defaultMessage:\"Profile unavailable\"})));}const emptyMessage=isMyAccount?/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.favourited_statuses\",defaultMessage:\"You don't have any liked posts yet. When you like one, it will show up here.\"}):/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.account_favourited_statuses\",defaultMessage:\"This user doesn't have any liked posts yet.\"});return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.heading),withHeader:false,transparent:true},void 0,/*#__PURE__*/_jsx(StatusList,{statusIds:statusIds,scrollKey:\"favourited_statuses\",hasMore:hasMore,isLoading:isLoading,onLoadMore:this.handleLoadMore,emptyMessage:emptyMessage}));}},_defineProperty(_class2,\"propTypes\",{dispatch:PropTypes.func.isRequired,statusIds:ImmutablePropTypes.orderedSet.isRequired,intl:PropTypes.object.isRequired,hasMore:PropTypes.bool,isLoading:PropTypes.bool,isMyAccount:PropTypes.bool.isRequired}),_class2))||_class)||_class);export{Favourites as default};"],"names":["_class","_class2","messages","heading","Favourites","state","_ref","username","me","get","meUsername","getIn","isMyAccount","toLowerCase","features","statusIds","isLoading","hasMore","accountId","account","isBlocked","unavailable","blockersVisible","isAccount","concat","_dec","arguments","props","dispatch","leading","componentDidMount","this","componentDidUpdate","prevProps","render","intl","className","id","defaultMessage","emptyMessage","label","formatMessage","withHeader","transparent","scrollKey","onLoadMore","handleLoadMore"],"sourceRoot":""}