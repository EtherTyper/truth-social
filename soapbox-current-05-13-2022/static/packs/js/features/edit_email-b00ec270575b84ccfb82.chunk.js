"use strict";(self.webpackChunksoapbox_fe=self.webpackChunksoapbox_fe||[]).push([[30],{1081:function(e,a,t){t.r(a);var s=t(1821),i=t(1814),r=(t(1),t(165),t(0)),l=t(1815),o=t(583),n=t(3),d=t(155),c=t(17),u=t(2);function f(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);a&&(s=s.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,s)}return t}function m(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?f(Object(t),!0).forEach((function(a){(0,i.Z)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var p=(0,l.vU)({updateEmailSuccess:{id:"security.update_email.success",defaultMessage:"Email successfully updated."},updateEmailFail:{id:"security.update_email.fail",defaultMessage:"Update email failed."},emailFieldLabel:{id:"security.fields.email.label",defaultMessage:"Email address"},passwordFieldLabel:{id:"security.fields.password.label",defaultMessage:"Password"},submit:{id:"security.submit",defaultMessage:"Save changes"},cancel:{id:"common.cancel",defaultMessage:"Cancel"}}),b={email:"",password:""};a.default=function(){var e=(0,o.Z)(),a=(0,n.I0)(),t=r.useState(b),i=t[0],l=t[1],f=r.useState(!1),g=f[0],v=f[1],h=i.email,y=i.password,w=r.useCallback((function(e){e.persist(),l((function(a){var t;return m(m({},a),{},((t={})[e.target.name]=e.target.value,t))}))}),[]),M=r.useCallback((function(){v(!0),a((0,d.Uk)(h,y)).then((function(){l(b),a(c.ZP.success(e.formatMessage(p.updateEmailSuccess)))})).finally((function(){v(!1)})).catch((function(){l((function(e){return m(m({},e),{},{password:""})})),a(c.ZP.error(e.formatMessage(p.updateEmailFail)))}))}),[h,y,a,e]);return(0,s.Z)(u.sg,{label:e.formatMessage({id:"edit_email.header",defaultMessage:"Change Email"}),transparent:!0,withHeader:!1},void 0,(0,s.Z)(u.Zb,{variant:"rounded"},void 0,(0,s.Z)(u.Ol,{backHref:"/settings"},void 0,(0,s.Z)(u.ll,{title:e.formatMessage({id:"edit_email.header",defaultMessage:"Change Email"})})),(0,s.Z)(u.eW,{},void 0,(0,s.Z)(u.l0,{onSubmit:M},void 0,(0,s.Z)(u.cw,{labelText:e.formatMessage(p.emailFieldLabel)},void 0,(0,s.Z)(u.II,{placeholder:e.formatMessage({id:"edit_email.placeholder",defaultMessage:"me@example.com"}),name:"email",autocomplete:"off",onChange:w,value:h})),(0,s.Z)(u.cw,{labelText:e.formatMessage(p.passwordFieldLabel)},void 0,(0,s.Z)(u.II,{type:"password",name:"password",onChange:w,value:y})),(0,s.Z)(u.iN,{},void 0,(0,s.Z)(u.zx,{to:"/settings",theme:"ghost"},void 0,e.formatMessage(p.cancel)),(0,s.Z)(u.zx,{type:"submit",theme:"primary",disabled:g},void 0,e.formatMessage(p.submit)))))))}}}]);
//# sourceMappingURL=edit_email-b00ec270575b84ccfb82.chunk.js.map