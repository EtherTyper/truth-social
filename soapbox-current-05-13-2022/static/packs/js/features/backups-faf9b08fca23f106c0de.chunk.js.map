{"version":3,"file":"packs/js/features/backups-faf9b08fca23f106c0de.chunk.js","mappings":"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","sources":["webpack://soapbox-fe/./app/soapbox/features/backups/index.js","webpack://soapbox-fe/./app/soapbox/features/ui/components/better_column.js"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class,_class2;import\"core-js/modules/web.dom-collections.iterator.js\";import classNames from'classnames';import PropTypes from'prop-types';import React from'react';import ImmutablePureComponent from'react-immutable-pure-component';import{defineMessages,injectIntl}from'react-intl';import{connect}from'react-redux';import{fetchBackups,createBackup}from'soapbox/actions/backups';import ScrollableList from'soapbox/components/scrollable_list';import Column from'../ui/components/better_column';const messages=defineMessages({heading:{\"id\":\"column.backups\",\"defaultMessage\":\"Backups\"},create:{\"id\":\"backups.actions.create\",\"defaultMessage\":\"Create backup\"},emptyMessage:{\"id\":\"backups.empty_message\",\"defaultMessage\":\"No backups found. {action}\"},emptyMessageAction:{\"id\":\"backups.empty_message.action\",\"defaultMessage\":\"Create one now?\"},pending:{\"id\":\"backups.pending\",\"defaultMessage\":\"Pending\"}});const mapStateToProps=state=>({backups:state.get('backups').toList().sortBy(backup=>backup.get('inserted_at'))});let Backups=(_dec=connect(mapStateToProps),_dec(_class=injectIntl(_class=(_class2=class Backups extends ImmutablePureComponent{constructor(){super(...arguments);_defineProperty(this,\"state\",{isLoading:true});_defineProperty(this,\"handleCreateBackup\",e=>{this.props.dispatch(createBackup());e.preventDefault();});_defineProperty(this,\"makeColumnMenu\",()=>{const{intl}=this.props;return[{text:intl.formatMessage(messages.create),action:this.handleCreateBackup,icon:require('@tabler/icons/icons/plus.svg')}];});}componentDidMount(){this.props.dispatch(fetchBackups()).then(()=>{this.setState({isLoading:false});}).catch(()=>{});}render(){const{intl,backups}=this.props;const{isLoading}=this.state;const showLoading=isLoading&&backups.count()===0;const emptyMessageAction=/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:this.handleCreateBackup},void 0,intl.formatMessage(messages.emptyMessageAction));return/*#__PURE__*/_jsx(Column,{icon:\"cloud-download\",label:intl.formatMessage(messages.heading),menu:this.makeColumnMenu()},void 0,/*#__PURE__*/_jsx(ScrollableList,{isLoading:isLoading,showLoading:showLoading,scrollKey:\"backups\",emptyMessage:intl.formatMessage(messages.emptyMessage,{action:emptyMessageAction})},void 0,backups.map(backup=>/*#__PURE__*/_jsx(\"div\",{className:classNames('backup',{'backup--pending':!backup.get('processed')})},backup.get('id'),backup.get('processed')?/*#__PURE__*/_jsx(\"a\",{href:backup.get('url'),target:\"_blank\"},void 0,backup.get('inserted_at')):/*#__PURE__*/_jsx(\"div\",{},void 0,intl.formatMessage(messages.pending),\": \",backup.get('inserted_at'))))));}},_defineProperty(_class2,\"propTypes\",{intl:PropTypes.object.isRequired}),_class2))||_class)||_class);export{Backups as default};","import _extends from\"@babel/runtime/helpers/esm/extends\";import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _objectWithoutProperties from\"@babel/runtime/helpers/esm/objectWithoutProperties\";const _excluded=[\"heading\",\"icon\",\"children\",\"active\",\"menu\"];import\"core-js/modules/es.string.replace.js\";import React from'react';import{Column}from'soapbox/components/ui';import DropdownMenu from'soapbox/containers/dropdown_menu_container';import ColumnHeader from'./column_header';// Yes, there are 3 types of columns at this point, but this one is better, I swear\nexport default class BetterColumn extends React.PureComponent{render(){const _this$props=this.props,{heading,icon,children,active,menu}=_this$props,rest=_objectWithoutProperties(_this$props,_excluded);const columnHeaderId=heading&&heading.replace(/ /g,'-');return/*#__PURE__*/React.createElement(Column,_extends({\"aria-labelledby\":columnHeaderId,className:\"column--better\"},rest),/*#__PURE__*/_jsx(\"div\",{className:\"column__top\"},void 0,heading&&/*#__PURE__*/_jsx(ColumnHeader,{icon:icon,active:active,type:heading,columnHeaderId:columnHeaderId}),menu&&/*#__PURE__*/_jsx(\"div\",{className:\"column__menu\"},void 0,/*#__PURE__*/_jsx(DropdownMenu,{items:menu,icon:\"ellipsis-v\",size:18,direction:\"right\"}))),children);}}"],"names":["_class","_class2","_excluded","render","_this$props","this","props","heading","icon","children","active","menu","rest","columnHeaderId","replace","className","type","items","size","direction","messages","create","emptyMessage","emptyMessageAction","pending","Backups","state","backups","get","toList","sortBy","backup","_dec","injectIntl","arguments","isLoading","e","dispatch","preventDefault","text","formatMessage","action","handleCreateBackup","componentDidMount","then","setState","catch","intl","showLoading","count","href","onClick","label","makeColumnMenu","scrollKey","map","target"],"sourceRoot":""}