{"version":3,"file":"packs/js/features/search-b3de77c7cf1f259fc24f.chunk.js","mappings":"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","sources":["webpack://soapbox-fe/./app/soapbox/features/compose/components/search_results.js","webpack://soapbox-fe/./app/soapbox/features/placeholder/components/placeholder_account.tsx","webpack://soapbox-fe/./app/soapbox/features/placeholder/components/placeholder_hashtag.tsx","webpack://soapbox-fe/./app/soapbox/features/compose/containers/search_results_container.js","webpack://soapbox-fe/./app/soapbox/features/search/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _class,_class2;import\"core-js/modules/web.dom-collections.iterator.js\";import classNames from'classnames';import PropTypes from'prop-types';import React from'react';import ImmutablePropTypes from'react-immutable-proptypes';import ImmutablePureComponent from'react-immutable-pure-component';import{FormattedMessage}from'react-intl';import{defineMessages,injectIntl}from'react-intl';import Pullable from'soapbox/components/pullable';import ScrollableList from'soapbox/components/scrollable_list';import PlaceholderAccount from'soapbox/features/placeholder/components/placeholder_account';import PlaceholderHashtag from'soapbox/features/placeholder/components/placeholder_hashtag';import PlaceholderStatus from'soapbox/features/placeholder/components/placeholder_status';import Hashtag from'../../../components/hashtag';import{Tabs}from'../../../components/ui';import AccountContainer from'../../../containers/account_container';import StatusContainer from'../../../containers/status_container';const messages=defineMessages({accounts:{\"id\":\"search_results.accounts\",\"defaultMessage\":\"People\"},statuses:{\"id\":\"search_results.statuses\",\"defaultMessage\":\"Posts\"},hashtags:{\"id\":\"search_results.hashtags\",\"defaultMessage\":\"Hashtags\"}});let SearchResults=injectIntl(_class=(_class2=class SearchResults extends ImmutablePureComponent{constructor(){super(...arguments);_defineProperty(this,\"handleLoadMore\",()=>this.props.expandSearch(this.props.selectedFilter));_defineProperty(this,\"handleSelectFilter\",newActiveFilter=>this.props.selectFilter(newActiveFilter));}componentDidMount(){this.props.fetchTrendingStatuses();}renderFilterBar(){const{intl,selectedFilter}=this.props;const items=[{text:intl.formatMessage(messages.accounts),action:()=>this.handleSelectFilter('accounts'),name:'accounts'},{text:intl.formatMessage(messages.statuses),action:()=>this.handleSelectFilter('statuses'),name:'statuses'},{text:intl.formatMessage(messages.hashtags),action:()=>this.handleSelectFilter('hashtags'),name:'hashtags'}];return/*#__PURE__*/_jsx(Tabs,{items:items,activeItem:selectedFilter});}render(){const{value,results,submitted,selectedFilter,suggestions,trendingStatuses,trends}=this.props;let searchResults;let hasMore=false;let loaded;let noResultsMessage;let placeholderComponent=PlaceholderStatus;if(selectedFilter==='accounts'){hasMore=results.get('accountsHasMore');loaded=results.get('accountsLoaded');placeholderComponent=PlaceholderAccount;if(results.get('accounts')&&results.get('accounts').size>0){searchResults=results.get('accounts').map(accountId=>/*#__PURE__*/_jsx(AccountContainer,{id:accountId},accountId));}else if(!submitted&&suggestions&&!suggestions.isEmpty()){searchResults=suggestions.map(suggestion=>/*#__PURE__*/_jsx(AccountContainer,{id:suggestion.get('account')},suggestion.get('account')));}else if(loaded){noResultsMessage=/*#__PURE__*/_jsx(\"div\",{className:\"empty-column-indicator\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.search.accounts\",defaultMessage:\"There are no people results for \\\"{term}\\\"\",values:{term:value}}));}}if(selectedFilter==='statuses'){hasMore=results.get('statusesHasMore');loaded=results.get('statusesLoaded');if(results.get('statuses')&&results.get('statuses').size>0){searchResults=results.get('statuses').map(statusId=>/*#__PURE__*/_jsx(StatusContainer,{id:statusId},statusId));}else if(!submitted&&trendingStatuses&&!trendingStatuses.isEmpty()){searchResults=trendingStatuses.map(statusId=>/*#__PURE__*/_jsx(StatusContainer,{id:statusId},statusId));}else if(loaded){noResultsMessage=/*#__PURE__*/_jsx(\"div\",{className:\"empty-column-indicator\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.search.statuses\",defaultMessage:\"There are no posts results for \\\"{term}\\\"\",values:{term:value}}));}}if(selectedFilter==='hashtags'){hasMore=results.get('hashtagsHasMore');loaded=results.get('hashtagsLoaded');placeholderComponent=PlaceholderHashtag;if(results.get('hashtags')&&results.get('hashtags').size>0){searchResults=results.get('hashtags').map(hashtag=>/*#__PURE__*/_jsx(Hashtag,{hashtag:hashtag},hashtag.get('name')));}else if(!submitted&&suggestions&&!suggestions.isEmpty()){searchResults=trends.map(hashtag=>/*#__PURE__*/_jsx(Hashtag,{hashtag:hashtag},hashtag.get('name')));}else if(loaded){noResultsMessage=/*#__PURE__*/_jsx(\"div\",{className:\"empty-column-indicator\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.search.hashtags\",defaultMessage:\"There are no hashtags results for \\\"{term}\\\"\",values:{term:value}}));}}return/*#__PURE__*/React.createElement(React.Fragment,null,this.renderFilterBar(),noResultsMessage||/*#__PURE__*/_jsx(Pullable,{},void 0,/*#__PURE__*/_jsx(ScrollableList,{scrollKey:\"\".concat(selectedFilter,\":\").concat(value),isLoading:submitted&&!loaded,showLoading:submitted&&!loaded&&results.isEmpty(),hasMore:hasMore,onLoadMore:this.handleLoadMore,placeholderComponent:placeholderComponent,placeholderCount:20,className:classNames({'divide-gray-200 dark:divide-slate-700 divide-solid divide-y':selectedFilter==='statuses','space-y-4':selectedFilter==='accounts'})},selectedFilter,searchResults)));}},_defineProperty(_class2,\"propTypes\",{value:PropTypes.string,results:ImmutablePropTypes.map.isRequired,submitted:PropTypes.bool,expandSearch:PropTypes.func.isRequired,selectedFilter:PropTypes.string.isRequired,selectFilter:PropTypes.func.isRequired,features:PropTypes.object.isRequired,suggestions:ImmutablePropTypes.list,trendingStatuses:ImmutablePropTypes.list,trends:ImmutablePropTypes.list,intl:PropTypes.object.isRequired}),_class2))||_class;export{SearchResults as default};","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import PlaceholderAvatar from'./placeholder_avatar';import PlaceholderDisplayName from'./placeholder_display_name';/** Fake account to display while data is loading. */const PlaceholderAccount=()=>{return/*#__PURE__*/_jsx(\"div\",{className:\"account\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"account__wrapper\"},void 0,/*#__PURE__*/_jsx(\"span\",{className:\"account__display-name\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"account__avatar-wrapper\"},void 0,/*#__PURE__*/_jsx(PlaceholderAvatar,{size:36})),/*#__PURE__*/_jsx(PlaceholderDisplayName,{minLength:3,maxLength:25}))));};export default PlaceholderAccount;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import{generateText,randomIntFromInterval}from'../utils';/** Fake hashtag to display while data is loading. */const PlaceholderHashtag=()=>{const length=randomIntFromInterval(15,30);return/*#__PURE__*/_jsx(\"div\",{className:\"placeholder-hashtag\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"trends__item\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"trends__item__name\"},void 0,generateText(length))));};export default PlaceholderHashtag;","import{connect}from'react-redux';import{fetchTrendingStatuses}from'soapbox/actions/trending_statuses';import{getFeatures}from'soapbox/utils/features';import{expandSearch,setFilter}from'../../../actions/search';import{fetchSuggestions,dismissSuggestion}from'../../../actions/suggestions';import SearchResults from'../components/search_results';const mapStateToProps=state=>{const instance=state.get('instance');return{value:state.getIn(['search','submittedValue']),results:state.getIn(['search','results']),suggestions:state.getIn(['suggestions','items']),trendingStatuses:state.getIn(['trending_statuses','items']),trends:state.getIn(['trends','items']),submitted:state.getIn(['search','submitted']),selectedFilter:state.getIn(['search','filter']),features:getFeatures(instance)};};const mapDispatchToProps=dispatch=>({fetchSuggestions:()=>dispatch(fetchSuggestions()),fetchTrendingStatuses:()=>dispatch(fetchTrendingStatuses()),expandSearch:type=>dispatch(expandSearch(type)),dismissSuggestion:account=>dispatch(dismissSuggestion(account.get('id'))),selectFilter:newActiveFilter=>dispatch(setFilter(newActiveFilter))});export default connect(mapStateToProps,mapDispatchToProps)(SearchResults);","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import{defineMessages,useIntl}from'react-intl';import{Column}from'soapbox/components/ui';import Search from'soapbox/features/compose/components/search';import SearchResultsContainer from'soapbox/features/compose/containers/search_results_container';const messages=defineMessages({heading:{\"id\":\"column.search\",\"defaultMessage\":\"Search\"}});const SearchPage=()=>{const intl=useIntl();return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\"},void 0,/*#__PURE__*/_jsx(Search,{autoFocus:true,autoSubmit:true}),/*#__PURE__*/_jsx(SearchResultsContainer,{})));};export default SearchPage;"],"names":["_class","_class2","className","size","minLength","maxLength","length","messages","accounts","statuses","hashtags","SearchResults","injectIntl","arguments","props","expandSearch","selectedFilter","newActiveFilter","selectFilter","componentDidMount","this","fetchTrendingStatuses","renderFilterBar","intl","items","text","formatMessage","action","handleSelectFilter","name","activeItem","render","searchResults","loaded","noResultsMessage","value","results","submitted","suggestions","trendingStatuses","trends","hasMore","placeholderComponent","get","map","accountId","id","isEmpty","defaultMessage","values","term","suggestion","statusId","hashtag","scrollKey","concat","isLoading","showLoading","onLoadMore","handleLoadMore","placeholderCount","features","state","instance","getIn","dispatch","fetchSuggestions","type","dismissSuggestion","account","heading","useIntl","label","autoFocus","autoSubmit"],"sourceRoot":""}