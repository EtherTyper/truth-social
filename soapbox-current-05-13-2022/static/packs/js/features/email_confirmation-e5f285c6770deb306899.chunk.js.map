{"version":3,"file":"packs/js/features/email_confirmation-e5f285c6770deb306899.chunk.js","mappings":"gNAA8dA,EAA8B,UAA9BA,EAA6C,OAAcC,EAAM,IAAIC,gBAAgBC,OAAOC,SAASC,QAAQC,IAAI,sBAA6wB,UAA/tB,WAAK,IAAMC,GAAK,SAAgBC,GAAS,UAAmB,EAAmB,WAA/N,QAA6MC,EAAM,KAACC,EAAS,KAAkgB,OAAle,aAAgB,WAAQT,GAAOO,GAAS,QAAoBP,IAAQU,MAAK,WAAKD,EAAUV,GAAkBQ,EAAS,aAAiBD,EAAKK,cAAc,CAACC,GAAG,6BAA6BC,eAAe,wCAAwCC,OAAM,SAAAC,GAAiC,GAAzBN,EAAUV,GAAkBgB,EAAMC,SAASC,KAAKF,MAAM,CAAC,IAAMF,GAAe,IAAAK,GAAkBH,EAAMC,SAASC,KAAKF,OAAOR,EAAS,WAAeD,EAAKK,cAAc,CAACC,GAAG,0BAA0BC,eAAc,YAAY,CAACb,IAAYA,GAAOQ,IAAST,GAAkBS,IAAST,GAA8E,OAAK,KAAQ,KAAzD,OAAK,KAAS,CAACoB,GAAG","sources":["webpack://soapbox-fe/./app/soapbox/features/email_confirmation/index.js"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/web.dom-collections.iterator.js\";import\"core-js/modules/web.url.js\";import*as React from'react';import{useIntl}from'react-intl';import{useDispatch}from'react-redux';import{Redirect}from'react-router-dom';import snackbar from'soapbox/actions/snackbar';import{Spinner}from'soapbox/components/ui';import{confirmChangedEmail}from'../../actions/security';import{buildErrorMessage}from'../../utils/errors';const Statuses={IDLE:'IDLE',SUCCESS:'SUCCESS',FAIL:'FAIL'};const token=new URLSearchParams(window.location.search).get('confirmation_token');const EmailConfirmation=()=>{const intl=useIntl();const dispatch=useDispatch();const[status,setStatus]=React.useState(Statuses.IDLE);React.useEffect(()=>{if(token){dispatch(confirmChangedEmail(token)).then(()=>{setStatus(Statuses.SUCCESS);dispatch(snackbar.success(intl.formatMessage({id:'email_confirmation.success',defaultMessage:'Your email has been confirmed!'})));}).catch(error=>{setStatus(Statuses.FAIL);if(error.response.data.error){const defaultMessage=buildErrorMessage(error.response.data.error);dispatch(snackbar.error(intl.formatMessage({id:'email_confirmation.fail',defaultMessage})));}});}},[token]);if(!token||status===Statuses.SUCCESS||status===Statuses.FAIL){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}return/*#__PURE__*/_jsx(Spinner,{});};export default EmailConfirmation;"],"names":["Statuses","token","URLSearchParams","window","location","search","get","intl","dispatch","status","setStatus","then","formatMessage","id","defaultMessage","catch","error","response","data","b","to"],"sourceRoot":""}