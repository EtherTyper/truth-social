"use strict";(self.webpackChunksoapbox_fe=self.webpackChunksoapbox_fe||[]).push([[68],{941:function(e){function t(){this.length=0}t.prototype.push=function(e){var t={item:e};this.last?this.last=this.last.next=t:this.last=this.first=t,this.length++},t.prototype.shift=function(){var e=this.first;if(e)return this.first=e.next,--this.length||(this.last=void 0),e.item},t.prototype.slice=function(e,t){e=void 0===e?0:e,t=void 0===t?1/0:t;for(var o=[],a=0,s=this.first;s&&!(--t<0);s=s.next)++a>e&&o.push(s.item);return o},e.exports=t},1039:function(e,t,o){o.r(t),o.d(t,{default:function(){return Ce}});var a,s=o(1821),n=o(1814),i=(o(1),o(7),o(6)),r=o.n(i),l=o(602),d=o(0),c=o(318),u=o(8),p=o(1815),h=o(1827),f=o(584),m=o(3),g=o(1811),v=o(47),y=o(43),M=o(196),Z=o(12),k=o(53),b=o(21),C=o(253),_=o(2),S=o(261),x=o(951),R=o(16),w=o(20),j=o(255),O=o(67),E=o(1828),D=o(172),I=o(147),U=o(50),H=o(76),T=o(808),N=o(11),B=o(1855),V=o(466),P=o(57),A=o(225),L=o(14),F=o(146),z=(a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},a(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),q=(0,p.vU)({delete:{id:"status.delete",defaultMessage:"Delete"},redraft:{id:"status.redraft",defaultMessage:"Delete & re-draft"},edit:{id:"status.edit",defaultMessage:"Edit"},direct:{id:"status.direct",defaultMessage:"Direct message @{name}"},chat:{id:"status.chat",defaultMessage:"Chat with @{name}"},mention:{id:"status.mention",defaultMessage:"Mention @{name}"},reply:{id:"status.reply",defaultMessage:"Reply"},reblog:{id:"status.reblog",defaultMessage:"Repost"},reblog_private:{id:"status.reblog_private",defaultMessage:"Repost to original audience"},cancel_reblog_private:{id:"status.cancel_reblog_private",defaultMessage:"Un-repost"},cannot_reblog:{id:"status.cannot_reblog",defaultMessage:"This post cannot be reposted"},favourite:{id:"status.favourite",defaultMessage:"Like"},mute:{id:"status.mute",defaultMessage:"Mute @{name}"},muteConversation:{id:"status.mute_conversation",defaultMessage:"Mute conversation"},unmuteConversation:{id:"status.unmute_conversation",defaultMessage:"Unmute conversation"},block:{id:"status.block",defaultMessage:"Block @{name}"},report:{id:"status.report",defaultMessage:"Report @{name}"},share:{id:"status.share",defaultMessage:"Share"},pin:{id:"status.pin",defaultMessage:"Pin on profile"},unpin:{id:"status.unpin",defaultMessage:"Unpin from profile"},embed:{id:"status.embed",defaultMessage:"Embed"},admin_account:{id:"status.admin_account",defaultMessage:"Open moderation interface for @{name}"},admin_status:{id:"status.admin_status",defaultMessage:"Open this post in the moderation interface"},copy:{id:"status.copy",defaultMessage:"Copy link to post"},bookmark:{id:"status.bookmark",defaultMessage:"Bookmark"},unbookmark:{id:"status.unbookmark",defaultMessage:"Remove bookmark"},deactivateUser:{id:"admin.users.actions.deactivate_user",defaultMessage:"Deactivate @{name}"},deleteUser:{id:"admin.users.actions.delete_user",defaultMessage:"Delete @{name}"},deleteStatus:{id:"admin.statuses.actions.delete_status",defaultMessage:"Delete post"},markStatusSensitive:{id:"admin.statuses.actions.mark_status_sensitive",defaultMessage:"Mark post sensitive"},markStatusNotSensitive:{id:"admin.statuses.actions.mark_status_not_sensitive",defaultMessage:"Mark post not sensitive"},reactionLike:{id:"status.reactions.like",defaultMessage:"Like"},reactionHeart:{id:"status.reactions.heart",defaultMessage:"Love"},reactionLaughing:{id:"status.reactions.laughing",defaultMessage:"Haha"},reactionOpenMouth:{id:"status.reactions.open_mouth",defaultMessage:"Wow"},reactionCry:{id:"status.reactions.cry",defaultMessage:"Sad"},reactionWeary:{id:"status.reactions.weary",defaultMessage:"Weary"},emojiPickerExpand:{id:"status.reactions_expand",defaultMessage:"Select emoji"},more:{id:"status.actions.more",defaultMessage:"More"},quotePost:{id:"status.quote",defaultMessage:"Quote post"}}),G=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,n.Z)(t,"state",{emojiSelectorVisible:!1,emojiSelectorFocused:!1}),(0,n.Z)(t,"node",null),(0,n.Z)(t,"handleReplyClick",(function(e){var o=t.props,a=o.me,s=o.onReply,n=o.onOpenUnauthorizedModal;e.preventDefault(),a?s(t.props.status):n("REPLY")})),(0,n.Z)(t,"handleReblogClick",(function(e){var o=t.props,a=o.me,s=o.onReblog,n=o.onOpenUnauthorizedModal,i=o.status;e.preventDefault(),a?s(i,e):n("REBLOG")})),(0,n.Z)(t,"handleQuoteClick",(function(){var e=t.props,o=e.me,a=e.onQuote,s=e.onOpenUnauthorizedModal,n=e.status;o?a(n,t.props.history):s("REBLOG")})),(0,n.Z)(t,"handleBookmarkClick",(function(){t.props.onBookmark(t.props.status)})),(0,n.Z)(t,"handleFavouriteClick",(function(e){var o=t.props,a=o.me,s=o.onFavourite,n=o.onOpenUnauthorizedModal,i=o.status;e.preventDefault(),a?s(i):n("FAVOURITE")})),(0,n.Z)(t,"handleLikeButtonHover",(function(){t.props.features.emojiReacts&&!(0,P.Ec)()&&t.setState({emojiSelectorVisible:!0})})),(0,n.Z)(t,"handleLikeButtonLeave",(function(){t.props.features.emojiReacts&&!(0,P.Ec)()&&t.setState({emojiSelectorVisible:!1})})),(0,n.Z)(t,"handleLikeButtonClick",(function(e){var o=t.props.features,a=(0,A.k4)(t.props.status,t.props.allowedEmoji)||"üëç";o.emojiReacts&&(0,P.Ec)()?t.state.emojiSelectorVisible?t.handleReactClick(a)(e):t.setState({emojiSelectorVisible:!0}):t.handleReactClick(a)(e)})),(0,n.Z)(t,"handleReactClick",(function(e){return function(){var o=t.props,a=o.me,s=o.onEmojiReact,n=o.onOpenUnauthorizedModal,i=o.status;a?s(i,e):n("FAVOURITE"),t.setState({emojiSelectorVisible:!1,emojiSelectorFocused:!1})}})),(0,n.Z)(t,"handleHotkeyEmoji",(function(){var e=t.state.emojiSelectorVisible;t.setState({emojiSelectorVisible:!e})})),(0,n.Z)(t,"handleDeleteClick",(function(){t.props.onDelete(t.props.status,t.props.history)})),(0,n.Z)(t,"handleRedraftClick",(function(){t.props.onDelete(t.props.status,t.props.history,!0)})),(0,n.Z)(t,"handleEditClick",(function(){t.props.onEdit(t.props.status)})),(0,n.Z)(t,"handleDirectClick",(function(){var e=t.props.status.account;e&&"object"==typeof e&&t.props.onDirect(e,t.props.history)})),(0,n.Z)(t,"handleChatClick",(function(){var e=t.props.status.account;e&&"object"==typeof e&&t.props.onChat(e,t.props.history)})),(0,n.Z)(t,"handleMentionClick",(function(){var e=t.props.status.account;e&&"object"==typeof e&&t.props.onMention(e,t.props.history)})),(0,n.Z)(t,"handleMuteClick",(function(){var e=t.props.status.account;e&&"object"==typeof e&&t.props.onMute(e)})),(0,n.Z)(t,"handleConversationMuteClick",(function(){t.props.onMuteConversation(t.props.status)})),(0,n.Z)(t,"handleBlockClick",(function(){t.props.onBlock(t.props.status)})),(0,n.Z)(t,"handleReport",(function(){t.props.onReport(t.props.status)})),(0,n.Z)(t,"handlePinClick",(function(){t.props.onPin(t.props.status)})),(0,n.Z)(t,"handleShare",(function(){navigator.share({text:t.props.status.search_index,url:t.props.status.uri})})),(0,n.Z)(t,"handleEmbed",(function(){t.props.onEmbed(t.props.status)})),(0,n.Z)(t,"handleCopy",(function(){var e=t.props.status.url,o=document.createElement("textarea");o.textContent=e,o.style.position="fixed",document.body.appendChild(o);try{o.select(),document.execCommand("copy")}catch(e){}finally{document.body.removeChild(o)}})),(0,n.Z)(t,"handleDeactivateUser",(function(){t.props.onDeactivateUser(t.props.status)})),(0,n.Z)(t,"handleDeleteUser",(function(){t.props.onDeleteUser(t.props.status)})),(0,n.Z)(t,"handleToggleStatusSensitivity",(function(){t.props.onToggleStatusSensitivity(t.props.status)})),(0,n.Z)(t,"handleDeleteStatus",(function(){t.props.onDeleteStatus(t.props.status)})),(0,n.Z)(t,"setRef",(function(e){t.node=e})),t}return z(t,e),t.prototype.componentDidMount=function(){var e=this;document.addEventListener("click",(function(t){e.node&&!e.node.contains(t.target)&&e.setState({emojiSelectorVisible:!1,emojiSelectorFocused:!1})}))},t.prototype.render=function(){var e=this.props,t=e.status,a=e.intl,n=e.me,i=e.isStaff,l=e.isAdmin,d=e.allowedEmoji,c=e.features,u=t.getIn(["account","id"])===n,p=String(t.getIn(["account","acct"])),h=["public","unlisted"].includes(t.visibility),f=t.muted,m=(0,A.k4)(t,d),g={"üëç":q.reactionLike,"‚ù§Ô∏è":q.reactionHeart,"üòÜ":q.reactionLaughing,"üòÆ":q.reactionOpenMouth,"üò¢":q.reactionCry,"üò©":q.reactionWeary,"":q.favourite},v=a.formatMessage(g[m||""]||q.favourite),y=[];h&&(y.push({text:a.formatMessage(q.copy),action:this.handleCopy,icon:o(254)}),c.embeds&&y.push({text:a.formatMessage(q.embed),action:this.handleEmbed,icon:o(467)})),n&&(c.bookmarks&&y.push({text:a.formatMessage(t.get("bookmarked")?q.unbookmark:q.bookmark),action:this.handleBookmarkClick,icon:o(t.get("bookmarked")?468:504)}),y.push(null),u?(h?(y.push({text:a.formatMessage(t.pinned?q.unpin:q.pin),action:this.handlePinClick,icon:o(f?410:411)}),y.push(null)):"private"===t.visibility&&(y.push({text:a.formatMessage(t.get("reblogged")?q.cancel_reblog_private:q.reblog_private),action:this.handleReblogClick,icon:o(59)}),y.push(null)),y.push({text:a.formatMessage(f?q.unmuteConversation:q.muteConversation),action:this.handleConversationMuteClick,icon:o(f?223:405)}),y.push(null),y.push({text:a.formatMessage(q.delete),action:this.handleDeleteClick,icon:o(58),destructive:!0}),c.editStatuses?y.push({text:a.formatMessage(q.edit),action:this.handleEditClick,icon:o(178)}):y.push({text:a.formatMessage(q.redraft),action:this.handleRedraftClick,icon:o(178),destructive:!0})):(y.push({text:a.formatMessage(q.mention,{name:p}),action:this.handleMentionClick,icon:o(192)}),y.push(null),y.push({text:a.formatMessage(q.mute,{name:p}),action:this.handleMuteClick,icon:o(157)}),y.push({text:a.formatMessage(q.block,{name:p}),action:this.handleBlockClick,icon:o(49)}),y.push({text:a.formatMessage(q.report,{name:p}),action:this.handleReport,icon:o(322)})),i&&(y.push(null),l&&(y.push({text:a.formatMessage(q.admin_account,{name:p}),href:"/pleroma/admin/#/users/".concat(t.getIn(["account","id"]),"/"),icon:o(406)}),y.push({text:a.formatMessage(q.admin_status),href:"/pleroma/admin/#/statuses/".concat(t.id,"/"),icon:o(217)})),y.push({text:a.formatMessage(!1===t.get("sensitive")?q.markStatusSensitive:q.markStatusNotSensitive),action:this.handleToggleStatusSensitivity,icon:o(320)}),u||(y.push({text:a.formatMessage(q.deactivateUser,{name:p}),action:this.handleDeactivateUser,icon:o(197)}),y.push({text:a.formatMessage(q.deleteUser,{name:p}),action:this.handleDeleteUser,icon:o(224),destructive:!0}),y.push({text:a.formatMessage(q.deleteStatus),action:this.handleDeleteStatus,icon:o(58),destructive:!0}))));var M="share"in navigator&&"public"===t.get("visibility"),Z=o(59);"direct"===t.get("visibility")?Z=o(173):"private"===t.get("visibility")&&(Z=o(177));var k="direct"===t.get("visibility")||"private"===t.get("visibility"),b=[{text:a.formatMessage(t.reblogged?q.cancel_reblog_private:q.reblog),action:this.handleReblogClick,icon:o(59)},{text:a.formatMessage(q.quotePost),action:this.handleQuoteClick,icon:o(469)}],C=(0,s.Z)(_.hU,{disabled:k,className:r()({"text-gray-400 hover:text-gray-600":!t.reblogged,"text-success-600 hover:text-success-600":t.reblogged}),title:k?a.formatMessage(q.cannot_reblog):a.formatMessage(q.reblog),src:Z,onClick:this.handleReblogClick,text:a.formatMessage(q.reblog)});return(0,s.Z)(_.Ug,{justifyContent:"between"},void 0,(0,s.Z)(_.hU,{title:a.formatMessage(q.reply),src:o(470),className:"text-gray-400 hover:text-gray-600",onClick:this.handleReplyClick,text:a.formatMessage(q.reply)}),c.quotePosts&&n?(0,s.Z)(F.Z,{items:b,disabled:!h,onShiftClick:this.handleReblogClick},void 0,C):C,c.emojiReacts?(0,s.Z)(V.Z,{statusId:t.id},void 0,(0,s.Z)(_.hU,{className:r()({"text-gray-400 hover:text-gray-600":!m,"text-accent-300 hover:text-accent-300":Boolean(m)}),title:v,src:o(198),iconClassName:r()({"fill-accent-300":Boolean(m)}),text:v})):(0,s.Z)(_.hU,{className:r()({"text-gray-400 hover:text-gray-600":!m,"text-accent-300 hover:text-accent-300":Boolean(m)}),title:v,src:o(198),iconClassName:r()({"fill-accent-300":Boolean(m)}),text:v,onClick:this.handleLikeButtonClick}),M&&(0,s.Z)(_.hU,{title:a.formatMessage(q.share),src:o(321),className:"text-gray-400 hover:text-gray-600",onClick:this.handleShare,text:a.formatMessage(q.share)}),(0,s.Z)(F.Z,{src:o(220),items:y,title:"More"}))},t}(d.PureComponent);(0,n.Z)(G,"defaultProps",{isStaff:!1});var W=(0,g.EN)((0,f.ZP)(G)),K=(0,m.$j)((function(e){var t=e.me,o=e.accounts.get(t),a=e.instance;return{me:t,isStaff:!!o&&o.staff,isAdmin:!!o&&o.admin,features:(0,L.N$)(a)}}),(function(e,t){var o=t.status;return{onOpenUnauthorizedModal:function(t){e((0,E.h7)("UNAUTHORIZED",{action:t,ap_id:o.url}))}}}))(W),Q=o(15),X=o(408),$=o(721),J=o(274),Y=o(256),ee=o(23),te=o(750),oe=o(941),ae=new(o.n(oe)()),se=!1;function ne(e){for(;ae.length&&e.timeRemaining()>0;)ae.shift()();ae.length?requestIdleCallback(ne):se=!1}var ie=function(e){ae.push(e),se||(se=!0,requestIdleCallback(ne))},re=o(179),le=o(536),de=o(4),ce=function(e){var t=e.status,a=(0,de.CG)((function(e){return e.me})),n=(0,de.Dn)().allowedEmoji,i=(0,m.I0)(),d=(0,de.hz)(),c=t.account;if(!c||"object"!=typeof c)return null;var u,h,f=function(){i((0,E.h7)("UNAUTHORIZED"))};return(0,s.Z)(_.Ug,{space:3},void 0,d.emojiReacts?(h=(u=(0,A.Rj)((0,l.List)(t.getIn(["pleroma","emoji_reactions"])),t.favourites_count,t.favourited,n).reverse()).reduce((function(e,t){return e+t.get("count")}),0))>0?(0,s.Z)(_.Ug,{space:.5,className:"emoji-reacts-container",alignItems:"center"},void 0,(0,s.Z)("div",{className:"emoji-reacts"},void 0,u.map((function(e,o){return(0,s.Z)(_.Ug,{space:.5,className:"emoji-react p-1",alignItems:"center"},o,(0,s.Z)(_.dy,{className:"emoji-react__emoji w-5 h-5 flex-none",emoji:e.get("name"),onClick:d.exposableReactions?(n=e,function(){a?function(e,t,o){i((0,E.h7)("REACTIONS",{username:e,statusId:t,reaction:o}))}(c.acct,t.id,String(n.get("name"))):f()}):void 0}),(0,s.Z)(_.xv,{theme:"muted",size:"sm",className:"emoji-react__count"},void 0,(0,s.Z)(p.BK,{value:e.get("count")})));var n}))),(0,s.Z)(_.xv,{theme:"muted",size:"sm",className:"emoji-reacts__count"},void 0,(0,s.Z)(p.BK,{value:h}))):"":t.favourites_count?(0,s.Z)(_.Ug,{space:.5,alignItems:"center"},void 0,(0,s.Z)(_.hU,{className:r()({"text-accent-300":!0,"cursor-default":!d.exposableReactions}),src:o(198),iconClassName:"fill-accent-300",role:"presentation",onClick:d.exposableReactions?function(e){var o,s;e.preventDefault(),a?(o=c.acct,s=t.id,i((0,E.h7)("FAVOURITES",{username:o,statusId:s}))):f()}:void 0}),(0,s.Z)(_.xv,{theme:"muted",size:"sm"},void 0,(0,s.Z)(p.BK,{value:t.favourites_count}))):"",t.reblogs_count?(0,s.Z)(_.Ug,{space:.5,alignItems:"center"},void 0,(0,s.Z)(_.hU,{className:"text-success-600 cursor-pointer",src:o(59),role:"presentation",onClick:function(e){var o,s;e.preventDefault(),a?(o=c.acct,s=t.id,i((0,E.h7)("REBLOGS",{username:o,statusId:s}))):f()}}),(0,s.Z)(_.xv,{theme:"muted",size:"sm"},void 0,(0,s.Z)(p.BK,{value:t.reblogs_count}))):"")},ue=function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},e(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function a(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(a.prototype=o.prototype,new a)}}(),pe=function(e){function t(){var t=e.apply(this,arguments)||this;return(0,n.Z)(t,"state",{height:null,mediaWrapperWidth:NaN}),(0,n.Z)(t,"node",null),(0,n.Z)(t,"handleOpenVideo",(function(e,o){t.props.onOpenVideo(e,o)})),(0,n.Z)(t,"handleExpandedToggle",(function(){t.props.onToggleHidden(t.props.status)})),(0,n.Z)(t,"handleOpenCompareHistoryModal",(function(){t.props.onOpenCompareHistoryModal(t.props.status)})),(0,n.Z)(t,"setRef",(function(e){t.node=e,t._measureHeight(),e&&t.setState({mediaWrapperWidth:e.offsetWidth})})),(0,n.Z)(t,"getActualStatus",(function(){var e=t.props.status;if(e)return e.reblog&&"object"==typeof e.reblog?e.reblog:e})),t}return ue(t,e),t.prototype._measureHeight=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.props.measureHeight&&this.node&&(ie((function(){return e.node&&e.setState({height:Math.ceil(e.node.scrollHeight)+1})})),this.props.onHeightChange&&t&&this.props.onHeightChange())},t.prototype.componentDidUpdate=function(e,t){this._measureHeight(t.height!==this.state.height)},t.prototype.render=function(){var e=this.getActualStatus();if(!e)return null;var t=e.account;if(!t||"object"!=typeof t)return null;var a={boxSizing:"border-box"},n=this.props.compact,i=null,l=null;this.props.measureHeight&&(a.height="".concat(this.state.height,"px"));var c,u=e.media_attachments.size,f=e.media_attachments.get(0);if(u>0&&f)if(1===u&&"video"===f.type){var m,g=f;if(g.external_video_id&&null!==(m=e.card)&&void 0!==m&&m.html){var v=this.state.mediaWrapperWidth,y=function(){var e=Number(g.meta.getIn(["original","width"])),t=Number(g.meta.getIn(["original","height"]));return Number(v)/(e/t)}();i=(0,s.Z)("div",{className:"status-card horizontal interactive status-card--video"},void 0,d.createElement("div",{ref:this.setRef,className:"status-card-video",style:{height:y},dangerouslySetInnerHTML:{__html:e.card.html}}))}else i=(0,s.Z)(re.default,{preview:g.preview_url,blurhash:g.blurhash,src:g.url,alt:g.description,aspectRatio:g.meta.getIn(["original","aspect"]),width:300,height:150,inline:!0,onOpenVideo:this.handleOpenVideo,sensitive:e.sensitive,visible:this.props.showMedia,onToggleVisibility:this.props.onToggleMediaVisibility})}else if(1===u&&"audio"===f.type){var M=f;i=(0,s.Z)(te.default,{src:M.url,alt:M.description,duration:M.meta.getIn(["original","duration",0]),poster:M.preview_url!==M.url?M.preview_url:t.avatar_static,backgroundColor:M.meta.getIn(["colors","background"]),foregroundColor:M.meta.getIn(["colors","foreground"]),accentColor:M.meta.getIn(["colors","accent"]),height:150})}else i=(0,s.Z)($.default,{standalone:!0,sensitive:e.sensitive,media:e.media_attachments,height:300,onOpenMedia:this.props.onOpenMedia,visible:this.props.showMedia,onToggleVisibility:this.props.onToggleMediaVisibility});else 0===e.spoiler_text.length&&!e.quote&&e.card&&(i=(0,s.Z)(le.Z,{onOpenMedia:this.props.onOpenMedia,card:e.card}));return e.quote&&(c=!1===e.pleroma.get("quote_visible",!0)?(0,s.Z)("div",{className:"quoted-status-tombstone"},void 0,(0,s.Z)("p",{},void 0,(0,s.Z)(h.Z,{id:"statuses.quote_tombstone",defaultMessage:"Post is unavailable."}))):(0,s.Z)(X.Z,{statusId:e.quote})),"direct"===e.visibility?l=(0,s.Z)(Q.Z,{src:o(173)}):"private"===e.visibility&&(l=(0,s.Z)(Q.Z,{src:o(177)})),(0,s.Z)("div",{style:a},void 0,d.createElement("div",{ref:this.setRef,className:r()("detailed-status",{compact:n})},(0,s.Z)("div",{className:"mb-4"},void 0,(0,s.Z)(ee.Z,{id:t.id,timestamp:e.created_at,avatarSize:42,hideActions:!0},t.id)),(0,s.Z)(Y.Z,{status:e}),(0,s.Z)(J.Z,{status:e,expanded:!e.hidden,onExpandedToggle:this.handleExpandedToggle}),i,c,(0,s.Z)(_.Ug,{justifyContent:"between",alignItems:"center",className:"py-2"},void 0,(0,s.Z)(ce,{status:e}),(0,s.Z)("div",{className:"detailed-status__timestamp"},void 0,l,(0,s.Z)("span",{},void 0,(0,s.Z)("a",{href:e.url,target:"_blank",rel:"noopener",className:"hover:underline"},void 0,(0,s.Z)(_.xv,{tag:"span",theme:"muted",size:"sm"},void 0,(0,s.Z)(p.Ji,{value:new Date(e.created_at),hour12:!1,year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"}))),e.edited_at&&d.createElement(d.Fragment,null," ¬∑ ",(0,s.Z)("div",{className:"inline hover:underline",onClick:this.handleOpenCompareHistoryModal,role:"button",tabIndex:0},void 0,(0,s.Z)(_.xv,{tag:"span",theme:"muted",size:"sm"},void 0,(0,s.Z)(h.Z,{id:"status.edited",defaultMessage:"Edited {date}",values:{date:this.props.intl.formatDate(new Date(e.edited_at),{hour12:!1,month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}})))))))))},t}(u.ZP),he=(0,f.ZP)(pe),fe=function(){var e=(0,de.CG)((function(e){return e.instance.title}));return(0,s.Z)(_.Zb,{className:"px-6 py-12 space-y-6 text-center",variant:"rounded"},void 0,(0,s.Z)(_.Kq,{},void 0,(0,s.Z)(_.ll,{title:(0,s.Z)(h.Z,{id:"thread_login.title",defaultMessage:"Continue the conversation"})}),(0,s.Z)(_.xv,{},void 0,(0,s.Z)(h.Z,{id:"thread_login.message",defaultMessage:"Join {siteTitle} to get the full story and details.",values:{siteTitle:e}}))),(0,s.Z)(_.Kq,{space:4,className:"max-w-xs mx-auto"},void 0,(0,s.Z)(_.zx,{theme:"secondary",to:"/login",block:!0},void 0,(0,s.Z)(h.Z,{id:"thread_login.login",defaultMessage:"Log in"})),(0,s.Z)(_.zx,{to:"/signup",block:!0},void 0,(0,s.Z)(h.Z,{id:"thread_login.signup",defaultMessage:"Sign up"}))))},me=o(227),ge=function(e){var t,o,a=e.id,n=e.focusedStatusId,i=(0,de.CG)((function(e){return e.contexts.getIn(["inReplyTos",a])})),c=(0,de.CG)((function(e){return e.contexts.getIn(["replies",a],(0,l.OrderedSet)()).size})),u=(0,de.CG)((function(e){return Boolean(e.statuses.get(a))}));return(0,s.Z)("div",{className:"thread__status"},void 0,(o=c>0,(t=i&&i!==n)||o?(0,s.Z)("div",{className:r()("thread__connector",{"thread__connector--top":t,"thread__connector--bottom":o})}):null),u?d.createElement(me.Z,e):(0,s.Z)(S.Z,{thread:!0}))},ve=function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},e(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function a(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(a.prototype=o.prototype,new a)}}(),ye=function(e,t,o,a){return new(o||(o=Promise))((function(s,n){function i(e){try{l(a.next(e))}catch(e){n(e)}}function r(e){try{l(a.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,r)}l((a=a.apply(e,t||[])).next())}))},Me=function(e,t){var o,a,s,n,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return n={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function r(n){return function(r){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,a&&(s=2&n[0]?a.return:n[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,n[1])).done)return s;switch(a=0,s&&(n=[2&n[0],s.value]),n[0]){case 0:case 1:s=n;break;case 4:return i.label++,{value:n[1],done:!1};case 5:i.label++,a=n[1],n=[0];continue;case 7:n=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==n[0]&&2!==n[0])){i=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){i.label=n[1];break}if(6===n[0]&&i.label<s[1]){i.label=s[1],s=n;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(n);break}s[2]&&i.ops.pop(),i.trys.pop();continue}n=t.call(e,i)}catch(e){n=[6,e],a=0}finally{o=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,r])}}},Ze=(0,p.vU)({title:{id:"status.title",defaultMessage:"@{username}'s Post"},titleDirect:{id:"status.title_direct",defaultMessage:"Direct message"},deleteConfirm:{id:"confirmations.delete.confirm",defaultMessage:"Delete"},deleteHeading:{id:"confirmations.delete.heading",defaultMessage:"Delete post"},deleteMessage:{id:"confirmations.delete.message",defaultMessage:"Are you sure you want to delete this post?"},redraftConfirm:{id:"confirmations.redraft.confirm",defaultMessage:"Delete & redraft"},redraftHeading:{id:"confirmations.redraft.heading",defaultMessage:"Delete & redraft"},redraftMessage:{id:"confirmations.redraft.message",defaultMessage:"Are you sure you want to delete this post and re-draft it? Favorites and reposts will be lost, and replies to the original post will be orphaned."},blockConfirm:{id:"confirmations.block.confirm",defaultMessage:"Block"},revealAll:{id:"status.show_more_all",defaultMessage:"Show more for all"},hideAll:{id:"status.show_less_all",defaultMessage:"Show less for all"},detailedStatus:{id:"status.detailed_status",defaultMessage:"Detailed conversation view"},replyConfirm:{id:"confirmations.reply.confirm",defaultMessage:"Reply"},replyMessage:{id:"confirmations.reply.message",defaultMessage:"Replying now will overwrite the message you are currently composing. Are you sure you want to proceed?"},blockAndReport:{id:"confirmations.block.block_and_report",defaultMessage:"Block & Report"}}),ke=function(e){function t(){var t,a=this;return a=e.apply(this,arguments)||this,t=a,(0,n.Z)(a,"state",{fullscreen:!1,showMedia:(0,T.qI)(a.props.status,a.props.displayMedia),loadedStatusId:void 0,emojiSelectorFocused:!1,isLoaded:Boolean(a.props.status),error:void 0,next:void 0}),(0,n.Z)(a,"node",null),(0,n.Z)(a,"status",null),(0,n.Z)(a,"_scrolledIntoView",!1),(0,n.Z)(a,"fetchData",(function(){return ye(a,void 0,void 0,(function(){var e,t,o,a,s;return Me(this,(function(n){switch(n.label){case 0:return e=this.props,t=e.dispatch,o=e.params,a=o.statusId,[4,t((0,U.wE)(a))];case 1:return s=n.sent().next,this.setState({next:s}),[2]}}))}))})),(0,n.Z)(a,"handleToggleMediaVisibility",(function(){a.setState({showMedia:!a.state.showMedia})})),(0,n.Z)(a,"handleEmojiReactClick",(function(e,t){a.props.dispatch((0,j._o)(e,t))})),(0,n.Z)(a,"handleFavouriteClick",(function(e){e.favourited?a.props.dispatch((0,O.m9)(e)):a.props.dispatch((0,O.yF)(e))})),(0,n.Z)(a,"handlePin",(function(e){e.pinned?a.props.dispatch((0,O.ef)(e)):a.props.dispatch((0,O.Cj)(e))})),(0,n.Z)(a,"handleBookmark",(function(e){e.bookmarked?a.props.dispatch((0,O.dO)(e)):a.props.dispatch((0,O.vj)(e))})),(0,n.Z)(a,"handleReplyClick",(function(e){var t=a.props,o=t.askReplyConfirmation,s=t.dispatch,n=t.intl;s(o?(0,E.h7)("CONFIRM",{message:n.formatMessage(Ze.replyMessage),confirm:n.formatMessage(Ze.replyConfirm),onConfirm:function(){return s((0,w.u5)(e,a.props.history))}}):(0,w.u5)(e,a.props.history))})),(0,n.Z)(a,"handleModalReblog",(function(e){a.props.dispatch((0,O.UM)(e))})),(0,n.Z)(a,"handleReblogClick",(function(e,t){a.props.dispatch((function(o,s){var n=(0,Z.Gw)(s()).get("boostModal");e.reblogged?a.props.dispatch((0,O.y_)(e)):t&&t.shiftKey||!n?a.handleModalReblog(e):a.props.dispatch((0,E.h7)("BOOST",{status:e,onReblog:a.handleModalReblog}))}))})),(0,n.Z)(a,"handleQuoteClick",(function(e){var t=a.props,o=t.askReplyConfirmation,s=t.dispatch,n=t.intl;s(o?(0,E.h7)("CONFIRM",{message:n.formatMessage(Ze.replyMessage),confirm:n.formatMessage(Ze.replyConfirm),onConfirm:function(){return s((0,w.vp)(e,a.props.history))}}):(0,w.vp)(e,a.props.history))})),(0,n.Z)(a,"handleDeleteClick",(function(e,a){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.props,i=n.dispatch,r=n.intl;t.props.dispatch((function(t,n){var l=(0,Z.Gw)(n()).get("deleteModal");i(l?(0,E.h7)("CONFIRM",{icon:o(s?178:58),heading:r.formatMessage(s?Ze.redraftHeading:Ze.deleteHeading),message:r.formatMessage(s?Ze.redraftMessage:Ze.deleteMessage),confirm:r.formatMessage(s?Ze.redraftConfirm:Ze.deleteConfirm),onConfirm:function(){return i((0,U.Vx)(e.id,a,s))}}):(0,U.Vx)(e.id,a,s))}))})),(0,n.Z)(a,"handleEditClick",(function(e){(0,a.props.dispatch)((0,U.QX)(e.get("id")))})),(0,n.Z)(a,"handleDirectClick",(function(e,t){a.props.dispatch((0,w.kS)(e,t))})),(0,n.Z)(a,"handleChatClick",(function(e,t){a.props.dispatch((0,y.aU)(e.id,t))})),(0,n.Z)(a,"handleMentionClick",(function(e,t){a.props.dispatch((0,w.Ck)(e,t))})),(0,n.Z)(a,"handleOpenMedia",(function(e,t){a.props.dispatch((0,E.h7)("MEDIA",{media:e,index:t}))})),(0,n.Z)(a,"handleOpenVideo",(function(e,t){a.props.dispatch((0,E.h7)("VIDEO",{media:e,time:t}))})),(0,n.Z)(a,"handleHotkeyOpenMedia",(function(e){var t=a.props,o=t.status,s=t.onOpenMedia,n=t.onOpenVideo,i=o.media_attachments.get(0);null==e||e.preventDefault(),o.media_attachments.size>0&&i&&("video"===i.type?n(i,0):s(o.media_attachments,0))})),(0,n.Z)(a,"handleMuteClick",(function(e){a.props.dispatch((0,D.A0)(e))})),(0,n.Z)(a,"handleConversationMuteClick",(function(e){e.muted?a.props.dispatch((0,U.ec)(e.id)):a.props.dispatch((0,U.fH)(e.id))})),(0,n.Z)(a,"handleToggleHidden",(function(e){e.hidden?a.props.dispatch((0,U.oK)(e.id)):a.props.dispatch((0,U.E1)(e.id))})),(0,n.Z)(a,"handleToggleAll",(function(){var e=a.props,t=e.status,o=e.ancestorsIds,s=e.descendantsIds,n=[t.id].concat(o.toArray(),s.toArray());t.hidden?a.props.dispatch((0,U.oK)(n)):a.props.dispatch((0,U.E1)(n))})),(0,n.Z)(a,"handleBlockClick",(function(e){var t=a.props,n=t.dispatch,i=t.intl,r=e.account;r&&"object"==typeof r&&n((0,E.h7)("CONFIRM",{icon:o(49),heading:(0,s.Z)(h.Z,{id:"confirmations.block.heading",defaultMessage:"Block @{name}",values:{name:r.acct}}),message:(0,s.Z)(h.Z,{id:"confirmations.block.message",defaultMessage:"Are you sure you want to block {name}?",values:{name:(0,s.Z)("strong",{},void 0,"@",r.acct)}}),confirm:i.formatMessage(Ze.blockConfirm),onConfirm:function(){return n((0,R.Gy)(r.id))},secondary:i.formatMessage(Ze.blockAndReport),onSecondary:function(){n((0,R.Gy)(r.id)),n((0,I.UQ)(r,e))}}))})),(0,n.Z)(a,"handleReport",(function(e){a.props.dispatch((0,I.UQ)(e.account,e))})),(0,n.Z)(a,"handleEmbed",(function(e){a.props.dispatch((0,E.h7)("EMBED",{url:e.url}))})),(0,n.Z)(a,"handleDeactivateUser",(function(e){var t=a.props,o=t.dispatch,s=t.intl;o((0,M.yM)(s,e.getIn(["account","id"])))})),(0,n.Z)(a,"handleDeleteUser",(function(e){var t=a.props,o=t.dispatch,s=t.intl;o((0,M.rx)(s,e.getIn(["account","id"])))})),(0,n.Z)(a,"handleToggleStatusSensitivity",(function(e){var t=a.props,o=t.dispatch,s=t.intl;o((0,M.SO)(s,e.id,e.sensitive))})),(0,n.Z)(a,"handleDeleteStatus",(function(e){var t=a.props,o=t.dispatch,s=t.intl;o((0,M.Uj)(s,e.id))})),(0,n.Z)(a,"handleHotkeyMoveUp",(function(){a.handleMoveUp(a.props.status.id)})),(0,n.Z)(a,"handleHotkeyMoveDown",(function(){a.handleMoveDown(a.props.status.id)})),(0,n.Z)(a,"handleHotkeyReply",(function(e){null==e||e.preventDefault(),a.handleReplyClick(a.props.status)})),(0,n.Z)(a,"handleHotkeyFavourite",(function(){a.handleFavouriteClick(a.props.status)})),(0,n.Z)(a,"handleHotkeyBoost",(function(){a.handleReblogClick(a.props.status)})),(0,n.Z)(a,"handleHotkeyMention",(function(e){null==e||e.preventDefault();var t=a.props.status.account;t&&"object"==typeof t&&a.handleMentionClick(t,a.props.history)})),(0,n.Z)(a,"handleHotkeyOpenProfile",(function(){a.props.history.push("/@".concat(a.props.status.getIn(["account","acct"])))})),(0,n.Z)(a,"handleHotkeyToggleHidden",(function(){a.handleToggleHidden(a.props.status)})),(0,n.Z)(a,"handleHotkeyToggleSensitive",(function(){a.handleToggleMediaVisibility()})),(0,n.Z)(a,"handleHotkeyReact",(function(){a._expandEmojiSelector()})),(0,n.Z)(a,"handleMoveUp",(function(e){var t=a.props,o=t.status,s=t.ancestorsIds,n=t.descendantsIds;if(e===o.id)a._selectChild(s.size-1,!0);else{var i=(0,l.List)(s).indexOf(e);-1===i?(i=(0,l.List)(n).indexOf(e),a._selectChild(s.size+i,!0)):a._selectChild(i-1,!0)}})),(0,n.Z)(a,"handleMoveDown",(function(e){var t=a.props,o=t.status,s=t.ancestorsIds,n=t.descendantsIds;if(e===o.id)a._selectChild(s.size+1,!1);else{var i=(0,l.List)(s).indexOf(e);-1===i?(i=(0,l.List)(n).indexOf(e),a._selectChild(s.size+i+2,!1)):a._selectChild(i+1,!1)}})),(0,n.Z)(a,"handleEmojiSelectorExpand",(function(e){"Enter"===e.key&&a._expandEmojiSelector(),e.preventDefault()})),(0,n.Z)(a,"handleEmojiSelectorUnfocus",(function(){a.setState({emojiSelectorFocused:!1})})),(0,n.Z)(a,"_expandEmojiSelector",(function(){if(a.status){a.setState({emojiSelectorFocused:!0});var e=a.status.querySelector(".emoji-react-selector .emoji-react-selector__emoji");null==e||e.focus()}})),(0,n.Z)(a,"setRef",(function(e){a.node=e})),(0,n.Z)(a,"setStatusRef",(function(e){a.status=e})),(0,n.Z)(a,"onFullScreenChange",(function(){a.setState({fullscreen:(0,B.rm)()})})),(0,n.Z)(a,"handleRefresh",(function(){return a.fetchData()})),(0,n.Z)(a,"handleLoadMore",(function(){var e=a.state.next;e&&a.props.dispatch((0,U.TA)(e)).then((function(e){var t=e.next;a.setState({next:t})})).catch((function(){}))})),(0,n.Z)(a,"handleOpenCompareHistoryModal",(function(e){(0,a.props.dispatch)((0,E.h7)("COMPARE_HISTORY",{statusId:e.id}))})),a}return ve(t,e),t.prototype.componentDidMount=function(){var e=this;this.fetchData().then((function(){e.setState({isLoaded:!0})})).catch((function(t){e.setState({error:t,isLoaded:!0})})),(0,B.yG)(this.onFullScreenChange)},t.prototype._selectChild=function(e,t){var o=this.node;if(o){var a=o.querySelectorAll(".focusable")[e];a&&(t&&o.scrollTop>a.offsetTop?a.scrollIntoView(!0):!t&&o.scrollTop+o.clientHeight<a.offsetTop+a.offsetHeight&&a.scrollIntoView(!1),a.focus())}},t.prototype.renderTombstone=function(e){return(0,s.Z)("div",{className:"tombstone"},e,(0,s.Z)("p",{},void 0,(0,s.Z)(h.Z,{id:"statuses.tombstone",defaultMessage:"One or more posts is unavailable."})))},t.prototype.renderStatus=function(e){var t=this.props.status;return(0,s.Z)(ge,{id:e,focusedStatusId:t.id,onMoveUp:this.handleMoveUp,onMoveDown:this.handleMoveDown},e)},t.prototype.renderPendingStatus=function(e){var t=this.props.status,o=e.replace(/^Êú´pending-/,"");return(0,s.Z)(x.Z,{className:"thread__status",idempotencyKey:o,focusedStatusId:t.id,onMoveUp:this.handleMoveUp,onMoveDown:this.handleMoveDown,contextType:"thread"},e)},t.prototype.renderChildren=function(e){var t=this;return e.map((function(e){return e.endsWith("-tombstone")?t.renderTombstone(e):e.startsWith("Êú´pending-")?t.renderPendingStatus(e):t.renderStatus(e)}))},t.prototype.componentDidUpdate=function(e,t){var o=this.props,a=o.params,s=o.status,n=o.displayMedia,i=e.ancestorsIds;if(a.statusId!==e.params.statusId&&(this._scrolledIntoView=!1,this.fetchData()),s&&s.id!==t.loadedStatusId&&this.setState({showMedia:(0,T.qI)(s,n),loadedStatusId:s.id}),!this._scrolledIntoView&&e.status&&i&&i.size>0&&this.node){var r=this.node.querySelector(".detailed-status");window.requestAnimationFrame((function(){null==r||r.scrollIntoView(!0)})),this._scrolledIntoView=!0}},t.prototype.componentWillUnmount=function(){(0,B.cW)(this.onFullScreenChange)},t.prototype.render=function(){var e=this.props,t=e.me,o=e.status,a=e.ancestorsIds,n=e.descendantsIds,i=e.intl,l=a&&a.size>0,u=n&&n.size>0;if(!o&&this.state.isLoaded)return(0,s.Z)(H.Z,{});if(!o)return(0,s.Z)(S.Z,{});var p={moveUp:this.handleHotkeyMoveUp,moveDown:this.handleHotkeyMoveDown,reply:this.handleHotkeyReply,favourite:this.handleHotkeyFavourite,boost:this.handleHotkeyBoost,mention:this.handleHotkeyMention,openProfile:this.handleHotkeyOpenProfile,toggleHidden:this.handleHotkeyToggleHidden,toggleSensitive:this.handleHotkeyToggleSensitive,openMedia:this.handleHotkeyOpenMedia,react:this.handleHotkeyReact},h=String(o.getIn(["account","acct"])),f="direct"===o.visibility?Ze.titleDirect:Ze.title,m=(0,s.Z)("div",{className:r()("thread__detailed-status",{"pb-4":u})},o.id,(0,s.Z)(c.HotKeys,{handlers:p},void 0,d.createElement("div",{ref:this.setStatusRef,className:r()("detailed-status__wrapper"),tabIndex:0,"aria-label":(0,T.XA)(i,o)},(0,s.Z)(he,{status:o,onOpenVideo:this.handleOpenVideo,onOpenMedia:this.handleOpenMedia,onToggleHidden:this.handleToggleHidden,showMedia:this.state.showMedia,onToggleMediaVisibility:this.handleToggleMediaVisibility,onOpenCompareHistoryModal:this.handleOpenCompareHistoryModal}),(0,s.Z)("hr",{className:"mb-2 dark:border-slate-600"}),(0,s.Z)(K,{status:o,onReply:this.handleReplyClick,onFavourite:this.handleFavouriteClick,onEmojiReact:this.handleEmojiReactClick,onReblog:this.handleReblogClick,onQuote:this.handleQuoteClick,onDelete:this.handleDeleteClick,onEdit:this.handleEditClick,onDirect:this.handleDirectClick,onChat:this.handleChatClick,onMention:this.handleMentionClick,onMute:this.handleMuteClick,onMuteConversation:this.handleConversationMuteClick,onBlock:this.handleBlockClick,onReport:this.handleReport,onPin:this.handlePin,onBookmark:this.handleBookmark,onEmbed:this.handleEmbed,onDeactivateUser:this.handleDeactivateUser,onDeleteUser:this.handleDeleteUser,onToggleStatusSensitivity:this.handleToggleStatusSensitivity,onDeleteStatus:this.handleDeleteStatus,allowedEmoji:this.props.allowedEmoji,emojiSelectorFocused:this.state.emojiSelectorFocused,handleEmojiSelectorExpand:this.handleEmojiSelectorExpand,handleEmojiSelectorUnfocus:this.handleEmojiSelectorUnfocus}))),u&&(0,s.Z)("hr",{className:"mt-2 dark:border-slate-600"})),g=[];return l&&g.push.apply(g,this.renderChildren(a).toArray()),g.push(m),u&&g.push.apply(g,this.renderChildren(n).toArray()),(0,s.Z)(_.sg,{label:i.formatMessage(f,{username:h}),transparent:!0},void 0,(0,s.Z)("div",{className:"px-4 pt-4 sm:p-0"},void 0,(0,s.Z)(C.Z,{message:i.formatMessage(f,{username:h})})),(0,s.Z)(_.Kq,{space:2},void 0,d.createElement("div",{ref:this.setRef,className:"thread"},(0,s.Z)(b.Z,{onRefresh:this.handleRefresh,hasMore:!!this.state.next,onLoadMore:this.handleLoadMore,placeholderComponent:function(){return(0,s.Z)(S.Z,{thread:!0})}},void 0,g)),!t&&(0,s.Z)(fe,{})))},t}(u.ZP),be=(0,g.EN)((0,f.ZP)(ke)),Ce=(0,m.$j)((function(){var e=(0,N.TE)(),t=(0,v.P1)([function(e,t){return t},function(e){return e.contexts.get("inReplyTos")}],(function(e,t){for(var o=(0,l.OrderedSet)(),a=e;a&&!o.includes(a);)o=(0,l.OrderedSet)([a]).union(o),a=t.get(a);return o})),o=(0,v.P1)([function(e,t){return t},function(e){return e.contexts.get("replies")}],(function(e,t){for(var o=(0,l.OrderedSet)(),a=[e];a.length>0;){var s=a.shift(),n=t.get(s);if(o.includes(s))break;e!==s&&(o=o.union([s])),n&&n.reverse().forEach((function(e){a.unshift(e)}))}return o}));return function(a,s){var n=e(a,{id:s.params.statusId}),i=(0,l.OrderedSet)(),r=(0,l.OrderedSet)();if(n){var d=n.id;i=t(a,a.contexts.getIn(["inReplyTos",d])),r=o(a,d),i=i.delete(d).subtract(r),r=r.delete(d).subtract(i)}var c=(0,k.UX)(a);return{status:n,ancestorsIds:i,descendantsIds:r,askReplyConfirmation:0!==a.compose.get("text","").trim().length,me:a.me,displayMedia:(0,Z.Gw)(a).get("displayMedia"),allowedEmoji:c.allowedEmoji}}}))(be)}}]);
//# sourceMappingURL=status-844e2737c87951661d3f.chunk.js.map