{"version":3,"file":"packs/js/features/edit_email-b00ec270575b84ccfb82.chunk.js","mappings":"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","sources":["webpack://soapbox-fe/./app/soapbox/features/edit_email/index.js"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import\"core-js/modules/web.dom-collections.iterator.js\";import\"core-js/modules/es.promise.finally.js\";import*as React from'react';import{defineMessages,useIntl}from'react-intl';import{useDispatch}from'react-redux';import{changeEmail}from'soapbox/actions/security';import snackbar from'soapbox/actions/snackbar';import{Button,Card,CardBody,CardHeader,CardTitle,Column,Form,FormActions,FormGroup,Input}from'../../components/ui';const messages=defineMessages({updateEmailSuccess:{\"id\":\"security.update_email.success\",\"defaultMessage\":\"Email successfully updated.\"},updateEmailFail:{\"id\":\"security.update_email.fail\",\"defaultMessage\":\"Update email failed.\"},emailFieldLabel:{\"id\":\"security.fields.email.label\",\"defaultMessage\":\"Email address\"},passwordFieldLabel:{\"id\":\"security.fields.password.label\",\"defaultMessage\":\"Password\"},submit:{\"id\":\"security.submit\",\"defaultMessage\":\"Save changes\"},cancel:{\"id\":\"common.cancel\",\"defaultMessage\":\"Cancel\"}});const initialState={email:'',password:''};const EditEmail=()=>{const intl=useIntl();const dispatch=useDispatch();const[state,setState]=React.useState(initialState);const[isLoading,setLoading]=React.useState(false);const{email,password}=state;const handleInputChange=React.useCallback(event=>{event.persist();setState(prevState=>_objectSpread(_objectSpread({},prevState),{},{[event.target.name]:event.target.value}));},[]);const handleSubmit=React.useCallback(()=>{setLoading(true);dispatch(changeEmail(email,password)).then(()=>{setState(initialState);dispatch(snackbar.success(intl.formatMessage(messages.updateEmailSuccess)));}).finally(()=>{setLoading(false);}).catch(()=>{setState(prevState=>_objectSpread(_objectSpread({},prevState),{},{password:''}));dispatch(snackbar.error(intl.formatMessage(messages.updateEmailFail)));});},[email,password,dispatch,intl]);return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage({id:'edit_email.header',defaultMessage:'Change Email'}),transparent:true,withHeader:false},void 0,/*#__PURE__*/_jsx(Card,{variant:\"rounded\"},void 0,/*#__PURE__*/_jsx(CardHeader,{backHref:\"/settings\"},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage({id:'edit_email.header',defaultMessage:'Change Email'})})),/*#__PURE__*/_jsx(CardBody,{},void 0,/*#__PURE__*/_jsx(Form,{onSubmit:handleSubmit},void 0,/*#__PURE__*/_jsx(FormGroup,{labelText:intl.formatMessage(messages.emailFieldLabel)},void 0,/*#__PURE__*/_jsx(Input,{placeholder:intl.formatMessage({id:'edit_email.placeholder',defaultMessage:'me@example.com'}),name:\"email\",autocomplete:\"off\",onChange:handleInputChange,value:email})),/*#__PURE__*/_jsx(FormGroup,{labelText:intl.formatMessage(messages.passwordFieldLabel)},void 0,/*#__PURE__*/_jsx(Input,{type:\"password\",name:\"password\",onChange:handleInputChange,value:password})),/*#__PURE__*/_jsx(FormActions,{},void 0,/*#__PURE__*/_jsx(Button,{to:\"/settings\",theme:\"ghost\"},void 0,intl.formatMessage(messages.cancel)),/*#__PURE__*/_jsx(Button,{type:\"submit\",theme:\"primary\",disabled:isLoading},void 0,intl.formatMessage(messages.submit)))))));};export default EditEmail;"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","messages","updateEmailSuccess","updateEmailFail","emailFieldLabel","passwordFieldLabel","submit","cancel","initialState","email","password","intl","dispatch","state","setState","isLoading","setLoading","handleInputChange","event","persist","prevState","name","value","handleSubmit","then","formatMessage","finally","catch","label","id","defaultMessage","transparent","withHeader","variant","backHref","title","onSubmit","labelText","placeholder","autocomplete","onChange","type","to","theme","disabled"],"sourceRoot":""}